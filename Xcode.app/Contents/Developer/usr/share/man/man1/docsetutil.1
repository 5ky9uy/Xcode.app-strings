.\" Copyright (c) 2007-2009 Apple Inc.
.\" All rights reserved.
.\" to preview: /usr/bin/nroff -msafer -mandoc docsetutil.1 | less
.Dd Mon June 28 2007               \" DATE 
.Dt docsetutil 1      \" Program name and manual section number 
.Os Mac OS X
.Sh NAME                 \" Section Header - required - don't modify 
.Nm docsetutil
.Nd Index, search, test, and package documentation sets
.Sh SYNOPSIS             \" Section Header - required - don't modify
index
.Op options
.Ar docsetpath
search
.Op options
.Ar docsetpath
validate
.Op options
.Ar docsetpath
dump
.Op options
.Ar docsetpath
package
.Op options
.Ar docsetpath
help
.Sh DESCRIPTION          \" Section Header - required - don't modify
Documentation sets are special bundles which hold documentation that can be loaded and searched by Xcode 3.0 and later.
tool performs several operations on documentation sets.  The tool's primary operations are
generating the full-text and API indexes for a documentation set bundle and then packaging up the documentation set for distribution. When indexing, the tool uses one or more XML files in the bundle's Resources
folder to learn about the
contents of the documentation set.  Once the indexes are generated,
can be used to test and perform searches on those indexes.
.Sh COMMON OPTIONS
Most
verbs accept the following options:
.Bl -tag -width -localizationXloc \" Differs from above in tag removed
.It Fl localization Ar loc
Perform the operation using a particular localization in the documentation set bundle.
Documentation sets can be localized. This option tells
which localization to load or create (when indexing).
.Ar loc
is a string, such as
.Sy en
.Sy ja
, that matches an
.Sy lproj
folder in the bundle.
.It Fl skip-text
Do not perform the operation for the full-text index.  For example, when performing a search for an API symbol, you may not want to also perform a full-text search.  Also, because generating the indexes can be time consuming for large documentation sets, you may not want to create both indexes while developing and testing your own documentation set.
.It Fl skip-api
Do not perform the operation for the API index.  Similar to the
.Fl skip-text
option.
.It Fl node Ar nodePath
Perform the operation only on the documents that reside at or below a particular location in the documentation set's table-of-contents node hierarchy.  The syntax is a colon-separated list of node names identifying how to navigate to the desired node, starting with the root node.  For example,
.Fl node
.Sy "'Library Documentation:Tutorial'"
would limit the operation to a second-level node (and all of its descendents) named "Tutorial" below the root node named "Library Documentation".
Because there is only one root node, its inclusion is optional, so the previous example could just be written as
.Fl node
.Sy "'Tutorial'" .
.It Fl verbose
Print out additional information about the operation being performed.
.It Fl debug
Print out detailed information about the operation being performed, which will likely be useful only when trying to track down a failure. 
.Sh VERBS
The operations supported by docsetutil are:
.Bl -tag -width validate  \" Differs from above in tag removed
.\"             -- help --
.It Sy help
Display minimal usage information for the tool.
.Sy help
accepts no options.
.\"             -- index --
.It Sy index
Convert the XML files describing the documentation set into a binary form and generate a full-text index of the contents of the documentation.
Common options:
.Fl localization ,
.Fl skip-text ,
.Fl skip-api ,
.Fl node ,
.Fl verbose ,
.Fl "debug".
Options:
.Bl -tag -width "-medium" -compact
.It Fl fallback Ar path
Documentation sets can distribute their content between the installed bundle and an alternative location,
usually a website.  This optional value tells
where to look (locally) for additional content that needs to be indexed.
.It Fl download
If a node uses an absolute URL for its landing page, download that page and include it in the full-text index.
.\"             -- search --
.It Sy search
Search the full-text and API indexes for the specified term(s).
Common options:
.Fl localization ,
.Fl skip-text ,
.Fl skip-api ,
.Fl node ,
.Fl verbose ,
.Fl "debug".
Options:
.Bl -tag -width "-medium" -compact
.It Fl query Ar str
The string to search for in both the full-text and API index.  This option is required when searching.
When searching the full-text index,
.Ar str
is treated as a SearchKit query, so you can perform complex queries.  For example, you can use
.Fl query Sy "'Xcode && build*'"
to search for all documents that mention Xcode and also contain a word starting with "build".
When searching the API index,
.Ar str
is normally treated as an exact, case-insensitive symbol name; no wild cards are allowed. However,
the API search can be constrained using the extended syntax 
.Ar language/type/scope/name ,
where
.Ar language
is the language in which the symbol is defined,
.Ar type
is a special identifier that specifies the type of symbol for which to search,
.Ar scope
is the namespace or container (such as class) in which the symbol is defined, and
.Ar name
is the actual name of the symbol. Furthermore, this syntax performs a case-sensitive search for the symbol scope and name.  If the symbol has no scope (ie, it is a global symbol), use '-'; if you don't want to constrain the search with one of the terms use '*'.  To search for all Objective-C symbols defined inside the NSWindow class, you can do:
.Fl query Sy "'Objective-C/*/NSWindow/*'"
.It Fl text-tree
When set, the text search results are presented using a new hierarchical/tree format wherein individual page and section search results are coallesced together under the node that holds those search results. This hierarchy is generated by walking the node tree upward until the first non-section node is located.  The results are then presented by listing each of the most relevant root nodes followed by their subnode result hierarchies indented below it.
.\"             -- validate --
.It Sy validate
Examine the indexes for all the files referenced and verify that those files actually exist in the documentation set (or its fallback location).
Common options:
.Fl localization ,
.Fl skip-text ,
.Fl skip-api ,
.Fl verbose ,
.Fl "debug".
Options:
.Bl -tag -width "-medium" -compact
.It Fl fallback Ar path
Documentation sets can distribute their content between the bundle and an alternative location,
usually a website.  This optional value tells
where to look (locally) for additional content against which the indexes should be checked.  If you indexed the documentation set with a fallback location, you should also specify the same (or equivalent) location when validating the indexes.
.\"             -- dump --
.It Sy dump
Print out the contents of the indexes.  The table-of-contents will be printed out in an indented style to reflect the structure; the set of files that were included in the full-text index will be listed and grouped according to the document to which each file belongs and the location at which each document was found; and brief descriptions of all the symbols in the API index will be listed.
Common options:
.Fl localization ,
.Fl skip-text ,
.Fl skip-api ,
.Fl node ,
.Fl verbose ,
.Fl "debug".
Options:
.Bl -tag -width "-medium" -compact
.It Fl toc-depth Ar N
When printing out the table-of-content hierarchy, descend only
.Ar N
levels deep.
.Ar N
of 0 means display only the highest level node; do not descend into the hierarchy.  The default value is 5.
.It Fl text-depth Ar N
When printing the files from the full-text index, display the full-text hierarchy of location, document, and file to a particular depth.
.Ar N
of 0 means display only the high-level locations (ie, default documentation set location, the fallback location, or a website URL) at which nodes were indexed.
.Ar N
of 1 means further display the relative path of each node indexed inside each location.
.Ar N
of 2 means further display the relative path of each file indexed inside each node.  The default value is 1.
.\"             -- package --
.It Sy package
Generate an XAR archive of the documentation set appropriate for downloading and installing by Xcode.
Common options:
.Fl verbose ,
.Fl "debug".
Options:
.Bl -tag -width "-medium" -compact
.It Fl output Ar packagePath
The path of the archive to create.  If this option is not used, the archive is written to the same folder as the source documentation set with the same name as the documentation set, except with the ".docset" extension changed to ".xar".
.It Fl signid Ar identityName
Include a digital signature in the archive using the specified identity.  Xcode will validate this signature before installing the documentation.
searches the current user's keychains for an identity with the given name.
.It Fl atom Ar atomPath
Generate or update an entry about the documentation set in an Atom feed file at the given location.  If no file exists at the location, yet,
will create a new Atom file there with a single entry about the documentation set.  Xcode is able to subscribe to RSS and Atom feeds to learn about and download updates to documentation sets.
.It Fl download-url Ar downloadURL
Use the given URL as the download location of the package in the feed entry.  If a new feed entry is created, but this option is not specified,
will use a placeholder in the entry, which you will need to edit before publishing the feed.
