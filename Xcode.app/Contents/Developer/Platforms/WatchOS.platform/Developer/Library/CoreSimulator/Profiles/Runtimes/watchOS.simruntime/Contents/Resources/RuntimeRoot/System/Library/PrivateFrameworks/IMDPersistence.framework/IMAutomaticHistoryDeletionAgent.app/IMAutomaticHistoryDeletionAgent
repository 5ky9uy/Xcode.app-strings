6A_p
@@(#)PROGRAM:IMAutomaticHistoryDeletionAgent  PROJECT:IMAutomaticHistoryDeletionAgent-1000
HealthCheckLastStartTime
HealthCheckDeltaOverride
HealthCheckLeewayOverride
madrid-healthcheck-fuzz-delta-maximum
madrid-healthcheck-fuzz-delta-leeway
madrid-healthcheck-enabled
madrid-healthcheck-per-chat-message-count
madrid-healthcheck-messages-load
madrid-healthcheck-chats-count
IMAutomaticHistoryDeletionAgent
Feature enabled %@. { isInternalInstall: %@ }
Responding with %@
@"IMHealthCheckResponse"16@?0@"IMHealthCheck"4@"NSObject<NSSecureCoding>"8@"NSDictionary"12
Device is not a phone (%@), can't initiate
There are no other known devices, not initiating
Time since last %@
This device initiated too recently
phone
B8@?0@4
There are no other phones
There is another phone, but this one sorted first (%@ VS %@)
There is another phone that should initiate (%@ VS %@)
Health check will begin in %@ seconds (leeway of %@ seconds) {startTime: %@}
Health check beginning %@
Loaded chats. { numberOfChats: %@, loadCount: %@ }
Health check finished with results: %@
v8@?0@"NSArray"4
v4@?0
iMessage
v8@?0^{_IMDChatRecordStruct=}4
i12@?0@4@8
@"NSString"12@?0@"NSString"4@"NSString"8
Submitting metrics. { destinationCount: %ld, results : %@, loadedMessages: %@ }
Finished submitting
items
guid
cmpc
IMHealthCheckTranscript <%@> [Items: %@]
supportsSecureCoding
TB,R
context
T@"NSData",&,N,V_context
T@"NSDictionary",&,N,V_items
T@"NSString",&,N,V_guid
compareCount
TI,N,V_compareCount
first
last
IMHealthCheck
Running retrieveTranscriptForContext in IMHealthCheck client
/BuildRoot/Library/Caches/com.apple.xbs/Sources/IMCore_Sim/IMCore-1815.1/IMAutomaticHistoryDeletionAgent/Healthcheck/IMHealthCheck.m
<Unknown File>
Items can't be nil
v8@?0@"IMHealthCheckResponse"4
Starting deltasFromTranscript in IMHealthCheck client. { compareCount: %@ }
hash
TI,R
superclass
T#,R
description
T@"NSString",R,C
debugDescription
daemon
T@"<IMHDaemon>",&,N,V_daemon
responseBlock
T@?,C,N,V_responseBlock
completion
T@?,C,N,V_completion
delegate
T@"<IMHealthCheckDelegate>",W,N,V_delegate
idsInterface
T@"<IMHIDSInterface>",&,N,V_idsInterface
operation
Ti,R,N,V_operation
cost
Ti,R,N,V_cost
info
deltas: %@ info: %@
deltaMap
T@"NSDictionary",&,N,V_deltaMap
userInfo
T@"NSDictionary",&,N,V_userInfo
T@"<IMHServiceWrapperDelegate>",&,N
devices
T@"NSArray",R,C,N
accounts
T@"NSSet",R,C,N
service
T@"IDSService",&,N,V_service
completionMap
T@"NSMutableDictionary",&,N,V_completionMap
T@"<IMHServiceWrapperDelegate>",&,N,V_delegate
madrid-healthcheck-message-timeout
Recieved incoming transcript: %@
Recieved reply transcript from client: %@ info: %@
B12@?0@4@8
Replying for transcript: %@ with deltas: %@
v12@?0@"NSDictionary"4@"NSDictionary"8
Received incoming response: %@ for transcript: %@
Beginning health check for transcript: %@
Successfully sent transcript: %@
Failed to send transcript: %@
v8@?0B4
T@"<IMHealthCheckDaemonDelegate>",W,N
requestStore
T@"<IMHRequestStore>",&,N,V_requestStore
T@"<IMHIDSInterface>",W,N,V_idsInterface
T@"<IMHealthCheckDaemonDelegate>",W,N,V_delegate
com.apple.MobileSMS
automatic-deletion-disabled
IMAutomaticHistoryDeletionAgent launched!
%@/Library/Preferences/%@
IPHONE_SHARED_RESOURCES_DIRECTORY
CFFIXED_USER_HOME
com.apple.notifyd.matching
Received iOS keep messages pref change notif,.
v8@?0@"NSObject<OS_xpc_object>"4
Reached iOS automatic deletion setup method
Device under first data protection lock, returning early.
Server returned that deletion was diabled, not deleting anything.
Should we cleans orphaned attachments? (date=%@) (weekdayComponents:%@) (Day:%ld)
Target date: %ld
TargetAttachmentCleanupDate
Changing target date based on defaults
Reached iOS deletion method
KeepMessageForDays
Notifying agent so that it can reload the chats.
com.apple.automatichistorydeletion.deleted
Could not find sms domain
deleting stale ChatKit previews
deleting stale ChatKit bubble plugin previews
Not the target date, bailing
CKAnimatedImageMediaObjectPreview
ChatKit preview (%@) is too old (created %@), deleting.
/var/mobile/Library/Caches/com.apple.MobileSMS/Plugins/Snapshots
Cleaning database
Notifying to kick off daily periodic sync from automatic deletion agent
Completed health check
Not initiating. { shouldInitiate: %@, isTargetDate: %@ }
Feature has been disabled
mssd
IMHealthCheckDelta: [out of order: %@ missed: %@ hashMatched: %@]
matchedCoarseHash
TB,N,V_matchedCoarseHash
numOutOfOrder
Ti,R,N,V_numOutOfOrder
numMissed
Ti,R,N,V_numMissed
T@"<IMHRequestStoreDelegate>",W,N
timeout
Td,N,V_timeout
storedTranscripts
T@"NSMutableDictionary",&,N,V_storedTranscripts
T@"<IMHRequestStoreDelegate>",W,N,V_delegate
Must provide IMDeltaDelete and IMDeltaInsert to IMHDistanceCalculator init
T@"NSArray",R,C,N,V_ops
delta
transcript
type
IMHealthCheckMessageTypeUnknown
IMHealthCheckMessageTypeRequest
IMHealthCheckMessageTypeRespond
com.apple.private.alloy.madrid.healthcheck
Transcript is nil, not sending message.
v16@?0@"NSString"4@"NSError"8B12
Unable to reply to health check, message failed to send with error: %@
Successfully replied to transcript
Recieved incoming message of type: %@(%@)
destinations
T@"NSSet",R,N
T@"NSArray",R,N
aliases
idsService
T@"<IMHService>",&,N,V_idsService
T@"<IMHDaemon>",W,N,V_daemon
data
T@"NSDictionary",&,N,V_data
sharedInstanceForBagType:
objectForKey:
sharedInstance
isInternalInstall
boolValue
alloc
dictionary
class
isKindOfClass:
idsInterface
aliases
setWithArray:
objectForKeyedSubscript:
isEqualToSet:
numberWithBool:
setObject:forKeyedSubscript:
copy
initWithData:userInfo:
initWithResponseBlock:
devices
deviceType
numberWithInteger:
count
unsignedLongLongValue
numberWithDouble:
modelIdentifier
lowercaseString
containsString:
__imArrayByFilteringWithBlock:
uniqueID
sortedArrayUsingSelector:
firstObject
compare:
numberWithUnsignedLongLong:
numberWithLongLong:
numberWithUnsignedInteger:
destinations
dictionaryWithObjects:forKeys:count:
deltasFromDictionary:context:compareCount:withCompletion:
array
serviceName
isEqualToIgnoringCase:
addObject:
lastMessage
messageID
sortUsingComparator:
countByEnumeratingWithState:objects:count:
chatIdentifier
groupID
longLongValue
arrayWithObjects:count:
guid
unsignedIntegerValue
stringByReplacingOccurrencesOfString:withString:
length
substringToIndex:
intValue
userInfo
deltaMap
matchedCoarseHash
numOutOfOrder
numMissed
initWithItems:context:
init
appendString:
description
stringWithFormat:
encodeObject:forKey:
setWithObjects:
decodeObjectOfClasses:forKey:
decodeObjectOfClass:forKey:
transcriptWithItems:context:
supportsSecureCoding
encodeWithCoder:
initWithCoder:
.cxx_destruct
items
setItems:
context
setContext:
setGuid:
compareCount
setCompareCount:
_items
_context
_guid
_compareCount
subarrayWithRange:
data
objectAtIndexedSubscript:
dataUsingEncoding:
appendData:
isEqualToString:
setIdsInterface:
setDaemon:
initWithIDSInterface:daemon:
setDelegate:
lastObject
unarchiveObjectWithData:
stringWithUTF8String:
currentHandler
handleFailureInMethod:object:file:lineNumber:description:
processItemDictionary:withCompareCount:bookends:
delegate
provideItemsForContext:bookends:finishedBlock:
archivedDataWithRootObject:
stringGUID
beginCheckWithTranscript:
isEqual:
self
performSelector:
performSelector:withObject:
performSelector:withObject:withObject:
isProxy
isMemberOfClass:
conformsToProtocol:
respondsToSelector:
retain
release
autorelease
retainCount
zone
hash
superclass
debugDescription
retrieveTranscriptForTranscript:reply:
finishedCheckForTranscript:withResult:
deltasFromDictionary:context:withCompletion:
daemon
responseBlock
setResponseBlock:
completion
setCompletion:
_delegate
_idsInterface
_daemon
_responseBlock
_completion
initWithOperation:cost:
operation
cost
_operation
_cost
setDeltaMap:
setUserInfo:
_deltaMap
_userInfo
initWithService:
addDelegate:queue:
removeDelegate:
dealloc
accounts
service
sendMessage:toDestinations:priority:options:identifier:error:
service:account:incomingMessage:fromID:context:
service:account:incomingData:fromID:context:
service:account:incomingUnhandledProtobuf:fromID:context:
service:account:incomingResourceAtURL:fromID:context:
service:account:incomingResourceAtURL:metadata:fromID:context:
service:activeAccountsChanged:
service:devicesChanged:
service:nearbyDevicesChanged:
service:connectedDevicesChanged:
service:account:identifier:didSendWithSuccess:error:
service:account:identifier:didSendWithSuccess:error:context:
service:account:identifier:hasBeenDeliveredWithContext:
service:account:inviteReceivedForSession:fromID:
service:account:inviteReceivedForSession:fromID:withOptions:
service:account:inviteReceivedForSession:fromID:withContext:
serviceSpaceDidBecomeAvailable:
serviceAllowedTrafficClassifiersDidReset:
service:didSwitchActivePairedDevice:acknowledgementBlock:
sendMessage:toDestinations:priority:options:withCompletion:
setService:
completionMap
setCompletionMap:
_service
_completionMap
doubleValue
initWithTimeout:
deltaFromReference:toTruth:usingEqualityFunction:
setMatchedCoarseHash:
replyToTranscript:withProcessedResponse:context:
requestStore
saveResponse:forTranscript:
storeTranscript:forExpectedCount:
sendTranscript:withCompletion:
requestStore:finishedCheckForTranscript:withResponses:
processRecievedTranscript:withContext:
processResponse:forTranscript:
setRequestStore:
_requestStore
trackEvent:
cStringUsingEncoding:
currentRunLoop
setWatchesDataProtectionLockState:
isUnderFirstDataProtectionLock
date
calendarWithIdentifier:
components:fromDate:
weekday
deleteMessagesAndAttachmentsAfterDays:
cleanUpOrphanAttachments
fileURLWithPathComponents:
defaultManager
enumeratorAtURL:includingPropertiesForKeys:options:errorHandler:
nextObject
path
attributesOfItemAtPath:error:
timeIntervalSinceNow
removeItemAtPath:error:
fileURLWithPath:
cleanDatabase
initWithNumOutOfOrder:numMissed:
decodeIntegerForKey:
decodeBoolForKey:
encodeInteger:forKey:
encodeBool:forKey:
_matchedCoarseHash
_numMissed
_numOutOfOrder
_timeoutTimerFired:
scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:
integerValue
_handleTimeoutForTranscriptWithkey:
invalidate
timeout
setTimeout:
storedTranscripts
setStoredTranscripts:
_storedTranscripts
_timeout
isValidOperation:
exceptionWithName:reason:userInfo:
initWithOperationsAndCosts:
initWithCapacity:
setObject:atIndexedSubscript:
costForOperation:
numberWithInt:
minimumIn:
editDistanceFromReference:toTruth:usingEqualityFunction:
orderedSetWithArray:
mutableCopy
intersectOrderedSet:
minusOrderedSet:
unionOrderedSet:
editDistanceFromReference:toTruth:
deltaFromReference:toTruth:
_ops
initWithIMHService:
idsService
allSelfDeviceIDs
vettedAliases
allObjects
fromID
setWithObject:
initForReadingWithData:
setRequiresSecureCoding:
setIdsService:
_idsService
setData:
_data
IMHealthCheckTranscript
NSSecureCoding
NSCoding
IMHealthCheck
IMHealthCheckDaemonDelegate
NSObject
IMHealthCheckOperationAndCost
IMHProcessedResponse
IMHServiceWrapper
IDSServiceDelegate
IMHService
IMHealthCheckDaemon
IMHRequestStoreDelegate
IMHDaemon
IMHealthCheckDelta
IMHRequestStore
IMHDistanceCalculator
IMHealthCheckIDSInterface
IMHServiceWrapperDelegate
IMHIDSInterface
IMHealthCheckResponse
@16@0:4@8@12
B8@0:4
v12@0:4@8
@12@0:4@8
v12@0:4@"NSCoder"8
@12@0:4@"NSCoder"8
@8@0:4
v8@0:4
I8@0:4
v12@0:4I8
@"NSDictionary"
@"NSData"
@"NSString"
@20@0:4@8I12@16
B12@0:4@8
#8@0:4
@12@0:4:8
@16@0:4:8@12
@20@0:4:8@12@16
B12@0:4#8
B12@0:4:8
Vv8@0:4
^{_NSZone=}8@0:4
B12@0:4@"Protocol"8
@"NSString"8@0:4
v16@0:4@8@?12
v16@0:4@8@12
v16@0:4@"IMHealthCheckTranscript"8@?<v@?@"NSDictionary"@"NSDictionary">12
v16@0:4@"IMHealthCheckTranscript"8@"NSArray"12
@12@0:4@?8
B20@0:4@8@12@?16
B24@0:4@8@12I16@?20
@?8@0:4
v12@0:4@?8
@"<IMHealthCheckDelegate>"
@"<IMHIDSInterface>"
@"<IMHDaemon>"
@16@0:4i8i12
i8@0:4
v28@0:4@8@12@16@20@24
v32@0:4@8@12@16@20@24@28
v28@0:4@8@12@16B20@24
v32@0:4@8@12@16B20@24@28
v24@0:4@8@12@16@20
v20@0:4@8@12@?16
v28@0:4@"IDSService"8@"IDSAccount"12@"NSDictionary"16@"NSString"20@"IDSMessageContext"24
v28@0:4@"IDSService"8@"IDSAccount"12@"NSData"16@"NSString"20@"IDSMessageContext"24
v28@0:4@"IDSService"8@"IDSAccount"12@"IDSProtobuf"16@"NSString"20@"IDSMessageContext"24
v28@0:4@"IDSService"8@"IDSAccount"12@"NSURL"16@"NSString"20@"IDSMessageContext"24
v32@0:4@"IDSService"8@"IDSAccount"12@"NSURL"16@"NSDictionary"20@"NSString"24@"IDSMessageContext"28
v16@0:4@"IDSService"8@"NSSet"12
v16@0:4@"IDSService"8@"NSArray"12
v28@0:4@"IDSService"8@"IDSAccount"12@"NSString"16B20@"NSError"24
v32@0:4@"IDSService"8@"IDSAccount"12@"NSString"16B20@"NSError"24@"IDSMessageContext"28
v24@0:4@"IDSService"8@"IDSAccount"12@"NSString"16@20
v24@0:4@"IDSService"8@"IDSAccount"12@"IDSSession"16@"NSString"20
v28@0:4@"IDSService"8@"IDSAccount"12@"IDSSession"16@"NSString"20@"NSDictionary"24
v28@0:4@"IDSService"8@"IDSAccount"12@"IDSSession"16@"NSString"20@"NSData"24
v12@0:4@"IDSService"8
v20@0:4@"IDSService"8@"IDSDevice"12@?<v@?>16
v28@0:4@8@12i16@20@?24
v28@0:4@"NSDictionary"8@"NSSet"12i16@"NSDictionary"20@?<v@?@"NSString"@"NSError"B>24
@"<IMHServiceWrapperDelegate>"8@0:4
v12@0:4@"<IMHServiceWrapperDelegate>"8
@"NSArray"8@0:4
@"NSSet"8@0:4
@"<IMHServiceWrapperDelegate>"
@"IDSService"
@"NSMutableDictionary"
v20@0:4@8@12@16
v20@0:4@"IMHRequestStore"8@"IMHealthCheckTranscript"12@"NSArray"16
v16@0:4@"IMHealthCheckTranscript"8@12
v16@0:4@"IMHProcessedResponse"8@"IMHealthCheckTranscript"12
v12@0:4@"IMHealthCheckTranscript"8
@"<IMHealthCheckDaemonDelegate>"8@0:4
v12@0:4@"<IMHealthCheckDaemonDelegate>"8
@"<IMHealthCheckDaemonDelegate>"
@"<IMHRequestStore>"
v12@0:4B8
v16@0:4@8i12
v16@0:4@"IMHealthCheckTranscript"8i12
@"<IMHRequestStoreDelegate>"8@0:4
v12@0:4@"<IMHRequestStoreDelegate>"8
@16@0:4d8
d8@0:4
v16@0:4d8
@"<IMHRequestStoreDelegate>"
i12@0:4@8
B12@0:4i8
i12@0:4i8
i20@0:4@8@12@?16
i16@0:4@8@12
@20@0:4@8@12@?16
@"NSArray"
v16@0:4@"IMHealthCheckTranscript"8@?<v@?B>12
v20@0:4@"IMHealthCheckTranscript"8@"IMHProcessedResponse"12@16
@"<IMHService>"
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>application-identifier</key>
<string>com.apple.imautomatichistorydeletionagent</string>
<key>com.apple.CommCenter.fine-grained</key>
<array>
<string>spi</string>
</array>
<key>com.apple.private.ids.messaging</key>
<array>
<string>com.apple.private.alloy.madrid.healthcheck</string>
</array>
<key>com.apple.private.ids.messaging.high-priority</key>
<array>
<string>com.apple.private.alloy.madrid.healthcheck</string>
</array>
<key>com.apple.private.imcore.imdpersistence.database-access</key>
<true/>
</dict>
</plist>
zPLR
