@(#)PROGRAM:HealthMedicationsVision  PROJECT:Medications-1
333333
?33s?fff?
HKMedicationsDemoSearchAssetInterface
SELECT pr.product_id, pr.generic_name, pr.brand_name, pa.package_ndc, pa.description         FROM packaging AS pa         JOIN product_packaging AS pp ON pa.package_id=pp.packaging_id         JOIN product AS pr ON pp.product_id=pr.product_id         WHERE pa.package_ndc_11=? OR pa.package_ndc_10=?
v8@?0
No medication matching NDC was found
SELECT DISTINCT gm.generic_medication_id, gm.name             FROM token AS tk             LEFT JOIN ingredient_token AS ing_tk ON tk.token_id=ing_tk.token_id             LEFT JOIN ingredient_strength AS ingstr ON ingstr.component_id=ing_tk.ingredient_id             LEFT JOIN ingredient AS ing ON ingstr.ingredient_id=ing.ingredient_id             LEFT JOIN generic_medication_ingredient AS gmi ON gmi.ingredient_id=ing.ingredient_id             LEFT JOIN generic_medication AS gm ON gm.generic_medication_id=gmi.generic_medication_id             WHERE tk.token LIKE ? AND gm.generic_medication_id IS NOT NULL
SELECT ing.ingredient_id, ing.name         FROM generic_medication AS gm         LEFT JOIN generic_medication_ingredient AS gmi ON gm.generic_medication_id=gmi.generic_medication_id         LEFT JOIN ingredient AS ing ON gmi.ingredient_id=ing.ingredient_id         WHERE gm.generic_medication_id=?
Generic
Not Generic
 %@ %@ %@
abcdefghijklmnopqrstuvwxyz0123456789%
abcdefghijklmnopqrstuvwxyz0123456789 
abcdefghijklmnopqrstuvwxyz0123456789
\b([0-9]{4})[\ -]([0-9]{4})[\ -]([0-9]{2})\b
\b([0-9]{5})[\ -]([0-9]{3})[\ -]([0-9]{2})\b
\b([0-9]{5})[\ -]([0-9]{4})[\ -]([0-9]{1})\b
\b([0-9]{5})[\ -]([0-9]{4})[\ -]([0-9]{2})\b
v32@?0@"NSTextCheckingResult"8Q16^B24
ingredient matched
no match
 %d %f %@
ATTACH DATABASE ? AS pbs_assets;
v16@?0^{sqlite3_stmt=}8
CREATE TABLE ngram_list (ngram TEXT PRIMARY KEY) WITHOUT ROWID;
CREATE TABLE ngram_list_line (ngram TEXT PRIMARY KEY) WITHOUT ROWID;
CREATE TABLE ngram_list_frame (ngram TEXT PRIMARY KEY) WITHOUT ROWID;
CREATE TABLE ngram_id_list(ngram_id INTEGER, ngram_weight FLOAT);
CREATE TABLE common_map(hg_id INTEGER, ngram_count INTEGER);
CREATE TABLE unique_map(hg_id INTEGER, specific_id INTEGER, ngram_count INTEGER);
DELETE FROM ngram_list_line
DELETE FROM ngram_list_frame
DELETE FROM ngram_list
DELETE FROM ngram_id_list;
DELETE FROM common_map;
DELETE FROM unique_map;
INSERT INTO ngram_id_list SELECT ngram_id, ngram_weight FROM pbs_assets.ngram_map WHERE ngram IN ngram_list;
INSERT INTO common_map SELECT hg_id, SUM(ngram_weight) FROM pbs_assets.common_ngram_map JOIN ngram_id_list ON ngram_id_list.ngram_id = pbs_assets.common_ngram_map.ngram_id GROUP BY hg_id;
INSERT INTO unique_map SELECT hg_id, specific_id, SUM(ngram_weight) FROM pbs_assets.unique_ngram_map JOIN ngram_id_list ON ngram_id_list.ngram_id = pbs_assets.unique_ngram_map.ngram_id GROUP BY hg_id, specific_id;
SELECT SUM(ngram_weight) FROM ngram_id_list
B24@?0^{HDSQLiteRow=}8^@16
SELECT hg_id, ngram_count FROM common_map
SELECT hg_id, specific_id, ngram_count FROM unique_map
SELECT hg_id, ngram_count FROM pbs_assets.common_ngram_count WHERE hg_id IN (SELECT hg_id FROM common_map)
SELECT specific_id, ngram_count FROM pbs_assets.unique_ngram_count WHERE specific_id IN (SELECT specific_id FROM unique_map)
SELECT hg_id FROM (SELECT hg_id FROM common_map UNION SELECT hg_id FROM unique_map)
SELECT COUNT(*) FROM ngram_list;
SELECT COUNT(*) FROM ngram_id_list;
SELECT COUNT(*), COUNT(ngram_id), SUM(ngram_weight), SUM(is_unit), SUM(is_number), MAX(ngram_prob) FROM ngram_list_line LEFT JOIN pbs_assets.ngram_map ON ngram_list_line.ngram = pbs_assets.ngram_map.ngram;
compare to
INSERT INTO ngram_list_line (ngram) VALUES (?);
INSERT OR REPLACE INTO ngram_list_frame SELECT ngram FROM ngram_list_line;
DELETE FROM ngram_list_line;
INSERT OR REPLACE INTO ngram_list SELECT ngram from ngram_list_frame;
DELETE FROM ngram_list_frame;
compared to
generic for
SELECT specific_id FROM generic_map where clinical_id = ? LIMIT 1;
v24@?0q8q16
q24@?0@"HKMedicationsMercuryId"8@"HKMedicationsMercuryId"16
q24@?0@"HKMedicationsMercuryIdGroup"8@"HKMedicationsMercuryIdGroup"16
v32@?0@"HKMedicationsMercuryIdGroup"8Q16^B24
SELECT word, abbreviation FROM abbreviations
SELECT hg_id, ingredient FROM ingredients
SELECT specific_id, trade_name FROM trade_names
SELECT COUNT(*) FROM ngram_id_list
SELECT * from ngram_list
Library/Health/vision
pbs_assets.db
Mercury ID: %@ - Score: %@
SIMULATOR_SHARED_RESOURCES_DIRECTORY
/private/var/mobile/
work_queue
primary_hg_id
max_jaccard_similarity
hg_id
jaccard_similarity
sub_hg_ids
v40@?0{_NSRange=QQ}8Q24^B32
q24@?0@"VNRecognizedTextBlockObservation"8@"VNRecognizedTextBlockObservation"16
q24@?0@"HKGenericMedicationSearchResult"8@"HKGenericMedicationSearchResult"16
HKMedicationsNgramGenerator.m
invalid inputs: %ld < %ld
(null)
HKMedicationsSearchResult.m
ingredientId cannot be nil
ingredientId
ingredientName
strengthQuantity
strengthUnit
genericMedicationId cannot be nil
genericMedicationId
genericMedicationName
brandName
ingredients
productId cannot be nil
productId
packagingNDC
productGenericName
productBrandName
packagingName
route
doseForm
[%@] failed to open in-memory db
[%@] failed to attach asset db: %@
[%@] failed to create ngram_list
[%@] failed to create ngram tables: %@
[%@] failed to reset assets: %@
[%@] failed to drop assets: %@
[%@] failed to insert into ngram_list_line: %@
[%@] failed to insert into ngram_list_frame: %@
[%@] failed to delete from ngram_list_line: %@
[%@] failed to insert or replace into ngram_list: %@
[%@] failed to delete from ngram_list_frame: %@
[%@] failed to find specific id for clinical id (%ld): %@
%{public}@ Error searching generic medication: %{public}@
%{public}@ Error expanding generic medication: %@{public}@
HKMedicationsDemoSearchAssetInterface
HKMedicationsAssetInterface
HKMedicationsIntegerPair
HKMedicationsNumberToNumberPairListMap
HKMedicationsNumberToStringMap
HKMedicationsTextExtractor
HKMedicationsResolverResult
HKMedicationsBarcodeNDCParser
MedicationVision
HKMedicationsTextNDCParser
HKMedicationsMercuryIdGroup
HKMedicationsMapResult
HKMedicationsResolver
HKMedicationsMercuryId
HKMedicationsScoredMercuryId
HKMedicationsResolutionEngine
HKMedicationsNumberToNumberMap
HKMedicationsTokenizer
HKMedicationsTokenConceptResolver
HKMedicationsNgramGenerator
HKMedicationsImageFeatureExtractor
HKMedicationsBarcodeExtractor
HKIngredientSearchResult
HKGenericMedicationSearchResult
HKFullMedicationSearchResult
HKMedicationsNgramCounts
init
setAssetPath:
setQueue:
fileSystemRepresentation
queue
UTF8String
stringWithUTF8String:
initWithProductId:packagingName:packagingNDC:productBrandName:productGenericName:route:doseForm:
initWithUTF8String:
hk_assignError:code:description:
countByEnumeratingWithState:objects:count:
stringWithFormat:
initWithGenericMedicationId:genericMedicationName:brandName:ingredients:
addObject:
allObjects
genericMedicationId
ingredients
count
initWithIngredientId:ingredientName:strengthQuantity:strengthUnit:
copyByReplacingWithIngredients:
medicationFromNDCCode:error:
genericMedicationsFromTokens:error:
expandedGenericMedicationSearchResult:error:
initWithAssetPath:
openAsset
close
assetPath
.cxx_destruct
_interruptionLock
_assetPath
_queue
T@"NSString",&,N,V_assetPath
T@"NSObject<OS_dispatch_queue>",&,N,V_queue
first
setFirst:
second
setSecond:
_first
_second
Tq,N,V_first
Tq,N,V_second
numberWithInteger:
objectForKeyedSubscript:
setObject:forKeyedSubscript:
addInteger:andInteger:forKey:
enumerateIntegersForKey:block:
_storage
stringForKey:
setString:forKey:
setMaximumCandidateCount:
setUsesLanguageCorrection:
setRecognitionLanguages:
arrayWithObjects:count:
performRequests:error:
results
extractedDocumentsFromRequestHandler:error:
looksGeneric
description
resolvedIds
usedNgrams
stringByAppendingFormat:
setLooksGeneric:
setResolvedIds:
ngramList
setNgramList:
numberOfNewNgrams
setNumberOfNewNgrams:
numberOfUsedNgrams
setNumberOfUsedNgrams:
setUsedNgrams:
_looksGeneric
_resolvedIds
_ngramList
_numberOfNewNgrams
_numberOfUsedNgrams
_usedNgrams
TB,N,V_looksGeneric
T@"NSArray",C,N,V_resolvedIds
T@"NSArray",C,N,V_ngramList
Tq,N,V_numberOfNewNgrams
Tq,N,V_numberOfUsedNgrams
T@"NSArray",C,N,V_usedNgrams
symbology
isObservationSupported:
_parsedNDCFromEAN13:
parsedNDCFromDataMatrix:
_parsedGTIN14FromEAN13:
_parsedGTIN14FromDataMatrix:
_barcodeObservationsFrom:error:
parsedNDCCodeFromBarcodeObservation:
length
parsedGTIN14CodeFromBarcodeObservation:
initWithCMSampleBuffer:options:
extractedBarcodesFromRequestHandler:error:
payloadStringValue
_parsedGTIN14FromEAN13Payload:
hasPrefix:
stringByAppendingString:
_convertNDCFromGTIN14Code:
_parsedGTIN14FromDataMatrixPayload:
initWithString:
scanString:intoString:
isEqual:
scanLocation
substringWithRange:
containsString:
_isGTIN14CodeValid:
substringFromIndex:
integerValue
substringToIndex:
parsedNDCCodesFromCMSampleBuffer:error:
parsedGTIN14CodesFromCMSampleBuffer:error:
hkt_parsedNDCFromDataMatrixPayload:
hkt_parsedNDCFromEAN13Payload:
hkt_parsedGTIN14FromDataMatrixPayload:
hkt_parsedGTIN14FromEAN13Payload:
hkt_convertGTIN14ToNDCCode:
lowercaseString
currentLocale
stringByFoldingWithOptions:locale:
characterSetWithCharactersInString:
invertedSet
componentsSeparatedByCharactersInSet:
componentsJoinedByString:
normalizeForType:
initWithPattern:options:error:
NDC11RegularExpression
range
enumerateMatchesInString:options:range:usingBlock:
stringByReplacingOccurrencesOfString:withString:
NDC10RegularExpressions
objectAtIndexedSubscript:
mutableCopy
insertString:atIndex:
parsedNDCCodeFromString:
setNDC10RegularExpressions:
setNDC11RegularExpression:
_NDC10RegularExpressions
_NDC11RegularExpression
T@"NSArray",&,N,V_NDC10RegularExpressions
T@"NSRegularExpression",&,N,V_NDC11RegularExpression
ingredientMatched
primaryHgId
maxJaccardSimilarity
setPrimaryHgId:
setMaxJaccardSimilarity:
subHgIds
setSubHgIds:
setIngredientMatched:
_ingredientMatched
_maxJaccardSimilarity
_primaryHgId
_subHgIds
Tq,N,V_primaryHgId
Tf,N,V_maxJaccardSimilarity
T@"NSArray",C,N,V_subHgIds
TB,N,V_ingredientMatched
ngramCount
setNgramCount:
commonDict
setCommonDict:
uniqueDict
setUniqueDict:
commonSetSizeDict
setCommonSetSizeDict:
uniqueSetSizeDict
setUniqueSetSizeDict:
distinctHgIds
setDistinctHgIds:
_ngramCount
_commonDict
_uniqueDict
_commonSetSizeDict
_uniqueSetSizeDict
_distinctHgIds
Tq,N,V_ngramCount
T@"HKMedicationsNumberToNumberMap",&,N,V_commonDict
T@"HKMedicationsNumberToNumberPairListMap",&,N,V_uniqueDict
T@"HKMedicationsNumberToNumberMap",&,N,V_commonSetSizeDict
T@"HKMedicationsNumberToNumberMap",&,N,V_uniqueSetSizeDict
T@"NSSet",&,N,V_distinctHgIds
initMemoryDatabase
openWithError:
dealloc
path
executeSQL:error:bindingHandler:enumerationHandler:
executeSQLStatements:error:
resetInMemoryDBWithError:
setInteger:forKey:
setSeen:
setUsed:
setWithObject:
countOfContinousDigitsInLine:
componentsSeparatedByString:
processNgramLine:n:
setWithArray:
seen
used
integerForKey:
setHgId:
setJaccardSimilarity:
setTradeNameMatched:
jaccardSimilarity
hgId
compare:
sortUsingComparator:
subarrayWithRange:
addObjectsFromArray:
insertObject:atIndex:
enumerateObjectsUsingBlock:
containsObject:
whitespaceCharacterSet
stringByTrimmingCharactersInSet:
dictionaryWithObjects:forKeys:count:
allKeys
firstObject
consecutiveLCSUsingTranscript:prediction:
characterAtIndex:
tokensFrom:minimumLength:maximumLength:
initWithAssetUrl:
resetResolverWithError:
resolveText:error:
filterAndAddGenerics:transcripts:criterion:limit:error:
hkt_ngramsFrom:minLength:maxLength:
hkt_prepareNgramAssetWithError:
hkt_createNgramMapsWithError:
hkt_ngramIdCountWithError:
hkt_ngramsWithError:
hkt_looksLikeGenericInText:
hkt_setUpDatabase
_assetUrl
_dbReady
_ingredients
_tradenames
_abbreviations
tradeNameMatched
_tradeNameMatched
_jaccardSimilarity
_hgId
Tq,N,V_hgId
Tf,N,V_jaccardSimilarity
TB,N,V_tradeNameMatched
setMercuryId:
setScore:
hash
mercuryId
score
initWithMercuryId:score:
_mercuryId
_score
T@"NSNumber",&,N,V_mercuryId
T@"NSNumber",&,N,V_score
defaultManager
fileExistsAtPath:
processInfo
environment
stringByAppendingPathComponent:
fileURLWithPath:
setResolver:
resolver
numberWithFloat:
isVisionAssetAvailable
resetResolverWithCompletionHandler:
resolveMedicationsUsing:resultLimit:completionHandler:
hkctl_resolveMedicationsUsing:resultLimit:error:
filter:transcripts:criterion:limit:completionHandler:
_resolver
T@"HKMedicationsResolver",&,N,V_resolver
initWithUnit:
setTokenizer:
tokenizer
setString:
enumerateTokensInRange:usingBlock:
wordsFromTranscript:
_lock
_tokenizer
T@"NLTokenizer",&,N,V_tokenizer
arrayWithCapacity:
closestTextBlockOfTypes:toPoint:maximumPixelDistance:
boundingBox
sortedArrayUsingComparator:
setAssetInterface:
getTranscript
recognizedMedicationsFromTranscript:
_collectAllMedicationCandidatesUsingTokens:
_expandedMedicationsFromCandidates:
removeMedicationsFromNoisyTokensUsingTokens:candidates:
removeStowawayIngredientsUsingTokens:candidates:
rankMedicationsUsingTokens:candidates:
array
assetInterface
initWithArray:
ingredientName
intersectSet:
_tokenMatchScoreForMedication:usingTokens:
genericMedicationName
caseInsensitiveCompare:
unionSet:
initWithAssetInterface:
recognizedMedicationsFromTextBlock:
_assetInterface
T@"<HKMedicationsAssetInterface>",&,N,V_assetInterface
T@"HKMedicationsTokenizer",&,N,V_tokenizer
currentHandler
handleFailureInMethod:object:file:lineNumber:description:
setNdcParser:
initWithCIImage:options:
setSymbologies:
ndcParser
extractFeaturesFrom:completionHandler:
_ndcParser
T@"HKMedicationsTextNDCParser",&,N,V_ndcParser
allValues
ingredientId
strengthQuantity
strengthUnit
dictionaryRepresentation
_ingredientId
_ingredientName
_strengthQuantity
_strengthUnit
T@"NSString",R,C,N,V_ingredientId
T@"NSString",R,C,N,V_ingredientName
T@"NSString",R,C,N,V_strengthQuantity
T@"NSString",R,C,N,V_strengthUnit
isEqualToString:
brandName
_genericMedicationId
_genericMedicationName
_brandName
T@"NSString",R,C,N,V_genericMedicationId
T@"NSString",R,C,N,V_genericMedicationName
T@"NSString",R,C,N,V_brandName
T@"NSArray",R,C,N,V_ingredients
productId
packagingNDC
productGenericName
productBrandName
packagingName
route
doseForm
_productId
_packagingName
_packagingNDC
_productBrandName
_productGenericName
_route
_doseForm
T@"NSString",R,C,N,V_productId
T@"NSString",R,C,N,V_packagingName
T@"NSString",R,C,N,V_packagingNDC
T@"NSString",R,C,N,V_productBrandName
T@"NSString",R,C,N,V_productGenericName
T@"NSString",R,C,N,V_route
T@"NSString",R,C,N,V_doseForm
_seen
_used
Tq,N,V_seen
Tq,N,V_used
@32@0:8@16^@24
@"HKFullMedicationSearchResult"32@0:8@"NSString"16^@24
@"NSArray"32@0:8@"NSArray"16^@24
@"HKGenericMedicationSearchResult"32@0:8@"HKGenericMedicationSearchResult"16^@24
@24@0:8@16
i16@0:8
v16@0:8
@16@0:8
v24@0:8@16
^{sqlite3=}
{os_unfair_lock_s="_os_unfair_lock_opaque"I}
@"NSString"
@"NSObject<OS_dispatch_queue>"
q16@0:8
v24@0:8q16
v40@0:8q16q24q32
v32@0:8q16@?24
@"NSMutableDictionary"
@24@0:8q16
v32@0:8@16q24
B16@0:8
v20@0:8B16
@"NSArray"
B24@0:8@16
@32@0:8^{opaqueCMSampleBuffer=}16^@24
@"NSRegularExpression"
f16@0:8
v20@0:8f16
@"HKMedicationsNumberToNumberMap"
@"HKMedicationsNumberToNumberPairListMap"
@"NSSet"
B24@0:8N^@16
@32@0:8@16N^@24
@52@0:8@16@24f32q36N^@44
q32@0:8@16@24
q24@0:8@16
@40@0:8@16q24q32
@24@0:8N^@16
q24@0:8N^@16
@"HDSQLiteDatabase"
@"NSURL"
@"HKMedicationsNumberToStringMap"
@"NSDictionary"
@32@0:8@16@24
Q16@0:8
@"NSNumber"
v24@0:8@?16
v40@0:8@16q24@?32
@40@0:8@16q24N^@32
v52@0:8@16@24f32q36@?44
@"HKMedicationsResolver"
q24@0:8q16
v32@0:8q16q24
@"NLTokenizer"
d32@0:8@16@24
@"<HKMedicationsAssetInterface>"
@"HKMedicationsTokenizer"
v32@0:8@16@?24
@"HKMedicationsTextNDCParser"
@48@0:8@16@24@32@40
@72@0:8@16@24@32@40@48@56@64
@(#)PROGRAM:HealthMedicationsVision  PROJECT:Medications-1
333333
?33s?fff?
HKMedicationsDemoSearchAssetInterface
SELECT pr.product_id, pr.generic_name, pr.brand_name, pa.package_ndc, pa.description         FROM packaging AS pa         JOIN product_packaging AS pp ON pa.package_id=pp.packaging_id         JOIN product AS pr ON pp.product_id=pr.product_id         WHERE pa.package_ndc_11=? OR pa.package_ndc_10=?
v8@?0
No medication matching NDC was found
SELECT DISTINCT gm.generic_medication_id, gm.name             FROM token AS tk             LEFT JOIN ingredient_token AS ing_tk ON tk.token_id=ing_tk.token_id             LEFT JOIN ingredient_strength AS ingstr ON ingstr.component_id=ing_tk.ingredient_id             LEFT JOIN ingredient AS ing ON ingstr.ingredient_id=ing.ingredient_id             LEFT JOIN generic_medication_ingredient AS gmi ON gmi.ingredient_id=ing.ingredient_id             LEFT JOIN generic_medication AS gm ON gm.generic_medication_id=gmi.generic_medication_id             WHERE tk.token LIKE ? AND gm.generic_medication_id IS NOT NULL
SELECT ing.ingredient_id, ing.name         FROM generic_medication AS gm         LEFT JOIN generic_medication_ingredient AS gmi ON gm.generic_medication_id=gmi.generic_medication_id         LEFT JOIN ingredient AS ing ON gmi.ingredient_id=ing.ingredient_id         WHERE gm.generic_medication_id=?
Generic
Not Generic
 %@ %@ %@
abcdefghijklmnopqrstuvwxyz0123456789%
abcdefghijklmnopqrstuvwxyz0123456789 
abcdefghijklmnopqrstuvwxyz0123456789
\b([0-9]{4})[\ -]([0-9]{4})[\ -]([0-9]{2})\b
\b([0-9]{5})[\ -]([0-9]{3})[\ -]([0-9]{2})\b
\b([0-9]{5})[\ -]([0-9]{4})[\ -]([0-9]{1})\b
\b([0-9]{5})[\ -]([0-9]{4})[\ -]([0-9]{2})\b
v32@?0@"NSTextCheckingResult"8Q16^B24
ingredient matched
no match
 %d %f %@
ATTACH DATABASE ? AS pbs_assets;
v16@?0^{sqlite3_stmt=}8
CREATE TABLE ngram_list (ngram TEXT PRIMARY KEY) WITHOUT ROWID;
CREATE TABLE ngram_list_line (ngram TEXT PRIMARY KEY) WITHOUT ROWID;
CREATE TABLE ngram_list_frame (ngram TEXT PRIMARY KEY) WITHOUT ROWID;
CREATE TABLE ngram_id_list(ngram_id INTEGER, ngram_weight FLOAT);
CREATE TABLE common_map(hg_id INTEGER, ngram_count INTEGER);
CREATE TABLE unique_map(hg_id INTEGER, specific_id INTEGER, ngram_count INTEGER);
DELETE FROM ngram_list_line
DELETE FROM ngram_list_frame
DELETE FROM ngram_list
DELETE FROM ngram_id_list;
DELETE FROM common_map;
DELETE FROM unique_map;
INSERT INTO ngram_id_list SELECT ngram_id, ngram_weight FROM pbs_assets.ngram_map WHERE ngram IN ngram_list;
INSERT INTO common_map SELECT hg_id, SUM(ngram_weight) FROM pbs_assets.common_ngram_map JOIN ngram_id_list ON ngram_id_list.ngram_id = pbs_assets.common_ngram_map.ngram_id GROUP BY hg_id;
INSERT INTO unique_map SELECT hg_id, specific_id, SUM(ngram_weight) FROM pbs_assets.unique_ngram_map JOIN ngram_id_list ON ngram_id_list.ngram_id = pbs_assets.unique_ngram_map.ngram_id GROUP BY hg_id, specific_id;
SELECT SUM(ngram_weight) FROM ngram_id_list
B24@?0^{HDSQLiteRow=}8^@16
SELECT hg_id, ngram_count FROM common_map
SELECT hg_id, specific_id, ngram_count FROM unique_map
SELECT hg_id, ngram_count FROM pbs_assets.common_ngram_count WHERE hg_id IN (SELECT hg_id FROM common_map)
SELECT specific_id, ngram_count FROM pbs_assets.unique_ngram_count WHERE specific_id IN (SELECT specific_id FROM unique_map)
SELECT hg_id FROM (SELECT hg_id FROM common_map UNION SELECT hg_id FROM unique_map)
SELECT COUNT(*) FROM ngram_list;
SELECT COUNT(*) FROM ngram_id_list;
SELECT COUNT(*), COUNT(ngram_id), SUM(ngram_weight), SUM(is_unit), SUM(is_number), MAX(ngram_prob) FROM ngram_list_line LEFT JOIN pbs_assets.ngram_map ON ngram_list_line.ngram = pbs_assets.ngram_map.ngram;
compare to
INSERT INTO ngram_list_line (ngram) VALUES (?);
INSERT OR REPLACE INTO ngram_list_frame SELECT ngram FROM ngram_list_line;
DELETE FROM ngram_list_line;
INSERT OR REPLACE INTO ngram_list SELECT ngram from ngram_list_frame;
DELETE FROM ngram_list_frame;
compared to
generic for
SELECT specific_id FROM generic_map where clinical_id = ? LIMIT 1;
v24@?0q8q16
q24@?0@"HKMedicationsMercuryId"8@"HKMedicationsMercuryId"16
q24@?0@"HKMedicationsMercuryIdGroup"8@"HKMedicationsMercuryIdGroup"16
v32@?0@"HKMedicationsMercuryIdGroup"8Q16^B24
SELECT word, abbreviation FROM abbreviations
SELECT hg_id, ingredient FROM ingredients
SELECT specific_id, trade_name FROM trade_names
SELECT COUNT(*) FROM ngram_id_list
SELECT * from ngram_list
Library/Health/vision
pbs_assets.db
Mercury ID: %@ - Score: %@
SIMULATOR_SHARED_RESOURCES_DIRECTORY
/private/var/mobile/
work_queue
primary_hg_id
max_jaccard_similarity
hg_id
jaccard_similarity
sub_hg_ids
v40@?0{_NSRange=QQ}8Q24^B32
q24@?0@"VNRecognizedTextBlockObservation"8@"VNRecognizedTextBlockObservation"16
q24@?0@"HKGenericMedicationSearchResult"8@"HKGenericMedicationSearchResult"16
HKMedicationsNgramGenerator.m
invalid inputs: %ld < %ld
(null)
HKMedicationsSearchResult.m
ingredientId cannot be nil
ingredientId
ingredientName
strengthQuantity
strengthUnit
genericMedicationId cannot be nil
genericMedicationId
genericMedicationName
brandName
ingredients
productId cannot be nil
productId
packagingNDC
productGenericName
productBrandName
packagingName
route
doseForm
[%@] failed to open in-memory db
[%@] failed to attach asset db: %@
[%@] failed to create ngram_list
[%@] failed to create ngram tables: %@
[%@] failed to reset assets: %@
[%@] failed to drop assets: %@
[%@] failed to insert into ngram_list_line: %@
[%@] failed to insert into ngram_list_frame: %@
[%@] failed to delete from ngram_list_line: %@
[%@] failed to insert or replace into ngram_list: %@
[%@] failed to delete from ngram_list_frame: %@
[%@] failed to find specific id for clinical id (%ld): %@
%{public}@ Error searching generic medication: %{public}@
%{public}@ Error expanding generic medication: %@{public}@
HKMedicationsDemoSearchAssetInterface
HKMedicationsAssetInterface
HKMedicationsIntegerPair
HKMedicationsNumberToNumberPairListMap
HKMedicationsNumberToStringMap
HKMedicationsTextExtractor
HKMedicationsResolverResult
HKMedicationsBarcodeNDCParser
MedicationVision
HKMedicationsTextNDCParser
HKMedicationsMercuryIdGroup
HKMedicationsMapResult
HKMedicationsResolver
HKMedicationsMercuryId
HKMedicationsScoredMercuryId
HKMedicationsResolutionEngine
HKMedicationsNumberToNumberMap
HKMedicationsTokenizer
HKMedicationsTokenConceptResolver
HKMedicationsNgramGenerator
HKMedicationsImageFeatureExtractor
HKMedicationsBarcodeExtractor
HKIngredientSearchResult
HKGenericMedicationSearchResult
HKFullMedicationSearchResult
HKMedicationsNgramCounts
sortedArrayUsingComparator:
environment
setSymbologies:
currentHandler
firstObject
compare:
setMaximumCandidateCount:
stringWithFormat:
enumerateTokensInRange:usingBlock:
sortUsingComparator:
initWithPattern:options:error:
unionSet:
invertedSet
setObject:forKeyedSubscript:
arrayWithObjects:count:
enumerateObjectsUsingBlock:
intersectSet:
setWithObject:
arrayWithCapacity:
mutableCopy
hk_assignError:code:description:
countByEnumeratingWithState:objects:count:
stringByTrimmingCharactersInSet:
setWithArray:
setString:
UTF8String
enumerateMatchesInString:options:range:usingBlock:
array
closestTextBlockOfTypes:toPoint:maximumPixelDistance:
fileURLWithPath:
processInfo
stringByReplacingOccurrencesOfString:withString:
integerValue
openWithError:
allValues
initWithCMSampleBuffer:options:
setUsesLanguageCorrection:
symbology
stringByFoldingWithOptions:locale:
fileSystemRepresentation
initWithCIImage:options:
lowercaseString
objectForKeyedSubscript:
substringWithRange:
containsString:
insertString:atIndex:
hasPrefix:
characterSetWithCharactersInString:
stringByAppendingString:
performRequests:error:
allObjects
fileExistsAtPath:
handleFailureInMethod:object:file:lineNumber:description:
objectAtIndexedSubscript:
scanString:intoString:
containsObject:
substringToIndex:
stringByAppendingPathComponent:
insertObject:atIndex:
allKeys
payloadStringValue
initWithArray:
whitespaceCharacterSet
dictionaryWithObjects:forKeys:count:
getTranscript
scanLocation
numberWithInteger:
characterAtIndex:
substringFromIndex:
length
initWithUnit:
addObjectsFromArray:
path
stringByAppendingFormat:
numberWithFloat:
caseInsensitiveCompare:
initMemoryDatabase
subarrayWithRange:
componentsSeparatedByString:
range
addObject:
initWithUTF8String:
executeSQLStatements:error:
defaultManager
results
componentsSeparatedByCharactersInSet:
setRecognitionLanguages:
executeSQL:error:bindingHandler:enumerationHandler:
initWithString:
isEqualToString:
currentLocale
boundingBox
componentsJoinedByString:
stringWithUTF8String:
init
medicationFromNDCCode:error:
genericMedicationsFromTokens:error:
expandedGenericMedicationSearchResult:error:
initWithAssetPath:
openAsset
close
assetPath
setAssetPath:
queue
setQueue:
.cxx_destruct
_interruptionLock
_assetPath
_queue
T@"NSString",&,N,V_assetPath
T@"NSObject<OS_dispatch_queue>",&,N,V_queue
first
setFirst:
second
setSecond:
_first
_second
Tq,N,V_first
Tq,N,V_second
addInteger:andInteger:forKey:
enumerateIntegersForKey:block:
_storage
stringForKey:
setString:forKey:
count
extractedDocumentsFromRequestHandler:error:
description
looksGeneric
setLooksGeneric:
resolvedIds
setResolvedIds:
ngramList
setNgramList:
numberOfNewNgrams
setNumberOfNewNgrams:
numberOfUsedNgrams
setNumberOfUsedNgrams:
usedNgrams
setUsedNgrams:
_looksGeneric
_resolvedIds
_ngramList
_numberOfNewNgrams
_numberOfUsedNgrams
_usedNgrams
TB,N,V_looksGeneric
T@"NSArray",C,N,V_resolvedIds
T@"NSArray",C,N,V_ngramList
Tq,N,V_numberOfNewNgrams
Tq,N,V_numberOfUsedNgrams
T@"NSArray",C,N,V_usedNgrams
isObservationSupported:
parsedNDCCodeFromBarcodeObservation:
parsedGTIN14CodeFromBarcodeObservation:
parsedNDCCodesFromCMSampleBuffer:error:
parsedGTIN14CodesFromCMSampleBuffer:error:
_barcodeObservationsFrom:error:
_parsedGTIN14FromEAN13:
_parsedGTIN14FromEAN13Payload:
_parsedNDCFromEAN13:
_parsedGTIN14FromDataMatrix:
parsedNDCFromDataMatrix:
_parsedGTIN14FromDataMatrixPayload:
_isGTIN14CodeValid:
_convertNDCFromGTIN14Code:
hkt_parsedNDCFromDataMatrixPayload:
hkt_parsedNDCFromEAN13Payload:
hkt_parsedGTIN14FromDataMatrixPayload:
hkt_parsedGTIN14FromEAN13Payload:
hkt_convertGTIN14ToNDCCode:
normalizeForType:
parsedNDCCodeFromString:
NDC10RegularExpressions
setNDC10RegularExpressions:
NDC11RegularExpression
setNDC11RegularExpression:
_NDC10RegularExpressions
_NDC11RegularExpression
T@"NSArray",&,N,V_NDC10RegularExpressions
T@"NSRegularExpression",&,N,V_NDC11RegularExpression
primaryHgId
setPrimaryHgId:
maxJaccardSimilarity
setMaxJaccardSimilarity:
subHgIds
setSubHgIds:
ingredientMatched
setIngredientMatched:
_ingredientMatched
_maxJaccardSimilarity
_primaryHgId
_subHgIds
Tq,N,V_primaryHgId
Tf,N,V_maxJaccardSimilarity
T@"NSArray",C,N,V_subHgIds
TB,N,V_ingredientMatched
ngramCount
setNgramCount:
commonDict
setCommonDict:
uniqueDict
setUniqueDict:
commonSetSizeDict
setCommonSetSizeDict:
uniqueSetSizeDict
setUniqueSetSizeDict:
distinctHgIds
setDistinctHgIds:
_ngramCount
_commonDict
_uniqueDict
_commonSetSizeDict
_uniqueSetSizeDict
_distinctHgIds
Tq,N,V_ngramCount
T@"HKMedicationsNumberToNumberMap",&,N,V_commonDict
T@"HKMedicationsNumberToNumberPairListMap",&,N,V_uniqueDict
T@"HKMedicationsNumberToNumberMap",&,N,V_commonSetSizeDict
T@"HKMedicationsNumberToNumberMap",&,N,V_uniqueSetSizeDict
T@"NSSet",&,N,V_distinctHgIds
dealloc
initWithAssetUrl:
resetResolverWithError:
resetInMemoryDBWithError:
processNgramLine:n:
resolveText:error:
filterAndAddGenerics:transcripts:criterion:limit:error:
consecutiveLCSUsingTranscript:prediction:
countOfContinousDigitsInLine:
hkt_ngramsFrom:minLength:maxLength:
hkt_prepareNgramAssetWithError:
hkt_createNgramMapsWithError:
hkt_ngramIdCountWithError:
hkt_ngramsWithError:
hkt_looksLikeGenericInText:
hkt_setUpDatabase
_assetUrl
_dbReady
_ingredients
_tradenames
_abbreviations
hgId
setHgId:
jaccardSimilarity
setJaccardSimilarity:
tradeNameMatched
setTradeNameMatched:
_tradeNameMatched
_jaccardSimilarity
_hgId
Tq,N,V_hgId
Tf,N,V_jaccardSimilarity
TB,N,V_tradeNameMatched
initWithMercuryId:score:
hash
isEqual:
mercuryId
setMercuryId:
score
setScore:
_mercuryId
_score
T@"NSNumber",&,N,V_mercuryId
T@"NSNumber",&,N,V_score
isVisionAssetAvailable
resetResolverWithCompletionHandler:
resolveMedicationsUsing:resultLimit:completionHandler:
hkctl_resolveMedicationsUsing:resultLimit:error:
filter:transcripts:criterion:limit:completionHandler:
resolver
setResolver:
_resolver
T@"HKMedicationsResolver",&,N,V_resolver
integerForKey:
setInteger:forKey:
wordsFromTranscript:
tokenizer
setTokenizer:
_lock
_tokenizer
T@"NLTokenizer",&,N,V_tokenizer
initWithAssetInterface:
recognizedMedicationsFromTextBlock:
recognizedMedicationsFromTranscript:
_collectAllMedicationCandidatesUsingTokens:
_expandedMedicationsFromCandidates:
removeMedicationsFromNoisyTokensUsingTokens:candidates:
removeStowawayIngredientsUsingTokens:candidates:
rankMedicationsUsingTokens:candidates:
_tokenMatchScoreForMedication:usingTokens:
assetInterface
setAssetInterface:
_assetInterface
T@"<HKMedicationsAssetInterface>",&,N,V_assetInterface
T@"HKMedicationsTokenizer",&,N,V_tokenizer
tokensFrom:minimumLength:maximumLength:
extractFeaturesFrom:completionHandler:
ndcParser
setNdcParser:
_ndcParser
T@"HKMedicationsTextNDCParser",&,N,V_ndcParser
extractedBarcodesFromRequestHandler:error:
initWithIngredientId:ingredientName:strengthQuantity:strengthUnit:
dictionaryRepresentation
ingredientId
ingredientName
strengthQuantity
strengthUnit
_ingredientId
_ingredientName
_strengthQuantity
_strengthUnit
T@"NSString",R,C,N,V_ingredientId
T@"NSString",R,C,N,V_ingredientName
T@"NSString",R,C,N,V_strengthQuantity
T@"NSString",R,C,N,V_strengthUnit
initWithGenericMedicationId:genericMedicationName:brandName:ingredients:
copyByReplacingWithIngredients:
genericMedicationId
genericMedicationName
brandName
ingredients
_genericMedicationId
_genericMedicationName
_brandName
T@"NSString",R,C,N,V_genericMedicationId
T@"NSString",R,C,N,V_genericMedicationName
T@"NSString",R,C,N,V_brandName
T@"NSArray",R,C,N,V_ingredients
initWithProductId:packagingName:packagingNDC:productBrandName:productGenericName:route:doseForm:
productId
packagingName
packagingNDC
productBrandName
productGenericName
route
doseForm
_productId
_packagingName
_packagingNDC
_productBrandName
_productGenericName
_route
_doseForm
T@"NSString",R,C,N,V_productId
T@"NSString",R,C,N,V_packagingName
T@"NSString",R,C,N,V_packagingNDC
T@"NSString",R,C,N,V_productBrandName
T@"NSString",R,C,N,V_productGenericName
T@"NSString",R,C,N,V_route
T@"NSString",R,C,N,V_doseForm
seen
setSeen:
used
setUsed:
_seen
_used
Tq,N,V_seen
Tq,N,V_used
@32@0:8@16^@24
@"HKFullMedicationSearchResult"32@0:8@"NSString"16^@24
@"NSArray"32@0:8@"NSArray"16^@24
@"HKGenericMedicationSearchResult"32@0:8@"HKGenericMedicationSearchResult"16^@24
@24@0:8@16
i16@0:8
v16@0:8
@16@0:8
v24@0:8@16
^{sqlite3=}
{os_unfair_lock_s="_os_unfair_lock_opaque"I}
@"NSString"
@"NSObject<OS_dispatch_queue>"
q16@0:8
v24@0:8q16
v40@0:8q16q24q32
v32@0:8q16@?24
@"NSMutableDictionary"
@24@0:8q16
v32@0:8@16q24
B16@0:8
v20@0:8B16
@"NSArray"
B24@0:8@16
@32@0:8^{opaqueCMSampleBuffer=}16^@24
@"NSRegularExpression"
f16@0:8
v20@0:8f16
@"HKMedicationsNumberToNumberMap"
@"HKMedicationsNumberToNumberPairListMap"
@"NSSet"
B24@0:8N^@16
@32@0:8@16N^@24
@52@0:8@16@24f32q36N^@44
q32@0:8@16@24
q24@0:8@16
@40@0:8@16q24q32
@24@0:8N^@16
q24@0:8N^@16
@"HDSQLiteDatabase"
@"NSURL"
@"HKMedicationsNumberToStringMap"
@"NSDictionary"
@32@0:8@16@24
Q16@0:8
@"NSNumber"
v24@0:8@?16
v40@0:8@16q24@?32
@40@0:8@16q24N^@32
v52@0:8@16@24f32q36@?44
@"HKMedicationsResolver"
q24@0:8q16
v32@0:8q16q24
@"NLTokenizer"
d32@0:8@16@24
@"<HKMedicationsAssetInterface>"
@"HKMedicationsTokenizer"
v32@0:8@16@?24
@"HKMedicationsTextNDCParser"
@48@0:8@16@24@32@40
@72@0:8@16@24@32@40@48@56@64
