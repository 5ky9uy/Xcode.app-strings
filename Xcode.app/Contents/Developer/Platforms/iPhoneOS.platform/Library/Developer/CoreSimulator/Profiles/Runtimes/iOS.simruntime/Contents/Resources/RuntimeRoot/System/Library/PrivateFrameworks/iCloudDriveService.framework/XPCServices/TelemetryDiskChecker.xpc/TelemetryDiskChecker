@(#)PROGRAM:TelemetryDiskChecker  PROJECT:CloudDocs-1
isWritable
isExecutable
setType:
setPath:
setMtime:
setIsWritable:
setIsExecutable:
setSymlinkContent:
mode
fileAtPath:mtime:mode:
directoryAtPath:
symlinkAtPath:content:
Tc,R,N
init
_processSharingInfoAtURL:isDocument:isSharedToMeTopLevelItem:shareAliasIsMissing:
_countOfShareAliasesNotOnDisk
longLongValue
path
fp_obfuscatedPath
_filesystemIdentifierFromURL:isDocument:
fetch:
next
objectOfClass:atIndex:
numberAtIndex:
enumerateObjectsOfClass:
countByEnumeratingWithState:objects:count:
parseUnsaltedBookmarkDataWithItemID:mangledID:error:
ownerName
appLibraryOrZoneName
numberWithSQL:
boolValue
numberWithInt:
fileSystemRepresentation
numberWithUnsignedInt:
numberWithUnsignedLongLong:
formatInjection:
_lookupInjectionFromFileURL:isDocument:
stringAtIndex:
initWithZoneName:ownerName:
close
itemIDString
unsaltedBookmarkDataWithItemResolutionString:serverZoneMangledID:
lastError
intAtIndex:
isEqualToString:
_isMissingShareAliasAtFileURL:isDocument:
_addDocument:
isSharedToMeTopLevelItem
shareAliasMissing
recursiveShareAliasCount
recursiveSharedByMeCount
recursiveItemCount
childCount
intValue
debugItemIDString
newChildCountMismatchEventWithZoneMangledID:itemIDString:magnitude:
addObject:
recursiveChildCount
newRecursiveItemCountMismatchEventWithZoneMangledID:itemIDString:magnitude:
sharedByMeRecursiveCount
newShareCountMismatchEventWithZoneMangledID:itemIDString:magnitude:
sharedAliasRecursiveCount
newShareAliasCountMismatchEventWithZoneMangledID:itemIDString:magnitude:
initWithURL:parentIsShared:db:
addFlatFile:
addPackage:
addSymlink:
addSubdirectory:
generateTelemetryErrorEventsWithMetrics:itemID:zoneMangledID:
isShared
directChildCount
childHasProblem
setChildHasProblem:
telemetryWarningEvents
.cxx_destruct
_telemetryWarningEvents
_isShared
_isSharedToMeTopLevelItem
_shareAliasMissing
_childHasProblem
_directChildCount
_recursiveItemCount
_recursiveSharedByMeCount
_recursiveShareAliasCount
_url
T@"NSURL",R,N,V_url
TB,R,N,V_isShared
TB,R,N,V_isSharedToMeTopLevelItem
TB,R,N,V_shareAliasMissing
Ti,R,N,V_directChildCount
Ti,R,N,V_recursiveItemCount
Ti,R,N,V_recursiveSharedByMeCount
Ti,R,N,V_recursiveShareAliasCount
TB,N,V_childHasProblem
T@"NSArray",R,N,V_telemetryWarningEvents
initWithLabel:dbCorruptionHandler:
_setErrorHandlerWithDBCorruptionHandler:
_setLockedHandler
setLabel:
defaultsForMangledID:
dbTraced
setTraced:
setCrashIfUsedAfterClose:
code
stringWithFormat:
UTF8String
setSqliteErrorHandler:
currentOperationDuration
appendFormat:
setLockedHandler:
openAtURL:withFlags:error:
setupPragmas
brc_close
profilingHook
changes
stringWithUTF8String:
stringByAppendingString:
setProfilingHook:
initWithFormat:
executeRaw:
isInTransaction
flush
forceBatchStart
assertOnQueue
length
fetch:args:
fetchObjectOfClass:sql:args:
fetchObject:sql:args:
execute:args:
sqliteErrorHandler
serialQueue
_shouldFlushWithChangeCount:
useBatchingOnTargetQueue:withPolicyHandler:
close:
brc_closeWithError:
integerValue
dbAutovacuumRatio
dbAutovacuumBatchSize
autovacuumableSpaceInBytes
sizeInBytes
needsAutovacuum
incrementalVacuum:
manager
connectedToPowerSource
autovacuumIfNeeded
sharedManager
br_currentPersonaID
_validateIsRunningWithCorrectPersona
fetchObjectOfClass:initializer:sql:args:
profilingEnabled
setProfilingEnabled:
attachDBAtPath:as:error:
flushToMakeEditsVisibleToIPCReaders
fetchWithSlowStatementRadar:sql:
fetchWithSlowStatementRadar:objectOfClass:sql:
fetchWithSlowStatementRadar:objectWithConstructor:sql:
executeWithExpectedIndex:sql:
executeWithSlowStatementRadar:sql:
executeWithErrorHandler:sql:
disableProfilingForQueriesInBlock:
usePacedBatchingOnTargetQueue:withInterval:changeCount:
execute:
fetchObjectOfClass:initializer:sql:
fetchObjectOfClass:sql:
fetchObject:sql:
vmStepsExecuted
isReadonly
assertionPersonaIdentifier
setAssertionPersonaIdentifier:
_batchingPacer
_changeCount
_flushInterval
_flushImmediately
_autovacuumInProgress
_changesOverride
_isReadonly
_vmStepsExecuted
_assertionPersonaIdentifier
TB,N
TQ,R,N,V_vmStepsExecuted
lockedHandler
T@?,C,D,N
TB,R,N,V_isReadonly
T@"NSString",&,N,V_assertionPersonaIdentifier
string
rawInjection:length:
initWithName:
mutableCopy
_processURLs
stopAccessingSecurityScopedResource
count
lastObject
removeLastObject
startAccessingSecurityScopedResource
defaultManager
keysToFetch
enumeratorAtURL:includingPropertiesForKeys:options:errorHandler:
arrayWithObjects:count:
nextObject
_processNextRootURL
completedWithResult:error:
isCancelled
brc_errorOperationCancelled
resourceValuesForKeys:error:
objectForKeyedSubscript:
br_wouldBeExcludedFromSync
skipDescendants
br_isPromiseURL
telemetryEventFromChecksummingPackage:db:
telemetryEventFromChecksummingFile:db:
isEqual:
validateDirectoryTelemetry:directoryStack:db:telemetryErrorEvents:telemetryWarningEvents:
finishWithResult:error:
_fileIDFromURL:
_metricsFromFileID:db:
_mangledIDFromZoneRowID:db:
addObjectsFromArray:
removeObjectsInRange:
isEqualToData:
brc_signatureIsPackage
newPackageChecksumMismatchEventWithZoneMangledID:itemIDString:
newFileChecksumMismatchEventWithZoneMangledID:itemIDString:
newFileReadErrorWithError:zoneMangledID:itemIDString:
packageItemsForDocumentID:order:db:
updateWithPkgItem:
type
pathInPackage
br_errorFromErrno
telemetryEventForFileReadErrorWithDocumentID:error:db:
signatureWithFileDescriptor:error:
done
signature
addItem:error:
clear
telemetryEventValidatingSignature:againstDocumentID:db:
cancel
boolAtIndex:
setChildCount:
setRecursiveChildCount:
setSharedByMeRecursiveCount:
setSharedAliasRecursiveCount:
initFromResultSet:pos:
class
self
performSelector:
performSelector:withObject:
performSelector:withObject:withObject:
isProxy
isKindOfClass:
isMemberOfClass:
conformsToProtocol:
respondsToSelector:
retain
release
autorelease
retainCount
zone
hash
superclass
description
debugDescription
TQ,R
T#,R
T@"NSString",R,C
main
shouldRetryForError:
initWithDatabase:rootURLWrappers:fileChecksumRatePerThousand:packageChecksumRatePerThousand:maxEventCount:
pause
resume
checkTelemetryCompletionBlock
setCheckTelemetryCompletionBlock:
_fileChecksumRate
_packageChecksumRate
_maxEventCount
_signalSource
_rootURLWrappers
_currentRootURL
_directoryStack
_directoryEnumerator
_previousURLWasPackage
_telemetryErrorEvents
_processingError
_checkTelemetryCompletionBlock
T@?,C,N,V_checkTelemetryCompletionBlock
valueForEntitlement:
setExportedInterface:
setExportedObject:
listener:shouldAcceptNewConnection:
serviceListener
setDelegate:
setMaxConcurrentOperationCount:
initWithFileURL:
setQualityOfService:
setCountFolderShareItemsCompletionBlock:
addOperation:
_setupDatabaseConnectionFromURL:error:
initWithCapacity:
data
removeObject:
brc_errorItemNotFound:
URLByAppendingPathComponent:
isRootItemIDWithSQLiteValue:
registerFunction:nArgs:handler:
isDocumentsItemIDWithSQLiteValue:
useSerialQueue
performWithFlags:action:
brc_errorItemChanged
initialize
checkRecursiveChildItemCountFromURLWrapper:qualityOfService:reply:
checkTreeConsistencyWithDatabaseURL:rootURLWrappers:fileChecksumRatePerThousand:packageChecksumRatePerThousand:maxEventsCount:reply:
pauseTreeConsistencyCheck
resumeTreeConsistencyCheckWithReply:
cancelTreeConsistencyCheck
_childCountQueue
_treeCheckQueue
currentPersona
userPersonaUniqueString
isDataSeparatedPersona
copyCurrentPersonaContextWithError:
generateAndRestorePersonaContextWithPersonaUniqueString:
errorWithDomain:code:userInfo:
getResourceValue:forKey:error:
arrayWithObjects:
countFolderShareItemsCompletionBlock
_rootURL
_countFolderShareItemsCompletionBlock
T@?,C,N,V_countFolderShareItemsCompletionBlock
BRCTelemetryAdditions
BRDiskCheckerFilesystemDirectory
BRCPQLConnection
BRDiskCheckerValidateTreeConsistencyOperation
BRCOperationSubclass
NSObject
ServiceDelegate
NSXPCListenerDelegate
BRDiskCheckerService
BRDiskCheckerServiceProtocol
BRDiskCheckerCountDocumentsOperation
c16@0:8
@36@0:8@16q24c32
@24@0:8@16
@32@0:8@16@24
@36@0:8@16B24@28
@16@0:8
@28@0:8@16B24
B28@0:8@16B24
v44@0:8@16B24^B28^B36
v24@0:8@16
@40@0:8@16@24@32
B16@0:8
i16@0:8
v20@0:8B16
v16@0:8
@"BRCPQLConnection"
@"NSMutableArray"
@"NSURL"
@32@0:8@16@?24
v24@0:8@?16
B36@0:8@16i24^@28
q16@0:8
B40@0:8@16@24^@32
@40@0:8@16#24@32
@40@0:8@16@?24@32
B32@0:8@16@24
B32@0:8@?16@24
B20@0:8i16
v36@0:8@16d24i32
B24@0:8@16
B32@0:8@16[1{__va_list_tag=II^v^v}]24
@32@0:8@16[1{__va_list_tag=II^v^v}]24
@40@0:8#16:24@32
@48@0:8#16:24@32[1{__va_list_tag=II^v^v}]40
@32@0:8#16@24
@40@0:8#16@24[1{__va_list_tag=II^v^v}]32
@32@0:8@?16@24
@40@0:8@?16@24[1{__va_list_tag=II^v^v}]32
Q16@0:8
@"br_pacer"
@"NSString"
#16@0:8
@24@0:8:16
@32@0:8:16@24
@40@0:8:16@24@32
B24@0:8#16
B24@0:8:16
Vv16@0:8
^{_NSZone=}16@0:8
B24@0:8@"Protocol"16
@"NSString"16@0:8
B24@0:8@"NSError"16
@44@0:8@16@24I32I36I40
v32@0:8@16@24
v56@0:8@16@24@32@40@48
@36@0:8@16I24@28
@36@0:8I16@20@28
@32@0:8Q16@24
Q24@0:8@16
@?16@0:8
@"NSObject<OS_dispatch_source>"
@"NSDirectoryEnumerator"
@"NSError"
B32@0:8@"NSXPCListener"16@"NSXPCConnection"24
v40@0:8@16q24@?32
v52@0:8@16@24I32I36I40@?44
v40@0:8@"FPSandboxingURLWrapper"16q24@?<v@?@"NSNumber"@"NSError">32
v52@0:8@"NSURL"16@"NSArray"24I32I36I40@?<v@?@"NSArray"@"NSArray"@"NSError">44
v24@0:8@?<v@?@"NSError">16
@32@0:8@16^@24
@"NSOperationQueue"
[DEBUG] parent directory is shared
[DEBUG] Directory is %s shared%s
[WARNING] Item at url %@ has %d share aliases not on disk
[ERROR] Can't parse alias target string %@ - %@
[ERROR] Failed to open file URL %@ to lookup the share alias
[ERROR] Failed to locate the documentID for %@ to lookup the share alias
[ERROR] Failed to stat file URL %@ to lookup the share alias
[ERROR] Can't locate the item to find the share alias for %@
[WARNING] Share alias is missing for %@
[WARNING] Failed to get sharing options for %@ - %@
[DEBUG] Processing document at url %@
[WARNING] Not counting item missing a share alias
[DEBUG] Not adding top level share to the recursive item count
[DEBUG] Processing symlink at url %@
[DEBUG] Processing directory at url %@
[ERROR] Direct child count mismatch for %@ at %@ (%d vs %@)
[ERROR] Recursive child count mismatch for %@ at %@ (%d vs %@)
[ERROR] Shared-by-me count mismatch for %@ at %@ (%d vs %@)
[ERROR] Share alias count mismatch for %@ at %@ (%d vs %@)
[ERROR] Sqlite request %@ failed on %@ with error [%@]
[ERROR] Sqlite failed on %@ with error [%@]
[CRIT] UNREACHABLE: Got really unexpected error: %@
[CRIT] %@
[ERROR] %@
[WARNING] %@
[WARNING] Possible slow statement on %@:
  binds:    %d
  changes:  %lld
  vm steps: %d (max: %lu)
  sql:      %s
  %@
[WARNING] Possible slow statement on %@:
  binds:    %d
  columns:  %d
  rows:     %ld
  vm steps: %d (max: %lu)
  sql:      %s
  %@
[CRIT] Significantly too slow SQL statement ( vm steps: %u  max:%lu ): %s
[ERROR] %s: %s error: %@
[CRIT] API MISUSE: you need to provide a radar
[CRIT] API MISUSE: you need to an index to use
[CRIT] Assertion failed: block
[CRIT] Assertion failed: _batchingPacer
[CRIT] error closing connection %@: %@
[CRIT] UNREACHABLE: Running on the connection with the wrong persona
[ERROR] error enumerating %@: error %@ at %@
[WARNING] We've reached our cap of telemetry events.  Finishing early
[WARNING] The operation is cancelled so finishing early
[DEBUG] not counting item at url %@ because it's excluded from sync
[DEBUG] Skipping descendants of %@
[DEBUG] Checksumming package at %@
[DEBUG] Checksumming flat file at %@
[DEBUG] Finishing processing %@
[DEBUG] Starting processing %@
[ERROR] File checksum at %u for %@ doesn't match %@ vs %@
[ERROR] Can't locate item with docID %u
[ERROR] Can't open file at url to lookup doc id %@ %{errno}d
[ERROR] Couldn't open file for checksumming at %@ %{errno}d
[ERROR] File signature mismatch at path %@
[ERROR] Couldn't add item for checksumming at %@
[ERROR] Can't open file at url to checksum %@
[ERROR] Failed to generate a signature for file at %@ - %@
[ERROR] Failed to stat path %@ for metrics
[DEBUG] Pausing consistency checker
[DEBUG] Resuming the consistency checker
[DEBUG] opening telemetry db connection at path: %@
[CRIT] telemetry database connection ecountered unexpected corruption: %@
[ERROR] error opening db at url %@: %@
[ERROR] error attaching db at url %@ to db %@: %@
[WARNING] Not checking telemetry because we have %lld active apply jobs
[WARNING] Not checking telemetry because we have %lld active sync jobs
[ERROR] won't restore persona: %@
[ERROR] Can't adopt persona %@: %@
[DEBUG] Not allowed to adopt persona - should fallback persona
[CRIT] UNREACHABLE: Failed to adopt persona for block adoption
[CRIT] UNREACHABLE: Can't adopt persona for xpc activity, deferring the activity
[DEBUG] Failed to defer the activity after persona failure.
[ERROR] Failed to determine if the root at %@ is shared - %@
[WARNING] Can't get resource values at %@ - %@
[DEBUG] not counting item at url %@ because it is shared to me
[DEBUG] counting item at url %@
[DEBUG] not counting item at url %@ because it's not a file, package, or symlink
to me
by me
 with missing share alias
SELECT item_id, zone_rowid FROM client_items WHERE item_file_id = %@ AND item_state IN (0, -1)
SELECT item_alias_target FROM server_items WHERE item_parent_id = %@ AND zone_rowid = %@ AND item_type = 3
SELECT 1 FROM server_items WHERE item_id = %@ AND item_id_is_root(item_parent_id) AND zone_rowid = (SELECT sz.rowid FROM server_zones AS sz WHERE sz.zone_owner = %@ AND sz.zone_name = %@)
ci.item_doc_id = %@
ci.item_file_id = %@
SELECT ci.item_id, cz.zone_owner, cz.zone_name FROM client_items AS ci INNER JOIN client_zones AS cz ON ci.zone_rowid = cz.rowid WHERE %@
SELECT 1 FROM server_items WHERE item_alias_target = %@ AND item_type = 3
SELECT ci.item_sharing_options, cz.zone_owner FROM client_items AS ci INNER JOIN client_zones AS cz ON ci.zone_rowid = cz.rowid WHERE %@
v8@?0
Sqlite database became corrupted, abort...
-[BRCPQLConnection _setErrorHandlerWithDBCorruptionHandler:]_block_invoke
/Library/Caches/com.apple.xbs/Sources/CloudDocs_plugins_Sim/core/shared/foundation/BRCPQLConnection.m
v32@?0@"PQLConnection"8@"PQLStatement"16@"NSError"24
B32@?0@"BRCPQLConnection"8@"PQLStatement"16@"NSError"24
%@ locked for more than 1 minute, aborting...
-[BRCPQLConnection _setLockedHandler]_block_invoke
%@ has been locked for %f seconds: %@
 (for statement %@)
(null)
Significantly too slow SQL statement: 
v32@?0@"PQLConnection"8^{sqlite3_stmt=}16Q24
ATTACH "%@" AS %@
-[BRCPQLConnection attachDBAtPath:as:error:]
(passed to caller)
(ignored by caller)
setting profiling hook is not supported on %@
-[BRCPQLConnection setProfilingHook:]
com.apple.bird.db.batching
B20@?0@"PQLConnection"8i16
error closing connection %@: %@
-[BRCPQLConnection brc_close]
pragma page_count
pragma page_size
explain query plan %@
plan:
    %@
check-tree-consistency
B24@?0@"NSURL"8@"NSError"16
SELECT item_id, zone_rowid FROM client_items WHERE item_file_id = %llu AND item_state IN (0, -1)
SELECT version_content_signature, item_id, zone_rowid FROM client_items WHERE item_doc_id = %u
SELECT item_id, zone_rowid FROM client_items WHERE item_doc_id = %u
SELECT zone_name, zone_owner FROM client_zones WHERE rowid = %@
@24@?0@"PQLResultSet"8^@16
SELECT si.item_id IS NULL, (SELECT sz.zone_owner = %@ FROM server_zones AS sz WHERE sz.rowid = si.zone_rowid), si.quota_used, si.recursive_child_count, si.shared_children_count, si.shared_alias_count, si.child_count FROM client_items AS ci LEFT JOIN server_items AS si ON (si.item_id = ci.item_id AND si.zone_rowid = ci.zone_rowid) WHERE ci.item_file_id = %llu AND ci.item_state IN (0, -1)
com.apple.private.clouddocs.telemetry-disk-checker
v24@?0@"NSNumber"8@"NSError"16
v32@?0@"NSArray"8@"NSArray"16@"NSError"24
operation
client.db
server.db
telemetry-connection
v32@?0@"PQLConnection"8@"NSError"16@?<v@?>24
server
item_id_is_root
v28@?0^{sqlite3_context=}8i16^^{sqlite3_value}20
item_id_is_documents
SELECT COUNT(*) FROM client_unapplied_table WHERE throttle_state IN (1,26)
SELECT COUNT(*) FROM client_items WHERE item_localsyncupstate != 0 AND NOT item_id_is_documents(item_id)
B16@?0@"PQLConnection"8
__defaultPersonaID__
v16@?0@"NSObject<OS_xpc_object>"8
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>application-identifier</key>
<string>com.apple.CloudDocs.telemetry-disk-checker</string>
<key>com.apple.application-identifier</key>
<string>com.apple.CloudDocs.telemetry-disk-checker</string>
<key>com.apple.private.MobileContainerManager.lookup</key>
<dict>
<key>daemon</key>
<array>
<string>com.apple.bird</string>
</array>
</dict>
<key>com.apple.private.security.storage.AppDataContainers</key>
<true/>
<key>com.apple.private.security.storage.MobileDocuments</key>
<true/>
<key>com.apple.security.app-sandbox</key>
<true/>
<key>com.apple.security.enterprise-volume-access</key>
<true/>
<key>com.apple.security.exception.files.home-relative-path.read-write</key>
<array>
<string>/Library/Application Support/CloudDocs/session/telemetry-db/</string>
</array>
<key>com.apple.security.temporary-exception.files.home-relative-path.read-write</key>
<array>
<string>/Library/Application Support/CloudDocs/session/telemetry-db/</string>
</array>
</dict>
</plist>
@(#)PROGRAM:TelemetryDiskChecker  PROJECT:CloudDocs-1
BRCTelemetryAdditions
BRDiskCheckerFilesystemDirectory
BRCPQLConnection
BRDiskCheckerValidateTreeConsistencyOperation
BRCOperationSubclass
NSObject
ServiceDelegate
NSXPCListenerDelegate
BRDiskCheckerService
BRDiskCheckerServiceProtocol
BRDiskCheckerCountDocumentsOperation
copyCurrentPersonaContextWithError:
incrementalVacuum:
sharedAliasRecursiveCount
setPath:
removeLastObject
path
updateWithPkgItem:
brc_errorOperationCancelled
defaultManager
autovacuumableSpaceInBytes
intValue
stringAtIndex:
numberAtIndex:
getResourceValue:forKey:error:
isRootItemIDWithSQLiteValue:
registerFunction:nArgs:handler:
addOperation:
brc_errorItemNotFound:
mutableCopy
connectedToPowerSource
setMtime:
unsaltedBookmarkDataWithItemResolutionString:serverZoneMangledID:
parseUnsaltedBookmarkDataWithItemID:mangledID:error:
nextObject
string
debugItemIDString
intAtIndex:
addObjectsFromArray:
completedWithResult:error:
manager
brc_errorItemChanged
setupPragmas
setMaxConcurrentOperationCount:
packageItemsForDocumentID:order:db:
type
isInTransaction
setChildCount:
stopAccessingSecurityScopedResource
next
dbTraced
initWithZoneName:ownerName:
generateAndRestorePersonaContextWithPersonaUniqueString:
longLongValue
setType:
code
addObject:
UTF8String
ownerName
isExecutable
setLockedHandler:
startAccessingSecurityScopedResource
dbAutovacuumRatio
newShareCountMismatchEventWithZoneMangledID:itemIDString:magnitude:
addItem:error:
close:
length
setTraced:
fp_obfuscatedPath
setLabel:
isEqualToString:
serviceListener
skipDescendants
arrayWithObjects:count:
valueForEntitlement:
dbAutovacuumBatchSize
newShareAliasCountMismatchEventWithZoneMangledID:itemIDString:magnitude:
lastObject
recursiveChildCount
objectOfClass:atIndex:
close
formatInjection:
setSymlinkContent:
setIsWritable:
isEqualToData:
br_wouldBeExcludedFromSync
arrayWithObjects:
data
serialQueue
initWithFormat:
newRecursiveItemCountMismatchEventWithZoneMangledID:itemIDString:magnitude:
lastError
forceBatchStart
errorWithDomain:code:userInfo:
rawInjection:length:
clear
br_isPromiseURL
objectForKeyedSubscript:
setIsExecutable:
currentPersona
userPersonaUniqueString
signatureWithFileDescriptor:error:
newPackageChecksumMismatchEventWithZoneMangledID:itemIDString:
appendFormat:
setSharedByMeRecursiveCount:
flush
childCount
isDocumentsItemIDWithSQLiteValue:
setExportedObject:
br_errorFromErrno
enumeratorAtURL:includingPropertiesForKeys:options:errorHandler:
numberWithUnsignedLongLong:
signature
URLByAppendingPathComponent:
newFileReadErrorWithError:zoneMangledID:itemIDString:
resourceValuesForKeys:error:
useSerialQueue
currentOperationDuration
appLibraryOrZoneName
performWithFlags:action:
setSharedAliasRecursiveCount:
itemIDString
fileSystemRepresentation
isDataSeparatedPersona
setExportedInterface:
br_currentPersonaID
numberWithUnsignedInt:
enumerateObjectsOfClass:
stringWithUTF8String:
initWithCapacity:
newFileChecksumMismatchEventWithZoneMangledID:itemIDString:
removeObjectsInRange:
sharedManager
countByEnumeratingWithState:objects:count:
setRecursiveChildCount:
useBatchingOnTargetQueue:withPolicyHandler:
isWritable
setDelegate:
done
isCancelled
stringWithFormat:
numberWithSQL:
boolValue
removeObject:
initFromResultSet:pos:
setQualityOfService:
count
newChildCountMismatchEventWithZoneMangledID:itemIDString:magnitude:
sharedByMeRecursiveCount
pathInPackage
brc_signatureIsPackage
boolAtIndex:
integerValue
stringByAppendingString:
defaultsForMangledID:
setCrashIfUsedAfterClose:
numberWithInt:
mode
fileAtPath:mtime:mode:
directoryAtPath:
symlinkAtPath:content:
Tc,R,N
init
initWithURL:parentIsShared:db:
_countOfShareAliasesNotOnDisk
_filesystemIdentifierFromURL:isDocument:
_lookupInjectionFromFileURL:isDocument:
_isMissingShareAliasAtFileURL:isDocument:
_processSharingInfoAtURL:isDocument:isSharedToMeTopLevelItem:shareAliasIsMissing:
_addDocument:
addFlatFile:
addPackage:
addSymlink:
addSubdirectory:
generateTelemetryErrorEventsWithMetrics:itemID:zoneMangledID:
isShared
isSharedToMeTopLevelItem
shareAliasMissing
directChildCount
recursiveItemCount
recursiveSharedByMeCount
recursiveShareAliasCount
childHasProblem
setChildHasProblem:
telemetryWarningEvents
.cxx_destruct
_telemetryWarningEvents
_isShared
_isSharedToMeTopLevelItem
_shareAliasMissing
_childHasProblem
_directChildCount
_recursiveItemCount
_recursiveSharedByMeCount
_recursiveShareAliasCount
_url
T@"NSURL",R,N,V_url
TB,R,N,V_isShared
TB,R,N,V_isSharedToMeTopLevelItem
TB,R,N,V_shareAliasMissing
Ti,R,N,V_directChildCount
Ti,R,N,V_recursiveItemCount
Ti,R,N,V_recursiveSharedByMeCount
Ti,R,N,V_recursiveShareAliasCount
TB,N,V_childHasProblem
T@"NSArray",R,N,V_telemetryWarningEvents
openAtURL:withFlags:error:
changes
setProfilingHook:
profilingHook
sqliteErrorHandler
setSqliteErrorHandler:
assertOnQueue
execute:args:
executeRaw:
fetch:args:
fetchObjectOfClass:initializer:sql:args:
fetchObjectOfClass:sql:args:
fetchObject:sql:args:
initWithLabel:dbCorruptionHandler:
_setErrorHandlerWithDBCorruptionHandler:
_setLockedHandler
profilingEnabled
setProfilingEnabled:
attachDBAtPath:as:error:
flushToMakeEditsVisibleToIPCReaders
fetchWithSlowStatementRadar:sql:
fetchWithSlowStatementRadar:objectOfClass:sql:
fetchWithSlowStatementRadar:objectWithConstructor:sql:
executeWithExpectedIndex:sql:
executeWithSlowStatementRadar:sql:
executeWithErrorHandler:sql:
disableProfilingForQueriesInBlock:
_shouldFlushWithChangeCount:
usePacedBatchingOnTargetQueue:withInterval:changeCount:
brc_closeWithError:
brc_close
sizeInBytes
needsAutovacuum
autovacuumIfNeeded
_validateIsRunningWithCorrectPersona
execute:
fetch:
fetchObjectOfClass:initializer:sql:
fetchObjectOfClass:sql:
fetchObject:sql:
vmStepsExecuted
isReadonly
assertionPersonaIdentifier
setAssertionPersonaIdentifier:
_batchingPacer
_changeCount
_flushInterval
_flushImmediately
_autovacuumInProgress
_changesOverride
_isReadonly
_vmStepsExecuted
_assertionPersonaIdentifier
TB,N
TQ,R,N,V_vmStepsExecuted
lockedHandler
T@?,C,D,N
TB,R,N,V_isReadonly
T@"NSString",&,N,V_assertionPersonaIdentifier
initWithName:
finishWithResult:error:
cancel
isEqual:
class
self
performSelector:
performSelector:withObject:
performSelector:withObject:withObject:
isProxy
isKindOfClass:
isMemberOfClass:
conformsToProtocol:
respondsToSelector:
retain
release
autorelease
retainCount
zone
hash
superclass
description
debugDescription
TQ,R
T#,R
T@"NSString",R,C
main
shouldRetryForError:
initWithDatabase:rootURLWrappers:fileChecksumRatePerThousand:packageChecksumRatePerThousand:maxEventCount:
_processNextRootURL
keysToFetch
_processURLs
validateDirectoryTelemetry:directoryStack:db:telemetryErrorEvents:telemetryWarningEvents:
telemetryEventValidatingSignature:againstDocumentID:db:
telemetryEventForFileReadErrorWithDocumentID:error:db:
telemetryEventFromChecksummingPackage:db:
telemetryEventFromChecksummingFile:db:
pause
resume
_mangledIDFromZoneRowID:db:
_metricsFromFileID:db:
_fileIDFromURL:
checkTelemetryCompletionBlock
setCheckTelemetryCompletionBlock:
_fileChecksumRate
_packageChecksumRate
_maxEventCount
_signalSource
_rootURLWrappers
_currentRootURL
_directoryStack
_directoryEnumerator
_previousURLWasPackage
_telemetryErrorEvents
_processingError
_checkTelemetryCompletionBlock
T@?,C,N,V_checkTelemetryCompletionBlock
listener:shouldAcceptNewConnection:
initialize
checkRecursiveChildItemCountFromURLWrapper:qualityOfService:reply:
checkTreeConsistencyWithDatabaseURL:rootURLWrappers:fileChecksumRatePerThousand:packageChecksumRatePerThousand:maxEventsCount:reply:
pauseTreeConsistencyCheck
resumeTreeConsistencyCheckWithReply:
cancelTreeConsistencyCheck
_setupDatabaseConnectionFromURL:error:
_childCountQueue
_treeCheckQueue
initWithFileURL:
countFolderShareItemsCompletionBlock
setCountFolderShareItemsCompletionBlock:
_rootURL
_countFolderShareItemsCompletionBlock
T@?,C,N,V_countFolderShareItemsCompletionBlock
c16@0:8
@36@0:8@16q24c32
@24@0:8@16
@32@0:8@16@24
@36@0:8@16B24@28
@16@0:8
@28@0:8@16B24
B28@0:8@16B24
v44@0:8@16B24^B28^B36
v24@0:8@16
@40@0:8@16@24@32
B16@0:8
i16@0:8
v20@0:8B16
v16@0:8
@"BRCPQLConnection"
@"NSMutableArray"
@"NSURL"
@32@0:8@16@?24
v24@0:8@?16
B36@0:8@16i24^@28
q16@0:8
B40@0:8@16@24^@32
@40@0:8@16#24@32
@40@0:8@16@?24@32
B32@0:8@16@24
B32@0:8@?16@24
B20@0:8i16
v36@0:8@16d24i32
B24@0:8@16
B32@0:8@16*24
@32@0:8@16*24
@40@0:8#16:24@32
@48@0:8#16:24@32*40
@32@0:8#16@24
@40@0:8#16@24*32
@32@0:8@?16@24
@40@0:8@?16@24*32
Q16@0:8
@"br_pacer"
@"NSString"
#16@0:8
@24@0:8:16
@32@0:8:16@24
@40@0:8:16@24@32
B24@0:8#16
B24@0:8:16
Vv16@0:8
^{_NSZone=}16@0:8
B24@0:8@"Protocol"16
@"NSString"16@0:8
B24@0:8@"NSError"16
@44@0:8@16@24I32I36I40
v32@0:8@16@24
v56@0:8@16@24@32@40@48
@36@0:8@16I24@28
@36@0:8I16@20@28
@32@0:8Q16@24
Q24@0:8@16
@?16@0:8
@"NSObject<OS_dispatch_source>"
@"NSDirectoryEnumerator"
@"NSError"
B32@0:8@"NSXPCListener"16@"NSXPCConnection"24
v40@0:8@16q24@?32
v52@0:8@16@24I32I36I40@?44
v40@0:8@"FPSandboxingURLWrapper"16q24@?<v@?@"NSNumber"@"NSError">32
v52@0:8@"NSURL"16@"NSArray"24I32I36I40@?<v@?@"NSArray"@"NSArray"@"NSError">44
v24@0:8@?<v@?@"NSError">16
@32@0:8@16^@24
@"NSOperationQueue"
[DEBUG] parent directory is shared
[DEBUG] Directory is %s shared%s
[WARNING] Item at url %@ has %d share aliases not on disk
[ERROR] Can't parse alias target string %@ - %@
[ERROR] Failed to open file URL %@ to lookup the share alias
[ERROR] Failed to locate the documentID for %@ to lookup the share alias
[ERROR] Failed to stat file URL %@ to lookup the share alias
[ERROR] Can't locate the item to find the share alias for %@
[WARNING] Share alias is missing for %@
[WARNING] Failed to get sharing options for %@ - %@
[DEBUG] Processing document at url %@
[WARNING] Not counting item missing a share alias
[DEBUG] Not adding top level share to the recursive item count
[DEBUG] Processing symlink at url %@
[DEBUG] Processing directory at url %@
[ERROR] Direct child count mismatch for %@ at %@ (%d vs %@)
[ERROR] Recursive child count mismatch for %@ at %@ (%d vs %@)
[ERROR] Shared-by-me count mismatch for %@ at %@ (%d vs %@)
[ERROR] Share alias count mismatch for %@ at %@ (%d vs %@)
[ERROR] Sqlite request %@ failed on %@ with error [%@]
[ERROR] Sqlite failed on %@ with error [%@]
[CRIT] UNREACHABLE: Got really unexpected error: %@
[CRIT] %@
[ERROR] %@
[WARNING] %@
[WARNING] Possible slow statement on %@:
  binds:    %d
  changes:  %lld
  vm steps: %d (max: %lu)
  sql:      %s
  %@
[WARNING] Possible slow statement on %@:
  binds:    %d
  columns:  %d
  rows:     %ld
  vm steps: %d (max: %lu)
  sql:      %s
  %@
[CRIT] Significantly too slow SQL statement ( vm steps: %u  max:%lu ): %s
[ERROR] %s: %s error: %@
[CRIT] API MISUSE: you need to provide a radar
[CRIT] API MISUSE: you need to an index to use
[CRIT] Assertion failed: block
[CRIT] Assertion failed: _batchingPacer
[CRIT] error closing connection %@: %@
[CRIT] UNREACHABLE: Running on the connection with the wrong persona
[ERROR] error enumerating %@: error %@ at %@
[WARNING] We've reached our cap of telemetry events.  Finishing early
[WARNING] The operation is cancelled so finishing early
[DEBUG] not counting item at url %@ because it's excluded from sync
[DEBUG] Skipping descendants of %@
[DEBUG] Checksumming package at %@
[DEBUG] Checksumming flat file at %@
[DEBUG] Finishing processing %@
[DEBUG] Starting processing %@
[ERROR] File checksum at %u for %@ doesn't match %@ vs %@
[ERROR] Can't locate item with docID %u
[ERROR] Can't open file at url to lookup doc id %@ %{errno}d
[ERROR] Couldn't open file for checksumming at %@ %{errno}d
[ERROR] File signature mismatch at path %@
[ERROR] Couldn't add item for checksumming at %@
[ERROR] Can't open file at url to checksum %@
[ERROR] Failed to generate a signature for file at %@ - %@
[ERROR] Failed to stat path %@ for metrics
[DEBUG] Pausing consistency checker
[DEBUG] Resuming the consistency checker
[DEBUG] opening telemetry db connection at path: %@
[CRIT] telemetry database connection ecountered unexpected corruption: %@
[ERROR] error opening db at url %@: %@
[ERROR] error attaching db at url %@ to db %@: %@
[WARNING] Not checking telemetry because we have %lld active apply jobs
[WARNING] Not checking telemetry because we have %lld active sync jobs
[ERROR] won't restore persona: %@
[ERROR] Can't adopt persona %@: %@
[DEBUG] Not allowed to adopt persona - should fallback persona
[CRIT] UNREACHABLE: Failed to adopt persona for block adoption
[CRIT] UNREACHABLE: Can't adopt persona for xpc activity, deferring the activity
[DEBUG] Failed to defer the activity after persona failure.
[ERROR] Failed to determine if the root at %@ is shared - %@
[WARNING] Can't get resource values at %@ - %@
[DEBUG] not counting item at url %@ because it is shared to me
[DEBUG] counting item at url %@
[DEBUG] not counting item at url %@ because it's not a file, package, or symlink
to me
by me
 with missing share alias
SELECT item_id, zone_rowid FROM client_items WHERE item_file_id = %@ AND item_state IN (0, -1)
SELECT item_alias_target FROM server_items WHERE item_parent_id = %@ AND zone_rowid = %@ AND item_type = 3
SELECT 1 FROM server_items WHERE item_id = %@ AND item_id_is_root(item_parent_id) AND zone_rowid = (SELECT sz.rowid FROM server_zones AS sz WHERE sz.zone_owner = %@ AND sz.zone_name = %@)
ci.item_doc_id = %@
ci.item_file_id = %@
SELECT ci.item_id, cz.zone_owner, cz.zone_name FROM client_items AS ci INNER JOIN client_zones AS cz ON ci.zone_rowid = cz.rowid WHERE %@
SELECT 1 FROM server_items WHERE item_alias_target = %@ AND item_type = 3
SELECT ci.item_sharing_options, cz.zone_owner FROM client_items AS ci INNER JOIN client_zones AS cz ON ci.zone_rowid = cz.rowid WHERE %@
v8@?0
Sqlite database became corrupted, abort...
-[BRCPQLConnection _setErrorHandlerWithDBCorruptionHandler:]_block_invoke
/Library/Caches/com.apple.xbs/Sources/CloudDocs_plugins_Sim/core/shared/foundation/BRCPQLConnection.m
v32@?0@"PQLConnection"8@"PQLStatement"16@"NSError"24
B32@?0@"BRCPQLConnection"8@"PQLStatement"16@"NSError"24
%@ locked for more than 1 minute, aborting...
-[BRCPQLConnection _setLockedHandler]_block_invoke
%@ has been locked for %f seconds: %@
 (for statement %@)
(null)
Significantly too slow SQL statement: 
v32@?0@"PQLConnection"8^{sqlite3_stmt=}16Q24
ATTACH "%@" AS %@
-[BRCPQLConnection attachDBAtPath:as:error:]
(passed to caller)
(ignored by caller)
setting profiling hook is not supported on %@
-[BRCPQLConnection setProfilingHook:]
com.apple.bird.db.batching
B20@?0@"PQLConnection"8i16
error closing connection %@: %@
-[BRCPQLConnection brc_close]
pragma page_count
pragma page_size
explain query plan %@
plan:
    %@
check-tree-consistency
B24@?0@"NSURL"8@"NSError"16
SELECT item_id, zone_rowid FROM client_items WHERE item_file_id = %llu AND item_state IN (0, -1)
SELECT version_content_signature, item_id, zone_rowid FROM client_items WHERE item_doc_id = %u
SELECT item_id, zone_rowid FROM client_items WHERE item_doc_id = %u
SELECT zone_name, zone_owner FROM client_zones WHERE rowid = %@
@24@?0@"PQLResultSet"8^@16
SELECT si.item_id IS NULL, (SELECT sz.zone_owner = %@ FROM server_zones AS sz WHERE sz.rowid = si.zone_rowid), si.quota_used, si.recursive_child_count, si.shared_children_count, si.shared_alias_count, si.child_count FROM client_items AS ci LEFT JOIN server_items AS si ON (si.item_id = ci.item_id AND si.zone_rowid = ci.zone_rowid) WHERE ci.item_file_id = %llu AND ci.item_state IN (0, -1)
com.apple.private.clouddocs.telemetry-disk-checker
v24@?0@"NSNumber"8@"NSError"16
v32@?0@"NSArray"8@"NSArray"16@"NSError"24
operation
client.db
server.db
telemetry-connection
v32@?0@"PQLConnection"8@"NSError"16@?<v@?>24
server
item_id_is_root
v28@?0^{sqlite3_context=}8i16^^{sqlite3_value}20
item_id_is_documents
SELECT COUNT(*) FROM client_unapplied_table WHERE throttle_state IN (1,26)
SELECT COUNT(*) FROM client_items WHERE item_localsyncupstate != 0 AND NOT item_id_is_documents(item_id)
B16@?0@"PQLConnection"8
__defaultPersonaID__
v16@?0@"NSObject<OS_xpc_object>"8
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>application-identifier</key>
<string>com.apple.CloudDocs.telemetry-disk-checker</string>
<key>com.apple.application-identifier</key>
<string>com.apple.CloudDocs.telemetry-disk-checker</string>
<key>com.apple.private.MobileContainerManager.lookup</key>
<dict>
<key>daemon</key>
<array>
<string>com.apple.bird</string>
</array>
</dict>
<key>com.apple.private.security.storage.AppDataContainers</key>
<true/>
<key>com.apple.private.security.storage.MobileDocuments</key>
<true/>
<key>com.apple.security.app-sandbox</key>
<true/>
<key>com.apple.security.enterprise-volume-access</key>
<true/>
<key>com.apple.security.exception.files.home-relative-path.read-write</key>
<array>
<string>/Library/Application Support/CloudDocs/session/telemetry-db/</string>
</array>
<key>com.apple.security.temporary-exception.files.home-relative-path.read-write</key>
<array>
<string>/Library/Application Support/CloudDocs/session/telemetry-db/</string>
</array>
</dict>
</plist>
