@(#)PROGRAM:ContextKitExtraction  PROJECT:ContextKit-1
title
bundleIdentifier
type
identifier
extractionSourceClassName
onScreen
Title: %@, Type: %@, Identifier: %@, BundleIdentifier: %@, ExtractionClass: %@, On Screen:%@
WKWebView
PDFView
SFSafariView
text
className
superviewClassNames
sceneIdentifier
fontSize
density
frameInWindow
absoluteOriginOnScreen
Class: %@, FontSize: %.f, Origin:(%.f, %.f), AbsoluteOriginOnScreen:(%.f, %.f), Size:(%.f, %.f), SceneIdentifier: %@, On Screen:%@
SuperViews:%@
Content: %@
absoluteOriginX
abosluteOriginY
width
height
let traversed=null;function retrieveNodeInformation(){traversed=new Set;let e,t=document.createNodeIterator(document.body,NodeFilter.SHOW_ELEMENT),n=[];for(;e=t.nextNode();){if(traversed.has(e))continue;let t=elementBoundingBoxInPage(e),o=t.height>10&&t.width>30,i=elementIsVisibleInViewport(e);if(!o||elementIsHidden(e))continue;let r=[].map.call(e.childNodes,(function(e){return nodeText='',3==e.nodeType?nodeText=e.nodeValue.trim():['A', 'B', 'L', 'U', 'LI'].indexOf(e.nodeName)>=0&&(traversed.add(e),nodeText=e.innerText.trim()),nodeText||void 0})).filter((e=>null!=e)).join(', ').trim(),[d,l]=shouldGetAllText(e);d&&(r=getAllText(e).join(', ').trim());let s=elementOriginPagesFromViewport(t),w=/^(.)
+$/.test(r);r.length>=3&&r.length<350&&!w&&(node={text:r,className:l,left:t.left,right:t.right,top:t.top,bottom:t.bottom,onScreen:i?1:0,pagesFromViewport:s},n.push(node),n.length>250&&(n[0].pagesFromViewPort>node.pagesFromViewPort?n.shift():n.pop()))}return traversed=null,JSON.stringify({nodes:n})}function shouldGetAllText(e){const t=e.getAttribute('itemtype');if(t&&t.includes('schema.org/'))return[!0,t];const n=e.nodeName;return n&&['address'].includes(n.toString().toLowerCase())?[!0,n]:[!1,null]}function getAllText(e){return traversed.add(e),[].flatMap.call(e.childNodes,(function(e){if(e.nodeType!=Node.ELEMENT_NODE||!elementIsHidden(e)){if(e.nodeType==Node.TEXT_NODE){let t=e.nodeValue.trim();return t||void 0}return getAllText(e)}})).filter((e=>!['|',',',void 0].includes(e)))}function elementBoundingBoxInPage(e){let t=e.getBoundingClientRect();return{left:t.left+window.scrollX,right:t.right+window.scrollX,top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,width:t.width,height:t.height}}function elementIsVisibleInViewport(e){const t=e.getBoundingClientRect();if(!(t.top<window.innerHeight&&t.left<window.innerWidth&&t.bottom>0&&t.right>0))return!1;const n={x:t.left+t.width/2,y:t.top+t.height/2};let o=e,i=document.elementFromPoint(n.x,n.y);if(null==i)return!1;do{if(i===o)return!0}while(o=o.parentNode);do{if(i===e)return!0}while(i=i.parentNode);return!1}function elementIsHidden(e){const t=window.getComputedStyle(e);return'none'===t.display||'visible'!==t.visibility||'0'===t.opacity}function elementOriginPagesFromViewport(e){let t=0,n=0;return e.top<window.pageYOffset?t=window.pageYOffset-e.top:e.top>window.pageYOffset+window.innerHeight&&(t=e.top-window.pageYOffset-window.innerHeight),e.left<window.pageXOffset?n=window.pageXOffset-e.left:e.left>window.pageXOffset+window.innerWidth&&(n=e.left-window.pageXOffset-window.innerWidth),t=Math.floor(t/window.innerHeight),n=Math.floor(n/window.innerWidth),Math.max(t,n)}retrieveNodeInformation();
%@%@%@
_UIActivityContentCollectionView
v8@?0
UIContentTextExtractionEnabled
com.apple.contextkit.content-request
SafariViewService
com.apple.mobilesafari
com.apple.springboard
v16@?0@"CKContextDonation"8
v12@?0i8
UAUserActivity
CKContextContentProviderManager Activity Reporting Queue
CKContextGlobals
v20@?0@"CKContextExecutor"8B16
v16@?0@"NSNotification"8
v12@?0B8
com.apple.PaperBoard
com.apple.siri
com.apple.chronod
com.apple.BluetoothUIService
com.apple.BusinessChatViewService
com.apple.CoreAuthUI
com.apple.DragUI.druid
com.apple.InCallService
com.apple.RealityEnvironment
com.apple.RealityChrome
com.apple.RealityControlCenter
com.apple.RealityKeyboard
com.apple.RealityNotifications
com.apple.Sharing.SharingHUDService
com.apple.Spotlight
com.apple.TelephonyUtilities
com.apple.WorkflowKit.ShortcutsViewService
com.wave.wwfe
com.apple.NanoUniverse.AegirPoster
com.apple.WallpaperKit.CollectionsPoster
com.apple.GradientPoster.GradientPosterExtension
com.apple.EmojiPoster.EmojiPosterExtension
com.apple.PhotosUIPrivate.PhotosPosterProvider
com.apple.mobileslideshow.PhotosPosterProvider
com.apple.PridePoster.PridePosterExtension
com.apple.UnityPoster.UnityPosterExtension
com.apple.weather.poster
com.apple.PosterBoard
com.apple.Home.HomeControlService
com.apple.MediaRemoteUI
Unable to find class %s
com.apple.mobilecal
com.apple.Maps
com.apple.contextkit.ProofOfContext
orientation
profile
cameraIntrinsics
IOSurface
iosurface
topicId
CKContextContentProviderUIScene WebView PDF Queue
PDFDocument
CKContextAllowAppSwitcherDebuggingControls
HOHomeViewController
HUDashboardViewController
HUQuickControlContainerViewController
HUServiceDetailsViewController
CKContextExtractionContentWorld
nodes
left
right
bottom
UILabel
UIScrollView
UIView
UIDropShadowView
UITransitionView
UIStackView
@UICollectionView
UITableViewCellContentView
NUIContainerStackView
v16@?0@"CKContextExecutor"8
@distinctUnionOfObjects.%@
self
v40@?0@"NSString"8@"NSString"16@"UIImage"24@"NSArray"32
v16@?0@"NSString"8
v24@?0@"NSString"8@"NSError"16
v24@?0@8@"NSError"16
v24@?0@"UIImage"8@"NSError"16
document.documentElement.outerHTML.toString()
v16@?0@"NSTimer"8
clock.fill
square.and.arrow.up.fill
universal-recents://
SBFluidSwitcherContentView
WKContentWorld
WKSnapshotConfiguration
Donations not allowed from this process. Setup aborted.
Could not get notification state; error:%i
Ignoring outdated notification; delta=%llu seconds
Donating to ContextService after %i ms.
Could not register for extraction; error:%u
Extraction timed out; donations so far: %lu
The client is not allowed to donate due it being a Safari provider
The client %@ is allowed to donate
Preparing donation of user activity for foreground process: %@
The web view is displaying an encrypted PDF.
CKContextContentProviderUIScene is unexpectedly trying to capture from off of the main thread.
The extracted text (length %lu) is too short. Donation from UIKit hierarchy aborted.
The web view is still loading. There should be no attempt to extract content from it without user gesture.
The webview data store is not persistent. We cannot extract from it for privacy reasons without user gesture.
Failed to extract enough text from main webpage frame. Trying to get content from all frames
Error evaluating JavaScript for node extraction: %@
Error parsing node information to JSON dictionary: %@
Creating the bespoke extraction component.
CKContextContentProviderComponent is unexpectedly trying to capture from off of the main thread.
There is no view to extract from
There are no descendants on the view provided for extraction.
Extracting from a WKWebView
Marking the executor as incomplete
Trying to get bounding boxes by injecting Javascript into WKWebView
softlink:r:path:/System/Library/PrivateFrameworks/ContextKit.framework/ContextKit
softlink:r:path:/System/Library/Frameworks/PDFKit.framework/PDFKit
softlink:r:path:/System/Library/Frameworks/WebKit.framework/WebKit
softlink:r:path:/System/Library/Frameworks/WebKit.framework/WebKit
CKContextExtractionItem
NSSecureCoding
NSCoding
NSCopying
CKContextExtractionUtil
CKContextUIClasses
CKContextUIElement
CKContextSharedExtractionHelper
CKContextContentProviderManager
NSUserActivityObserver
NSObject
CKContextExecutor
CKContextImageSource
CKContextItem
CKContextContentProvider
CKContextContentProviderUIScene
_UISceneComponentProviding
CKContextContentProviderComponent
init
decodeObjectOfClass:forKey:
decodeIntegerForKey:
decodeBoolForKey:
encodeObject:forKey:
encodeInteger:forKey:
encodeBool:forKey:
allocWithZone:
copy
setTitle:
setType:
setBundleIdentifier:
setIdentifier:
setExtractionSourceClassName:
setOnScreen:
hash
numberWithUnsignedInteger:
stringWithFormat:
setObject:forKeyedSubscript:
numberWithBool:
supportsSecureCoding
encodeWithCoder:
initWithCoder:
TB,R
copyWithZone:
initWithTitle:type:bundleIdentifier:
isEqual:
description
toJSONSerializableDictionary
title
type
bundleIdentifier
identifier
extractionSourceClassName
isOnScreen
.cxx_destruct
_onScreen
_title
_type
_bundleIdentifier
_identifier
_extractionSourceClassName
T@"NSString",C,N,V_title
TQ,N,V_type
T@"NSString",C,N,V_bundleIdentifier
T@"NSString",C,N,V_identifier
T@"NSString",C,N,V_extractionSourceClassName
onScreen
TB,N,GisOnScreen,V_onScreen
ioSurface
size
scale
numberWithDouble:
numberWithUnsignedInt:
dictionaryWithObjects:forKeys:count:
initWithProperties:
lockWithOptions:seed:
CGImage
setLeadImage:
_renderImageToSurfaceWithImage:
setSnapshot:
renderLeadImage:toDonationItem:
renderSnapshot:toDonationItem:
lookupClasses
isWKWebView:
isPDFView:
isSFSafariView:
decodeArrayOfObjectsOfClass:forKey:
decodeFloatForKey:
length
CGPointValue
encodeFloat:forKey:
valueWithCGPoint:
setText:
setClassName:
setSuperviewClassNames:
setSceneIdentifier:
setFontSize:
setDensity:
setFrameInWindow:
setAbsoluteOriginOnScreen:
frameInWindow
componentsJoinedByString:
numberWithFloat:
initWithText:className:
compareByPosition:
text
className
superviewClassNames
sceneIdentifier
fontSize
density
absoluteOriginOnScreen
_fontSize
_density
_text
_className
_superviewClassNames
_sceneIdentifier
_absoluteOriginOnScreen
_frameInWindow
T@"NSString",&,N,V_text
T@"NSString",&,N,V_className
T@"NSArray",&,N,V_superviewClassNames
T@"NSString",&,N,V_sceneIdentifier
Tf,N,V_fontSize
Tf,N,V_density
T{CGRect={CGPoint=dd}{CGSize=dd}},N,V_frameInWindow
T{CGPoint=dd},N,V_absoluteOriginOnScreen
whitespaceAndNewlineCharacterSet
stringByTrimmingCharactersInSet:
stringByReplacingMatchesInString:options:range:withTemplate:
componentsSeparatedByString:
countByEnumeratingWithState:objects:count:
count
_isRelevantForExtractionWithView:
addObject:
subviews
reverseObjectEnumerator
clipsToBounds
bounds
frame
descendantsRelevantForContentExtractionFromView:intoArray:
array
isHidden
alpha
isEqualToString:
image
performSelector:
webPageNodeExtractionJavaScript
blocksFromText:
textBlockLooksLikeAListWithText:
bestContentStringForWebViewUIElements:andTitle:
bestImageForView:
regularExpressionWithPattern:options:error:
_observeApplicationStateNotifications
mainBundle
initWithUTF8String:
containsObject:
objectForInfoDictionaryKey:
boolValue
UTF8String
controlCodeForNonce:
optionsForControlCode:
timeIntervalSinceNow
donate
_prepareDonationWithNonce:options:isRecentsCapture:andReply:
weakObjectsHashTable
addUserActivityObserver:
performSelector:withObject:
removeObject:
markIncomplete
markReady
initWithDonorBundleIdentifier:
setNonce:
_isDonationAllowedWithControlCode:
allObjects
timeout
items
initWithContext:workItemQueue:completionQueue:timeoutAfter:completionHandler:
_unassociatedWindowSceneForScreen:create:
mainScreen
extractFromScene:usingExecutor:withOptions:
extractUsingExecutor:withOptions:
_loadContextKitIfNecessaryWithExecutor:
defaultCenter
addObserverForName:object:queue:usingBlock:
sharedManager
scheduleUserActivityRecordingWithUserActivity:
_dequeueActivityForReporting:
isEligibleForPrediction
_isActivityReportingAllowedForCurrentBundleIdentifier:
_hasQueuedForReportingActivity:
_prepareAndExtractContentForUserActivity:bundleIdentifier:
_queueActivityForReporting:
_formContextUserActivityFromUserActivity:
setAssociatedUserActivity:
_prepareDonationWithNonce:options:isRecentsCapture:requiringMainQueue:andReply:
prepareForDonationWithCompletionHandler:
_hasForegroundActiveContentWithReply:
initWithUserActivity:
removeAllObjects
_scene
activationState
isSpringBoard
isSafariContentProvider
class
self
performSelector:withObject:withObject:
isProxy
isKindOfClass:
isMemberOfClass:
conformsToProtocol:
respondsToSelector:
retain
release
autorelease
retainCount
zone
superclass
debugDescription
TQ,R
T#,R
T@"NSString",R,C
userActivityWasCreated:
userActivityWillBeDestroyed:
userActivityWasInvalidated:
userActivityWillBecomeCurrent:current:
userActivityDidBecomeCurrent:current:
userActivityWasMadeDirty:
userActivityPersistentIdentifierWasChanged:persistentIdentifier:previousValue:
userActivityTargetContentIdentifierWasChanged:targetContentIdentifier:previousValue:
userActivityWebpageURLWasChanged:webpageURL:previousValue:
userActivityWillSynchronize:
userActivityWasSynchronized:
userActivityPayloadWasChanged:payloadIdentifier:
userActivityWasSerialized:archived:
providerCount
addProvider:
removeProvider:
_prepareAndDonateUserActivity:
_providers
_activityReportingQueue
_userActivitiesQueuedForReporting
setWithArray:
signal
_awaitCompletion
dealloc
wait
addWorkItemToQueue:withWorkItem:andContext:
markReadyAndAwaitCompletion
addWorkItem:
addWorkItem:toQueue:
addWorkItem:withContext:
done
context
_workItemQueue
_completionQueue
_group
_timeoutAfter
_completionCondition
_completionHandler
_done
_context
TAB,R,V_done
T@,R,W,N,V_context
initWithIOSurface:
setIoSurface:
setCameraIntrinsics:
unsignedIntValue
setOrientation:
decodeIntForKey:
setProfile:
orientation
profile
cameraIntrinsics
imageSourceForUIImage:
initWithIOSurface:cameraIntrinsics:
_orientation
_ioSurface
_cameraIntrinsics
_profile
T@"IOSurface",&,N,V_ioSurface
T@"NSData",&,N,V_cameraIntrinsics
TI,N,V_orientation
Tq,N,V_profile
setTopicId:
topicId
_topicId
T@"NSString",C,N,V_topicId
nonce
currentSelection
string
currentPage
initWithData:
pageCount
pageAtIndex:
stringByAppendingString:
controlCodeForExecutor:
handlePDFView:withExecutor:
extractContentFromWebViewPDFData:withCompletionHandler:
extractUsingExecutor:
arrayWithObjects:count:
_setScene:
_setUpDebuggingControlsIfPossibleAfterDelay:
isValid
invalidate
isMainThread
_visibleWindows
_donateContentsOfWindow:usingExecutor:withOptions:
_descendantsRelevantForContentExtractionFromView:intoArray:
_firstAvailableUIViewControllerForUIView:
nextResponder
_descendantsRelevantForContentExtractionFromWindow:
initWithCapacity:
_bestVisibleStringForView:usingExecutor:
_getNotableSuperviewClassNamesForView:
_fontSizeOfView:usingExecutor:
substringWithRange:
windowScene
convertRect:toView:
screen
coordinateSpace
convertPoint:toCoordinateSpace:
subarrayWithRange:
addObjectsFromArray:
isOpaque
drawViewHierarchyInRect:afterScreenUpdates:
_allViewControllersFromUIViews:
_extractItemsFromViewControllers:
newlineCharacterSet
_donateText:withTitle:debugText:debugUrlString:rawHTML:leadImage:snapshot:uiElements:extractionItems:usingContextFromExecutor:
superview
setDebugText:
setDebugUrlString:
setUiElements:
setExtractionItems:
setRawHTML:
addItem:
font
pointSize
remoteProcesses
setRemoteProcesses:
_handleWKWebView:withExecutor:
textContentType
_isSensitiveTextContentType:
isSecureTextEntry
attributedText
accessibilityLabel
component
delegate
dataDetectorElement
scannerResult
value
hasPrefix:
room
name
uniqueIdentifier
UUIDString
home
item
accessory
service
componentsSeparatedByCharactersInSet:
valueForKeyPath:
isLoading
configuration
websiteDataStore
isPersistent
_UIElementsForWebViewContentString:
_bestContentStringForWebViewUIElements:andTitle:
absoluteString
_extractContentFromWebView:includingSnapshot:includingUIBoundingBox:ignoreViewTextLengthRequirements:ignoreViewCountCap:includeRawHTML:withCompletionHandler:
window
_isDisplayingPDF
_dataForDisplayedPDF
_getContentsOfAllFramesAsStringWithCompletionHandler:
_getContentsAsStringWithCompletionHandler:
worldWithName:
dataUsingEncoding:
JSONObjectWithData:options:error:
objectForKeyedSubscript:
null
doubleValue
_convertPointFromContentsToView:
evaluateJavaScript:inFrame:inContentWorld:completionHandler:
setRect:
takeSnapshotWithConfiguration:completionHandler:
evaluateJavaScript:completionHandler:
standardUserDefaults
boolForKey:
_shouldInstallAppSwitcherControls
_installDebuggingButton
_installRecentsButton
_installDebuggingControlsIfApplicable
_determineIfDebuggingControlsShouldBeAllowed
scheduledTimerWithTimeInterval:repeats:block:
_containerViewForDebugButtons
systemImageNamed:
_didSelectRecentsControl:
systemButtonWithImage:target:action:
whiteColor
setTintColor:
setTranslatesAutoresizingMaskIntoConstraints:
addSubview:
topAnchor
constraintEqualToAnchor:
leadingAnchor
widthAnchor
constraintEqualToConstant:
heightAnchor
activateConstraints:
_didSelectDebugControl:
trailingAnchor
openURL:
URLWithString:
initWithActivityItems:applicationActivities:
rootViewController
presentViewController:animated:completion:
_descendantsRelevantForDebugControls:
containsString:
initialize
initWithScene:
_settingsDiffActionsForScene:
_actionHandlersForScene:
_actionRespondersForScene:
_scene:willTransitionToActivationState:withReasonsMask:
_scene:didTransitionFromActivationState:withReasonsMask:
_sceneWillInvalidate:
T@"UIScene",W,N,G_scene,S_setScene:
_debugButton
_recentsButton
_allowAppSwitcherControls
_toolInstallationTimer
__scene
T@"UIScene",W,N,G_scene,S_setScene:,V__scene
_donateContentsOfParentView:usingExecutor:withOptions:
_decendantsRelevantForExtractionFromParentView:
_donateText:withTitle:debugText:debugUrlString:rawHTML:leadImage:snapshot:uiElements:usingContextFromExecutor:
_UIElementsForWebViewContentString:withSceneIdentifier:
view
setView:
_view
T@"UIView",W,N,SsetView:,V_view
B16@0:8
v24@0:8@16
@24@0:8@16
v24@0:8@"NSCoder"16
@24@0:8@"NSCoder"16
@24@0:8^{_NSZone=}16
@40@0:8@16Q24@32
B24@0:8@16
Q16@0:8
@16@0:8
v24@0:8Q16
v20@0:8B16
v16@0:8
@"NSString"
v32@0:8@16@24
@32@0:8@16@24
q24@0:8@16
f16@0:8
v20@0:8f16
{CGRect={CGPoint=dd}{CGSize=dd}}16@0:8
v48@0:8{CGRect={CGPoint=dd}{CGSize=dd}}16
{CGPoint=dd}16@0:8
v32@0:8{CGPoint=dd}16
@"NSArray"
{CGPoint="x"d"y"d}
{CGRect="origin"{CGPoint="x"d"y"d}"size"{CGSize="width"d"height"d}}
Q20@0:8C16
C24@0:8Q16
#16@0:8
@24@0:8:16
@32@0:8:16@24
@40@0:8:16@24@32
B24@0:8#16
B24@0:8:16
Vv16@0:8
^{_NSZone=}16@0:8
B24@0:8@"Protocol"16
@"NSString"16@0:8
v28@0:8@16B24
v40@0:8@16@24@32
v24@0:8@"NSUserActivity"16
v28@0:8@"NSUserActivity"16B24
v40@0:8@"NSUserActivity"16@"NSString"24@"NSString"32
v40@0:8@"NSUserActivity"16@"NSURL"24@"NSURL"32
v32@0:8@"NSUserActivity"16@"NSString"24
v32@0:8@"NSUserActivity"16@"NSData"24
v48@0:8Q16Q24B32B36@?40
v44@0:8Q16Q24B32@?36
B20@0:8C16
v24@0:8@?16
@"NSHashTable"
@"NSObject<OS_dispatch_queue>"
@"NSMutableArray"
@56@0:8@16@24@32Q40@?48
v32@0:8@?16@24
v40@0:8@16@?24@32
@"NSObject<OS_dispatch_group>"
@"NSCondition"
I16@0:8
v20@0:8I16
q16@0:8
v24@0:8q16
@"IOSurface"
@"NSData"
C24@0:8@16
v32@0:8@16@?24
v32@0:8@16Q24
d16@0:8
v40@0:8@16@24Q32
v96@0:8@16@24@32@40@48@56@64@72@80@88
d32@0:8@16@24
v52@0:8@16B24B28B32B36B40@?44
v40@0:8@16q24Q32
@24@0:8@"UIScene"16
@"UIScene"16@0:8
v24@0:8@"UIScene"16
@"NSArray"24@0:8@"UIScene"16
v40@0:8@"UIScene"16q24Q32
v24@0:8d16
@"UIButton"
@"NSTimer"
@"UIScene"
v88@0:8@16@24@32@40@48@56@64@72@80
@"UIView"
@(#)PROGRAM:ContextKitExtraction  PROJECT:ContextKit-1
title
bundleIdentifier
type
identifier
extractionSourceClassName
onScreen
Title: %@, Type: %@, Identifier: %@, BundleIdentifier: %@, ExtractionClass: %@, On Screen:%@
WKWebView
PDFView
SFSafariView
text
className
superviewClassNames
sceneIdentifier
fontSize
density
frameInWindow
absoluteOriginOnScreen
Class: %@, FontSize: %.f, Origin:(%.f, %.f), AbsoluteOriginOnScreen:(%.f, %.f), Size:(%.f, %.f), SceneIdentifier: %@, On Screen:%@
SuperViews:%@
Content: %@
absoluteOriginX
abosluteOriginY
width
height
let traversed=null;function retrieveNodeInformation(){traversed=new Set;let e,t=document.createNodeIterator(document.body,NodeFilter.SHOW_ELEMENT),n=[];for(;e=t.nextNode();){if(traversed.has(e))continue;let t=elementBoundingBoxInPage(e),o=t.height>10&&t.width>30,i=elementIsVisibleInViewport(e);if(!o||elementIsHidden(e))continue;let r=[].map.call(e.childNodes,(function(e){return nodeText='',3==e.nodeType?nodeText=e.nodeValue.trim():['A', 'B', 'L', 'U', 'LI'].indexOf(e.nodeName)>=0&&(traversed.add(e),nodeText=e.innerText.trim()),nodeText||void 0})).filter((e=>null!=e)).join(', ').trim(),[d,l]=shouldGetAllText(e);d&&(r=getAllText(e).join(', ').trim());let s=elementOriginPagesFromViewport(t),w=/^(.)
+$/.test(r);r.length>=3&&r.length<350&&!w&&(node={text:r,className:l,left:t.left,right:t.right,top:t.top,bottom:t.bottom,onScreen:i?1:0,pagesFromViewport:s},n.push(node),n.length>250&&(n[0].pagesFromViewPort>node.pagesFromViewPort?n.shift():n.pop()))}return traversed=null,JSON.stringify({nodes:n})}function shouldGetAllText(e){const t=e.getAttribute('itemtype');if(t&&t.includes('schema.org/'))return[!0,t];const n=e.nodeName;return n&&['address'].includes(n.toString().toLowerCase())?[!0,n]:[!1,null]}function getAllText(e){return traversed.add(e),[].flatMap.call(e.childNodes,(function(e){if(e.nodeType!=Node.ELEMENT_NODE||!elementIsHidden(e)){if(e.nodeType==Node.TEXT_NODE){let t=e.nodeValue.trim();return t||void 0}return getAllText(e)}})).filter((e=>!['|',',',void 0].includes(e)))}function elementBoundingBoxInPage(e){let t=e.getBoundingClientRect();return{left:t.left+window.scrollX,right:t.right+window.scrollX,top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,width:t.width,height:t.height}}function elementIsVisibleInViewport(e){const t=e.getBoundingClientRect();if(!(t.top<window.innerHeight&&t.left<window.innerWidth&&t.bottom>0&&t.right>0))return!1;const n={x:t.left+t.width/2,y:t.top+t.height/2};let o=e,i=document.elementFromPoint(n.x,n.y);if(null==i)return!1;do{if(i===o)return!0}while(o=o.parentNode);do{if(i===e)return!0}while(i=i.parentNode);return!1}function elementIsHidden(e){const t=window.getComputedStyle(e);return'none'===t.display||'visible'!==t.visibility||'0'===t.opacity}function elementOriginPagesFromViewport(e){let t=0,n=0;return e.top<window.pageYOffset?t=window.pageYOffset-e.top:e.top>window.pageYOffset+window.innerHeight&&(t=e.top-window.pageYOffset-window.innerHeight),e.left<window.pageXOffset?n=window.pageXOffset-e.left:e.left>window.pageXOffset+window.innerWidth&&(n=e.left-window.pageXOffset-window.innerWidth),t=Math.floor(t/window.innerHeight),n=Math.floor(n/window.innerWidth),Math.max(t,n)}retrieveNodeInformation();
%@%@%@
_UIActivityContentCollectionView
v8@?0
UIContentTextExtractionEnabled
com.apple.contextkit.content-request
SafariViewService
com.apple.mobilesafari
com.apple.springboard
v16@?0@"CKContextDonation"8
v12@?0i8
UAUserActivity
CKContextContentProviderManager Activity Reporting Queue
CKContextGlobals
v20@?0@"CKContextExecutor"8B16
v16@?0@"NSNotification"8
v12@?0B8
com.apple.PaperBoard
com.apple.siri
com.apple.chronod
com.apple.BluetoothUIService
com.apple.BusinessChatViewService
com.apple.CoreAuthUI
com.apple.DragUI.druid
com.apple.InCallService
com.apple.RealityEnvironment
com.apple.RealityChrome
com.apple.RealityControlCenter
com.apple.RealityKeyboard
com.apple.RealityNotifications
com.apple.Sharing.SharingHUDService
com.apple.Spotlight
com.apple.TelephonyUtilities
com.apple.WorkflowKit.ShortcutsViewService
com.wave.wwfe
com.apple.NanoUniverse.AegirPoster
com.apple.WallpaperKit.CollectionsPoster
com.apple.GradientPoster.GradientPosterExtension
com.apple.EmojiPoster.EmojiPosterExtension
com.apple.PhotosUIPrivate.PhotosPosterProvider
com.apple.mobileslideshow.PhotosPosterProvider
com.apple.PridePoster.PridePosterExtension
com.apple.UnityPoster.UnityPosterExtension
com.apple.weather.poster
com.apple.PosterBoard
com.apple.Home.HomeControlService
com.apple.MediaRemoteUI
Unable to find class %s
com.apple.mobilecal
com.apple.Maps
com.apple.contextkit.ProofOfContext
orientation
profile
cameraIntrinsics
IOSurface
iosurface
topicId
CKContextContentProviderUIScene WebView PDF Queue
PDFDocument
CKContextAllowAppSwitcherDebuggingControls
HOHomeViewController
HUDashboardViewController
HUQuickControlContainerViewController
HUServiceDetailsViewController
CKContextExtractionContentWorld
nodes
left
right
bottom
UILabel
UIScrollView
UIView
UIDropShadowView
UITransitionView
UIStackView
@UICollectionView
UITableViewCellContentView
NUIContainerStackView
v16@?0@"CKContextExecutor"8
@distinctUnionOfObjects.%@
self
v40@?0@"NSString"8@"NSString"16@"UIImage"24@"NSArray"32
v16@?0@"NSString"8
v24@?0@"NSString"8@"NSError"16
v24@?0@8@"NSError"16
v24@?0@"UIImage"8@"NSError"16
document.documentElement.outerHTML.toString()
v16@?0@"NSTimer"8
clock.fill
square.and.arrow.up.fill
universal-recents://
SBFluidSwitcherContentView
WKContentWorld
WKSnapshotConfiguration
Donations not allowed from this process. Setup aborted.
Could not get notification state; error:%i
Ignoring outdated notification; delta=%llu seconds
Donating to ContextService after %i ms.
Could not register for extraction; error:%u
Extraction timed out; donations so far: %lu
The client is not allowed to donate due it being a Safari provider
The client %@ is allowed to donate
Preparing donation of user activity for foreground process: %@
The web view is displaying an encrypted PDF.
CKContextContentProviderUIScene is unexpectedly trying to capture from off of the main thread.
The extracted text (length %lu) is too short. Donation from UIKit hierarchy aborted.
The web view is still loading. There should be no attempt to extract content from it without user gesture.
The webview data store is not persistent. We cannot extract from it for privacy reasons without user gesture.
Failed to extract enough text from main webpage frame. Trying to get content from all frames
Error evaluating JavaScript for node extraction: %@
Error parsing node information to JSON dictionary: %@
Creating the bespoke extraction component.
CKContextContentProviderComponent is unexpectedly trying to capture from off of the main thread.
There is no view to extract from
There are no descendants on the view provided for extraction.
Extracting from a WKWebView
Marking the executor as incomplete
Trying to get bounding boxes by injecting Javascript into WKWebView
softlink:r:path:/System/Library/PrivateFrameworks/ContextKit.framework/ContextKit
softlink:r:path:/System/Library/Frameworks/PDFKit.framework/PDFKit
softlink:r:path:/System/Library/Frameworks/WebKit.framework/WebKit
softlink:r:path:/System/Library/Frameworks/WebKit.framework/WebKit
CKContextExtractionItem
NSSecureCoding
NSCoding
NSCopying
CKContextExtractionUtil
CKContextUIClasses
CKContextUIElement
CKContextSharedExtractionHelper
CKContextContentProviderManager
NSUserActivityObserver
NSObject
CKContextExecutor
CKContextImageSource
CKContextItem
CKContextContentProvider
CKContextContentProviderUIScene
_UISceneComponentProviding
CKContextContentProviderComponent
containsString:
currentSelection
activateConstraints:
whiteColor
lockWithOptions:seed:
allocWithZone:
evaluateJavaScript:inFrame:inContentWorld:completionHandler:
setAssociatedUserActivity:
substringWithRange:
bounds
setRemoteProcesses:
numberWithBool:
setWithArray:
initWithUserActivity:
evaluateJavaScript:completionHandler:
currentPage
absoluteString
allObjects
length
subarrayWithRange:
null
isOpaque
websiteDataStore
pageCount
containsObject:
setUiElements:
leadingAnchor
initWithUTF8String:
heightAnchor
boolValue
constraintEqualToConstant:
setRect:
boolForKey:
removeObject:
timeIntervalSinceNow
countByEnumeratingWithState:objects:count:
_dataForDisplayedPDF
_visibleWindows
pageAtIndex:
stringWithFormat:
encodeObject:forKey:
screen
nonce
setRawHTML:
defaultCenter
removeAllObjects
constraintEqualToAnchor:
setTranslatesAutoresizingMaskIntoConstraints:
items
count
isMainThread
scheduledTimerWithTimeInterval:repeats:block:
stringByTrimmingCharactersInSet:
_convertPointFromContentsToView:
addSubview:
encodeInteger:forKey:
nextResponder
hasPrefix:
URLWithString:
weakObjectsHashTable
decodeObjectOfClass:forKey:
remoteProcesses
isLoading
copy
CGImage
configuration
setExtractionItems:
newlineCharacterSet
stringByReplacingMatchesInString:options:range:withTemplate:
encodeFloat:forKey:
wait
JSONObjectWithData:options:error:
initWithProperties:
decodeIntegerForKey:
coordinateSpace
objectForKeyedSubscript:
isValid
regularExpressionWithPattern:options:error:
isHidden
componentsSeparatedByString:
encodeBool:forKey:
takeSnapshotWithConfiguration:completionHandler:
stringByAppendingString:
decodeIntForKey:
addObserverForName:object:queue:usingBlock:
valueWithCGPoint:
worldWithName:
UTF8String
componentsSeparatedByCharactersInSet:
setTintColor:
convertRect:toView:
setDebugUrlString:
drawViewHierarchyInRect:afterScreenUpdates:
valueForKeyPath:
string
objectForInfoDictionaryKey:
isEqualToString:
presentViewController:animated:completion:
initWithDonorBundleIdentifier:
systemImageNamed:
decodeFloatForKey:
scale
_getContentsOfAllFramesAsStringWithCompletionHandler:
standardUserDefaults
convertPoint:toCoordinateSpace:
doubleValue
addObjectsFromArray:
frame
setObject:forKeyedSubscript:
setDebugText:
rootViewController
windowScene
arrayWithObjects:count:
componentsJoinedByString:
numberWithUnsignedInteger:
initWithData:
systemButtonWithImage:target:action:
unsignedIntValue
_getContentsAsStringWithCompletionHandler:
window
mainScreen
decodeBoolForKey:
UUIDString
prepareForDonationWithCompletionHandler:
setNonce:
trailingAnchor
addObject:
isEligibleForPrediction
_isDisplayingPDF
size
numberWithUnsignedInt:
donate
clipsToBounds
decodeArrayOfObjectsOfClass:forKey:
widthAnchor
mainBundle
array
reverseObjectEnumerator
pointSize
addItem:
superview
setLeadImage:
topAnchor
signal
numberWithFloat:
dataUsingEncoding:
dictionaryWithObjects:forKeys:count:
initWithCapacity:
isPersistent
alpha
setSnapshot:
invalidate
initWithActivityItems:applicationActivities:
activationState
subviews
CGPointValue
whitespaceAndNewlineCharacterSet
numberWithDouble:
init
supportsSecureCoding
encodeWithCoder:
initWithCoder:
TB,R
copyWithZone:
initWithTitle:type:bundleIdentifier:
isEqual:
hash
description
toJSONSerializableDictionary
title
setTitle:
type
setType:
bundleIdentifier
setBundleIdentifier:
identifier
setIdentifier:
extractionSourceClassName
setExtractionSourceClassName:
isOnScreen
setOnScreen:
.cxx_destruct
_onScreen
_title
_type
_bundleIdentifier
_identifier
_extractionSourceClassName
T@"NSString",C,N,V_title
TQ,N,V_type
T@"NSString",C,N,V_bundleIdentifier
T@"NSString",C,N,V_identifier
T@"NSString",C,N,V_extractionSourceClassName
onScreen
TB,N,GisOnScreen,V_onScreen
_renderImageToSurfaceWithImage:
renderLeadImage:toDonationItem:
renderSnapshot:toDonationItem:
lookupClasses
isWKWebView:
isPDFView:
isSFSafariView:
initWithText:className:
compareByPosition:
text
setText:
className
setClassName:
superviewClassNames
setSuperviewClassNames:
sceneIdentifier
setSceneIdentifier:
fontSize
setFontSize:
density
setDensity:
frameInWindow
setFrameInWindow:
absoluteOriginOnScreen
setAbsoluteOriginOnScreen:
_fontSize
_density
_text
_className
_superviewClassNames
_sceneIdentifier
_absoluteOriginOnScreen
_frameInWindow
T@"NSString",&,N,V_text
T@"NSString",&,N,V_className
T@"NSArray",&,N,V_superviewClassNames
T@"NSString",&,N,V_sceneIdentifier
Tf,N,V_fontSize
Tf,N,V_density
T{CGRect={CGPoint=dd}{CGSize=dd}},N,V_frameInWindow
T{CGPoint=dd},N,V_absoluteOriginOnScreen
image
webPageNodeExtractionJavaScript
blocksFromText:
textBlockLooksLikeAListWithText:
descendantsRelevantForContentExtractionFromView:intoArray:
bestContentStringForWebViewUIElements:andTitle:
_isRelevantForExtractionWithView:
bestImageForView:
addUserActivityObserver:
_unassociatedWindowSceneForScreen:create:
sharedManager
optionsForControlCode:
isSpringBoard
isSafariContentProvider
controlCodeForNonce:
_observeApplicationStateNotifications
class
self
performSelector:
performSelector:withObject:
performSelector:withObject:withObject:
isProxy
isKindOfClass:
isMemberOfClass:
conformsToProtocol:
respondsToSelector:
retain
release
autorelease
retainCount
zone
superclass
debugDescription
TQ,R
T#,R
T@"NSString",R,C
userActivityWasCreated:
userActivityWillBeDestroyed:
userActivityWasInvalidated:
userActivityWillBecomeCurrent:current:
userActivityDidBecomeCurrent:current:
userActivityWasMadeDirty:
userActivityPersistentIdentifierWasChanged:persistentIdentifier:previousValue:
userActivityTargetContentIdentifierWasChanged:targetContentIdentifier:previousValue:
userActivityWebpageURLWasChanged:webpageURL:previousValue:
userActivityWillSynchronize:
userActivityWasSynchronized:
userActivityPayloadWasChanged:payloadIdentifier:
userActivityWasSerialized:archived:
providerCount
addProvider:
removeProvider:
_loadContextKitIfNecessaryWithExecutor:
_prepareDonationWithNonce:options:isRecentsCapture:requiringMainQueue:andReply:
_prepareDonationWithNonce:options:isRecentsCapture:andReply:
_isDonationAllowedWithControlCode:
scheduleUserActivityRecordingWithUserActivity:
_prepareAndExtractContentForUserActivity:bundleIdentifier:
_prepareAndDonateUserActivity:
_formContextUserActivityFromUserActivity:
_queueActivityForReporting:
_hasQueuedForReportingActivity:
_dequeueActivityForReporting:
_isActivityReportingAllowedForCurrentBundleIdentifier:
_hasForegroundActiveContentWithReply:
_providers
_activityReportingQueue
_userActivitiesQueuedForReporting
dealloc
_awaitCompletion
initWithContext:workItemQueue:completionQueue:timeoutAfter:completionHandler:
markIncomplete
markReady
markReadyAndAwaitCompletion
addWorkItem:
addWorkItem:toQueue:
addWorkItem:withContext:
addWorkItemToQueue:withWorkItem:andContext:
done
context
_workItemQueue
_completionQueue
_group
_timeoutAfter
_completionCondition
_completionHandler
_done
_context
TAB,R,V_done
T@,R,W,N,V_context
imageSourceForUIImage:
initWithIOSurface:
initWithIOSurface:cameraIntrinsics:
ioSurface
setIoSurface:
cameraIntrinsics
setCameraIntrinsics:
orientation
setOrientation:
profile
setProfile:
_orientation
_ioSurface
_cameraIntrinsics
_profile
T@"IOSurface",&,N,V_ioSurface
T@"NSData",&,N,V_cameraIntrinsics
TI,N,V_orientation
Tq,N,V_profile
topicId
setTopicId:
_topicId
T@"NSString",C,N,V_topicId
controlCodeForExecutor:
handlePDFView:withExecutor:
extractContentFromWebViewPDFData:withCompletionHandler:
extractUsingExecutor:
extractUsingExecutor:withOptions:
timeout
font
textContentType
isSecureTextEntry
attributedText
accessibilityLabel
component
delegate
dataDetectorElement
scannerResult
value
room
name
uniqueIdentifier
home
item
accessory
service
_didSelectRecentsControl:
_didSelectDebugControl:
openURL:
initialize
extractFromScene:usingExecutor:withOptions:
_descendantsRelevantForContentExtractionFromView:intoArray:
_descendantsRelevantForContentExtractionFromWindow:
_allViewControllersFromUIViews:
_firstAvailableUIViewControllerForUIView:
_donateContentsOfWindow:usingExecutor:withOptions:
_getNotableSuperviewClassNamesForView:
_donateText:withTitle:debugText:debugUrlString:rawHTML:leadImage:snapshot:uiElements:extractionItems:usingContextFromExecutor:
_isSensitiveTextContentType:
_fontSizeOfView:usingExecutor:
_bestVisibleStringForView:usingExecutor:
_extractItemsFromViewControllers:
_UIElementsForWebViewContentString:
_bestContentStringForWebViewUIElements:andTitle:
_handleWKWebView:withExecutor:
_extractContentFromWebView:includingSnapshot:includingUIBoundingBox:ignoreViewTextLengthRequirements:ignoreViewCountCap:includeRawHTML:withCompletionHandler:
initWithScene:
_scene
_setScene:
_settingsDiffActionsForScene:
_actionHandlersForScene:
_actionRespondersForScene:
_scene:willTransitionToActivationState:withReasonsMask:
_scene:didTransitionFromActivationState:withReasonsMask:
_sceneWillInvalidate:
T@"UIScene",W,N,G_scene,S_setScene:
_determineIfDebuggingControlsShouldBeAllowed
_shouldInstallAppSwitcherControls
_installDebuggingControlsIfApplicable
_setUpDebuggingControlsIfPossibleAfterDelay:
_installRecentsButton
_installDebuggingButton
_containerViewForDebugButtons
_descendantsRelevantForDebugControls:
_debugButton
_recentsButton
_allowAppSwitcherControls
_toolInstallationTimer
__scene
T@"UIScene",W,N,G_scene,S_setScene:,V__scene
_donateContentsOfParentView:usingExecutor:withOptions:
_decendantsRelevantForExtractionFromParentView:
_donateText:withTitle:debugText:debugUrlString:rawHTML:leadImage:snapshot:uiElements:usingContextFromExecutor:
_UIElementsForWebViewContentString:withSceneIdentifier:
view
setView:
_view
T@"UIView",W,N,SsetView:,V_view
B16@0:8
v24@0:8@16
@24@0:8@16
v24@0:8@"NSCoder"16
@24@0:8@"NSCoder"16
@24@0:8^{_NSZone=}16
@40@0:8@16Q24@32
B24@0:8@16
Q16@0:8
@16@0:8
v24@0:8Q16
v20@0:8B16
v16@0:8
@"NSString"
v32@0:8@16@24
@32@0:8@16@24
q24@0:8@16
f16@0:8
v20@0:8f16
{CGRect={CGPoint=dd}{CGSize=dd}}16@0:8
v48@0:8{CGRect={CGPoint=dd}{CGSize=dd}}16
{CGPoint=dd}16@0:8
v32@0:8{CGPoint=dd}16
@"NSArray"
{CGPoint="x"d"y"d}
{CGRect="origin"{CGPoint="x"d"y"d}"size"{CGSize="width"d"height"d}}
Q20@0:8C16
C24@0:8Q16
#16@0:8
@24@0:8:16
@32@0:8:16@24
@40@0:8:16@24@32
B24@0:8#16
B24@0:8:16
Vv16@0:8
^{_NSZone=}16@0:8
B24@0:8@"Protocol"16
@"NSString"16@0:8
v28@0:8@16B24
v40@0:8@16@24@32
v24@0:8@"NSUserActivity"16
v28@0:8@"NSUserActivity"16B24
v40@0:8@"NSUserActivity"16@"NSString"24@"NSString"32
v40@0:8@"NSUserActivity"16@"NSURL"24@"NSURL"32
v32@0:8@"NSUserActivity"16@"NSString"24
v32@0:8@"NSUserActivity"16@"NSData"24
v48@0:8Q16Q24B32B36@?40
v44@0:8Q16Q24B32@?36
B20@0:8C16
v24@0:8@?16
@"NSHashTable"
@"NSObject<OS_dispatch_queue>"
@"NSMutableArray"
@56@0:8@16@24@32Q40@?48
v32@0:8@?16@24
v40@0:8@16@?24@32
@"NSObject<OS_dispatch_group>"
@"NSCondition"
I16@0:8
v20@0:8I16
q16@0:8
v24@0:8q16
@"IOSurface"
@"NSData"
C24@0:8@16
v32@0:8@16@?24
v32@0:8@16Q24
d16@0:8
v40@0:8@16@24Q32
v96@0:8@16@24@32@40@48@56@64@72@80@88
d32@0:8@16@24
v52@0:8@16B24B28B32B36B40@?44
v40@0:8@16q24Q32
@24@0:8@"UIScene"16
@"UIScene"16@0:8
v24@0:8@"UIScene"16
@"NSArray"24@0:8@"UIScene"16
v40@0:8@"UIScene"16q24Q32
v24@0:8d16
@"UIButton"
@"NSTimer"
@"UIScene"
v88@0:8@16@24@32@40@48@56@64@72@80
@"UIView"
