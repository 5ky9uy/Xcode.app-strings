@(#)PROGRAM:ContextKitExtraction  PROJECT:ContextKit-1
title
bundleIdentifier
type
identifier
extractionSourceClassName
onScreen
Title: %@, Type: %@, Identifier: %@, BundleIdentifier: %@, ExtractionClass: %@, On Screen:%@
WKWebView
PDFView
SFSafariView
text
className
superviewClassNames
sceneIdentifier
fontSize
density
frameInWindow
absoluteOriginOnScreen
Class: %@, FontSize: %.f, Origin:(%.f, %.f), AbsoluteOriginOnScreen:(%.f, %.f), Size:(%.f, %.f), SceneIdentifier: %@, On Screen:%@
SuperViews:%@
Content: %@
absoluteOriginX
abosluteOriginY
width
height
let traversed=null;function retrieveNodeInformation(){traversed=new Set;let e,t=document.createNodeIterator(document.body,NodeFilter.SHOW_ELEMENT),n=[];for(;e=t.nextNode();){if(traversed.has(e))continue;let t=elementBoundingBoxInPage(e),o=t.height>10&&t.width>30,i=elementIsVisibleInViewport(e);if(!o||elementIsHidden(e))continue;let r=[].map.call(e.childNodes,(function(e){return nodeText='',3==e.nodeType?nodeText=e.nodeValue.trim():['A', 'B', 'L', 'U', 'LI'].indexOf(e.nodeName)>=0&&(traversed.add(e),nodeText=e.innerText.trim()),nodeText||void 0})).filter((e=>null!=e)).join(', ').trim(),[d,l]=shouldGetAllText(e);d&&(r=getAllText(e).join(', ').trim());let s=elementOriginPagesFromViewport(t),w=/^(.)
+$/.test(r);r.length>=3&&r.length<350&&!w&&(node={text:r,className:l,left:t.left,right:t.right,top:t.top,bottom:t.bottom,onScreen:i?1:0,pagesFromViewport:s},n.push(node),n.length>250&&(n[0].pagesFromViewPort>node.pagesFromViewPort?n.shift():n.pop()))}return traversed=null,JSON.stringify({nodes:n})}function shouldGetAllText(e){const t=e.getAttribute('itemtype');if(t&&t.includes('schema.org/'))return[!0,t];const n=e.nodeName;return n&&['address'].includes(n.toString().toLowerCase())?[!0,n]:[!1,null]}function getAllText(e){return traversed.add(e),[].flatMap.call(e.childNodes,(function(e){if(e.nodeType!=Node.ELEMENT_NODE||!elementIsHidden(e)){if(e.nodeType==Node.TEXT_NODE){let t=e.nodeValue.trim();return t||void 0}return getAllText(e)}})).filter((e=>!['|',',',void 0].includes(e)))}function elementBoundingBoxInPage(e){let t=e.getBoundingClientRect();return{left:t.left+window.scrollX,right:t.right+window.scrollX,top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,width:t.width,height:t.height}}function elementIsVisibleInViewport(e){const t=e.getBoundingClientRect();if(!(t.top<window.innerHeight&&t.left<window.innerWidth&&t.bottom>0&&t.right>0))return!1;const n={x:t.left+t.width/2,y:t.top+t.height/2};let o=e,i=document.elementFromPoint(n.x,n.y);if(null==i)return!1;do{if(i===o)return!0}while(o=o.parentNode);do{if(i===e)return!0}while(i=i.parentNode);return!1}function elementIsHidden(e){const t=window.getComputedStyle(e);return'none'===t.display||'visible'!==t.visibility||'0'===t.opacity}function elementOriginPagesFromViewport(e){let t=0,n=0;return e.top<window.pageYOffset?t=window.pageYOffset-e.top:e.top>window.pageYOffset+window.innerHeight&&(t=e.top-window.pageYOffset-window.innerHeight),e.left<window.pageXOffset?n=window.pageXOffset-e.left:e.left>window.pageXOffset+window.innerWidth&&(n=e.left-window.pageXOffset-window.innerWidth),t=Math.floor(t/window.innerHeight),n=Math.floor(n/window.innerWidth),Math.max(t,n)}retrieveNodeInformation();
%@%@%@
_UIActivityContentCollectionView
v8@?0
UIContentTextExtractionEnabled
com.apple.contextkit.content-request
SafariViewService
com.apple.mobilesafari
com.apple.springboard
v16@?0@"CKContextDonation"8
v12@?0i8
UAUserActivity
CKContextContentProviderManager Activity Reporting Queue
CKContextGlobals
v20@?0@"CKContextExecutor"8B16
v16@?0@"NSNotification"8
v12@?0B8
v24@?0@"NSString"8^B16
com.apple.PaperBoard
com.apple.siri
com.apple.chronod
com.apple.BluetoothUIService
com.apple.BusinessChatViewService
com.apple.CoreAuthUI
com.apple.DragUI.druid
com.apple.InCallService
com.apple.RealityEnvironment
com.apple.RealityChrome
com.apple.RealityControlCenter
com.apple.RealityKeyboard
com.apple.RealityNotifications
com.apple.Sharing.SharingHUDService
com.apple.Spotlight
com.apple.TelephonyUtilities
com.apple.WorkflowKit.ShortcutsViewService
com.wave.wwfe
com.apple.NanoUniverse.AegirPoster
com.apple.WallpaperKit.CollectionsPoster
com.apple.GradientPoster.GradientPosterExtension
com.apple.EmojiPoster.EmojiPosterExtension
com.apple.PhotosUIPrivate.PhotosPosterProvider
com.apple.mobileslideshow.PhotosPosterProvider
com.apple.PridePoster.PridePosterExtension
com.apple.UnityPoster.UnityPosterExtension
com.apple.weather.poster
com.apple.PassbookUIService
com.apple.PosterBoard
com.apple.Home.HomeControlService
com.apple.MediaRemoteUI
Unable to find class %s
com.apple.mobilecal
com.apple.Maps
com.apple.contextkit.ProofOfContext
com.apple.mobilenotes
com.apple.mobileslideshow
orientation
profile
cameraIntrinsics
IOSurface
iosurface
topicId
CKContextContentProviderUIScene WebView PDF Queue
PDFDocument
CKContextAllowAppSwitcherDebuggingControls
HOHomeViewController
HUDashboardViewController
HUQuickControlContainerViewController
HUServiceDetailsViewController
CKContextExtractionContentWorld
nodes
left
right
bottom
UILabel
UIScrollView
UIView
UIDropShadowView
UITransitionView
UIStackView
@UICollectionView
UITableViewCellContentView
NUIContainerStackView
RxTableViewDelegateProxy
RxCollectionViewDelegateProxy
v16@?0@"CKContextExecutor"8
@distinctUnionOfObjects.%@
self
v40@?0@"NSString"8@"NSString"16@"UIImage"24@"NSArray"32
v16@?0@"NSString"8
v24@?0@"NSString"8@"NSError"16
v24@?0@8@"NSError"16
v24@?0@"UIImage"8@"NSError"16
document.documentElement.outerHTML.toString()
v16@?0@"NSTimer"8
clock.fill
square.and.arrow.up.fill
universal-recents://
SBFluidSwitcherContentView
WKContentWorld
WKSnapshotConfiguration
v32@?0@"NSString"8@"UIImage"16@"NSArray"24
Donations not allowed from this process. Setup aborted.
Could not get notification state; error:%i
Ignoring outdated notification; delta=%llu seconds
Donating to ContextService after %i ms.
Could not register for extraction; error:%u
Preparing a donation...
Extraction timed out; donations so far: %lu
The client is not allowed to donate due it being a Safari provider
The client %@ is allowed to donate
Preparing donation of user activity for foreground process: %@
The web view is displaying an encrypted PDF.
CKContextContentProviderUIScene is unexpectedly trying to capture from off of the main thread.
The extracted text (length %lu) is too short. Donation from UIKit hierarchy aborted.
The web view is still loading. There should be no attempt to extract content from it without user gesture.
The webview data store is not persistent. We cannot extract from it for privacy reasons without user gesture.
Failed to extract enough text from main webpage frame. Trying to get content from all frames
Error evaluating JavaScript for node extraction: %@
Error parsing node information to JSON dictionary: %@
Creating the bespoke extraction component.
CKContextContentProviderComponent is unexpectedly trying to capture from off of the main thread.
There is no view to extract from
There are no descendants on the view provided for extraction.
Extracting from a WKWebView
Marking the executor as incomplete
Trying to get bounding boxes by injecting Javascript into WKWebView
Evaluated after %f seconds
softlink:r:path:/System/Library/PrivateFrameworks/ContextKit.framework/ContextKit
softlink:r:path:/System/Library/Frameworks/PDFKit.framework/PDFKit
softlink:r:path:/System/Library/Frameworks/WebKit.framework/WebKit
softlink:r:path:/System/Library/Frameworks/WebKit.framework/WebKit
CKContextExtractionItem
NSSecureCoding
NSCoding
NSCopying
CKContextExtractionUtil
CKContextUIClasses
CKContextUIElement
CKContextSharedExtractionHelper
CKContextContentProviderManager
NSUserActivityObserver
NSObject
CKContextExecutor
CKContextImageSource
CKContextItem
CKContextContentProvider
CKContextContentProviderUIScene
_UISceneComponentProviding
CKContextContentProviderComponent
CGImage
CGPointValue
Tf,N,V_fontSize
T#,R
__scene
T@"NSArray",&,N,V_superviewClassNames
_hasQueuedForReportingActivity:
T@"NSString",&,N,V_className
_visibleWindows
T@"NSString",&,N,V_text
blocksFromText:
T@"NSString",C,N,V_extractionSourceClassName
containsString:
T@"NSString",C,N,V_title
convertPoint:toCoordinateSpace:
T@"NSString",R,C
dealloc
T@"UIScene",W,N,G_scene,S_setScene:,V__scene
isProxy
TAB,R,V_done
isValid
TB,R
profile
TQ,N,V_type
remoteProcesses
Tf,N,V_density
renderLeadImage:toDonationItem:
T{CGPoint=dd},N,V_absoluteOriginOnScreen
service
URLWithString:
textContentType
UUIDString
topicId
_UIElementsForWebViewContentString:withSceneIdentifier:
.cxx_destruct
T@"UIView",W,N,SsetView:,V_view
JSONObjectWithData:options:error:
T@"IOSurface",&,N,V_ioSurface
_allViewControllersFromUIViews:
T@"NSData",&,N,V_cameraIntrinsics
_renderImageToSurfaceWithImage:
T@"NSString",&,N,V_sceneIdentifier
activationState
T@"NSString",C,N,V_bundleIdentifier
containsObject:
T@"NSString",C,N,V_identifier
context
T@"NSString",C,N,V_topicId
coordinateSpace
T@"UIScene",W,N,G_scene,S_setScene:
density
T@,R,W,N,V_context
isSFSafariView:
TB,N,GisOnScreen,V_onScreen
numberWithBool:
TI,N,V_orientation
release
TQ,R
removeProvider:
Tq,N,V_profile
sceneIdentifier
T{CGRect={CGPoint=dd}{CGSize=dd}},N,V_frameInWindow
setOrientation:
UTF8String
timeout
_UIElementsForWebViewContentString:
webPageNodeExtractionJavaScript
_absoluteOriginOnScreen
_actionHandlersForScene:
_actionRespondersForScene:
_activityReportingQueue
_allowAppSwitcherControls
_awaitCompletion
_bestContentStringForWebViewUIElements:andTitle:
_bestVisibleStringForView:usingExecutor:
_bundleIdentifier
_cameraIntrinsics
_className
_completionCondition
_completionHandler
_completionQueue
_containerViewForDebugButtons
_context
_convertPointFromContentsToView:
_dataForDisplayedPDF
_debugButton
_decendantsRelevantForExtractionFromParentView:
_density
_dequeueActivityForReporting:
_descendantsRelevantForContentExtractionFromView:intoArray:
_descendantsRelevantForContentExtractionFromWindow:
_descendantsRelevantForDebugControls:
_determineIfDebuggingControlsShouldBeAllowed
_didSelectDebugControl:
_didSelectRecentsControl:
_donateContentsOfParentView:usingExecutor:withOptions:
_donateContentsOfWindow:usingExecutor:withOptions:
_donateText:withTitle:debugText:debugUrlString:leadImage:snapshot:uiElements:usingContextFromExecutor:
_donateText:withTitle:debugText:debugUrlString:rawHTML:leadImage:snapshot:uiElements:extractionItems:usingContextFromExecutor:
_done
_extractContentFromWebView:includingSnapshot:includingUIBoundingBox:ignoreViewTextLengthRequirements:ignoreViewCountCap:includeRawHTML:withCompletionHandler:
_extractContentFromWebView:includingUIBoundingBox:withCompletionHandler:
_extractItemsFromViewControllers:
_extractionSourceClassName
_firstAvailableUIViewControllerForUIView:
_fontSize
_fontSizeOfView:usingExecutor:
_formContextUserActivityFromUserActivity:
_frameInWindow
_getContentsAsStringWithCompletionHandler:
_getContentsOfAllFramesAsStringWithCompletionHandler:
_getNotableSuperviewClassNamesForView:
_group
_handleWKWebView:withExecutor:
_hasForegroundActiveContentWithReply:
_identifier
_installDebuggingButton
_installDebuggingControlsIfApplicable
_installRecentsButton
_ioSurface
_isActivityReportingAllowedForCurrentBundleIdentifier:
_isDisplayingPDF
_isDonationAllowedWithControlCode:
_isRelevantForExtractionWithView:
_isSensitiveTextContentType:
_loadContextKitIfNecessaryWithExecutor:
_observeApplicationStateNotifications
_onScreen
_orientation
_prepareAndDonateUserActivity:
_prepareAndExtractContentForUserActivity:bundleIdentifier:
_prepareDonationWithNonce:options:isRecentsCapture:andReply:
_prepareDonationWithNonce:options:isRecentsCapture:requiringMainQueue:andReply:
_profile
_providers
_queueActivityForReporting:
_recentsButton
_scene
_scene:didTransitionFromActivationState:withReasonsMask:
_scene:willTransitionToActivationState:withReasonsMask:
_sceneIdentifier
_sceneWillInvalidate:
_setScene:
_setUpDebuggingControlsIfPossibleAfterDelay:
_settingsDiffActionsForScene:
_shouldInstallAppSwitcherControls
_superviewClassNames
_text
_timeoutAfter
_title
_toolInstallationTimer
_topicId
_type
_unassociatedWindowSceneForScreen:create:
_userActivitiesQueuedForReporting
_view
_workItemQueue
absoluteOriginOnScreen
absoluteString
accessibilityLabel
accessory
activateConstraints:
addItem:
addObject:
addObjectsFromArray:
addObserverForName:object:queue:usingBlock:
addProvider:
addSubview:
addUserActivityObserver:
addWorkItem:
addWorkItem:toQueue:
addWorkItem:withContext:
addWorkItemToQueue:withWorkItem:andContext:
allObjects
allocWithZone:
alpha
array
arrayWithObjects:count:
attributedText
autorelease
bestContentStringForWebViewUIElements:andTitle:
bestImageForView:
boolForKey:
boolValue
bounds
bundleIdentifier
cameraIntrinsics
class
className
clipsToBounds
compareByPosition:
component
componentsJoinedByString:
componentsSeparatedByCharactersInSet:
componentsSeparatedByString:
configuration
conformsToProtocol:
constraintEqualToAnchor:
constraintEqualToConstant:
controlCodeForExecutor:
controlCodeForNonce:
convertRect:toView:
copy
copyWithZone:
count
countByEnumeratingWithState:objects:count:
currentPage
currentSelection
dataDetectorElement
dataUsingEncoding:
date
debugDescription
decodeArrayOfObjectsOfClass:forKey:
decodeBoolForKey:
decodeFloatForKey:
decodeIntForKey:
decodeIntegerForKey:
decodeObjectOfClass:forKey:
defaultCenter
delegate
descendantsRelevantForContentExtractionFromView:intoArray:
description
dictionaryWithObjects:forKeys:count:
donate
done
doubleValue
drawViewHierarchyInRect:afterScreenUpdates:
elementIsOnScreenWithView:window:
encodeBool:forKey:
encodeFloat:forKey:
encodeInteger:forKey:
encodeObject:forKey:
encodeWithCoder:
enumerateObjectsUsingBlock:
evaluateJavaScript:completionHandler:
evaluateJavaScript:inFrame:inContentWorld:completionHandler:
extractContentFromWebViewPDFData:withCompletionHandler:
extractFromScene:usingExecutor:withOptions:
extractUsingExecutor:
extractUsingExecutor:withOptions:
extractionSourceClassName
font
fontSize
frame
frameInWindow
handlePDFView:withExecutor:
hasPrefix:
hash
heightAnchor
home
identifier
image
imageSourceForUIImage:
init
initWithActivityItems:applicationActivities:
initWithCapacity:
initWithCoder:
initWithContext:workItemQueue:completionQueue:timeoutAfter:completionHandler:
initWithData:
initWithDonorBundleIdentifier:
initWithIOSurface:
initWithIOSurface:cameraIntrinsics:
initWithProperties:
initWithScene:
initWithText:className:
initWithTitle:type:bundleIdentifier:
initWithUTF8String:
initWithUserActivity:
initialize
invalidate
ioSurface
isEligibleForPrediction
isEqual:
isEqualToString:
isHidden
isKindOfClass:
isLoading
isMainThread
isMemberOfClass:
isOnScreen
isOpaque
isPDFView:
isPersistent
isSafariContentProvider
isSecureTextEntry
isSpringBoard
isWKWebView:
item
items
leadingAnchor
length
lockWithOptions:seed:
lookupClasses
mainBundle
mainScreen
markIncomplete
markReady
markReadyAndAwaitCompletion
name
newlineCharacterSet
nextResponder
nonce
null
numberWithDouble:
numberWithFloat:
numberWithUnsignedInt:
numberWithUnsignedInteger:
objectForInfoDictionaryKey:
objectForKeyedSubscript:
onScreen
openURL:
optionsForControlCode:
orientation
pageAtIndex:
pageCount
performSelector:
performSelector:withObject:
performSelector:withObject:withObject:
pointSize
prepareForDonationWithCompletionHandler:
presentViewController:animated:completion:
providerCount
regularExpressionWithPattern:options:error:
removeAllObjects
removeObject:
renderSnapshot:toDonationItem:
respondsToSelector:
retain
retainCount
reverseObjectEnumerator
room
rootViewController
scale
scannerResult
scheduleUserActivityRecordingWithUserActivity:
scheduledTimerWithTimeInterval:repeats:block:
screen
self
setAbsoluteOriginOnScreen:
setAssociatedUserActivity:
setBundleIdentifier:
setCameraIntrinsics:
setClassName:
setDebugText:
setDebugUrlString:
setDensity:
setExtractionItems:
setExtractionSourceClassName:
setFontSize:
setFrameInWindow:
setIdentifier:
setIoSurface:
setLeadImage:
setNonce:
setObject:forKeyedSubscript:
setOnScreen:
setProfile:
setRawHTML:
setRect:
setRemoteProcesses:
setSceneIdentifier:
setSnapshot:
setSuperviewClassNames:
setText:
setTintColor:
setTitle:
setTopicId:
setTranslatesAutoresizingMaskIntoConstraints:
setType:
setUiElements:
setView:
setWithArray:
sharedManager
signal
size
standardUserDefaults
string
stringByAppendingString:
stringByReplacingMatchesInString:options:range:withTemplate:
stringByTrimmingCharactersInSet:
stringWithFormat:
subarrayWithRange:
substringWithRange:
subviews
superclass
superview
superviewClassNames
supportsSecureCoding
systemButtonWithImage:target:action:
systemImageNamed:
takeSnapshotWithConfiguration:completionHandler:
text
textBlockLooksLikeAListWithText:
timeIntervalSinceDate:
timeIntervalSinceNow
title
toJSONSerializableDictionary
topAnchor
trailingAnchor
type
uniqueIdentifier
unsignedIntValue
userActivityDidBecomeCurrent:current:
userActivityPayloadWasChanged:payloadIdentifier:
userActivityPersistentIdentifierWasChanged:persistentIdentifier:previousValue:
userActivityTargetContentIdentifierWasChanged:targetContentIdentifier:previousValue:
userActivityWasCreated:
userActivityWasInvalidated:
userActivityWasMadeDirty:
userActivityWasSerialized:archived:
userActivityWasSynchronized:
userActivityWebpageURLWasChanged:webpageURL:previousValue:
userActivityWillBeDestroyed:
userActivityWillBecomeCurrent:current:
userActivityWillSynchronize:
value
valueForKeyPath:
valueWithCGPoint:
view
wait
weakObjectsHashTable
websiteDataStore
whiteColor
whitespaceAndNewlineCharacterSet
widthAnchor
window
windowScene
worldWithName:
zone
B16@0:8
v24@0:8@16
@24@0:8@16
v24@0:8@"NSCoder"16
@24@0:8@"NSCoder"16
@24@0:8^{_NSZone=}16
@40@0:8@16Q24@32
B24@0:8@16
Q16@0:8
@16@0:8
v24@0:8Q16
v20@0:8B16
v16@0:8
@"NSString"
v32@0:8@16@24
@32@0:8@16@24
q24@0:8@16
f16@0:8
v20@0:8f16
{CGRect={CGPoint=dd}{CGSize=dd}}16@0:8
v48@0:8{CGRect={CGPoint=dd}{CGSize=dd}}16
{CGPoint=dd}16@0:8
v32@0:8{CGPoint=dd}16
@"NSArray"
{CGPoint="x"d"y"d}
{CGRect="origin"{CGPoint="x"d"y"d}"size"{CGSize="width"d"height"d}}
B32@0:8@16@24
Q20@0:8C16
C24@0:8Q16
#16@0:8
@24@0:8:16
@32@0:8:16@24
@40@0:8:16@24@32
B24@0:8#16
B24@0:8:16
Vv16@0:8
^{_NSZone=}16@0:8
B24@0:8@"Protocol"16
@"NSString"16@0:8
v28@0:8@16B24
v40@0:8@16@24@32
v24@0:8@"NSUserActivity"16
v28@0:8@"NSUserActivity"16B24
v40@0:8@"NSUserActivity"16@"NSString"24@"NSString"32
v40@0:8@"NSUserActivity"16@"NSURL"24@"NSURL"32
v32@0:8@"NSUserActivity"16@"NSString"24
v32@0:8@"NSUserActivity"16@"NSData"24
v48@0:8Q16Q24B32B36@?40
v44@0:8Q16Q24B32@?36
B20@0:8C16
v24@0:8@?16
@"NSHashTable"
@"NSObject<OS_dispatch_queue>"
@"NSMutableArray"
@56@0:8@16@24@32Q40@?48
v32@0:8@?16@24
v40@0:8@16@?24@32
@"NSObject<OS_dispatch_group>"
@"NSCondition"
I16@0:8
v20@0:8I16
q16@0:8
v24@0:8q16
@"IOSurface"
@"NSData"
C24@0:8@16
v32@0:8@16@?24
v32@0:8@16Q24
d16@0:8
v40@0:8@16@24Q32
v96@0:8@16@24@32@40@48@56@64@72@80@88
d32@0:8@16@24
v52@0:8@16B24B28B32B36B40@?44
v40@0:8@16q24Q32
@24@0:8@"UIScene"16
@"UIScene"16@0:8
v24@0:8@"UIScene"16
@"NSArray"24@0:8@"UIScene"16
v40@0:8@"UIScene"16q24Q32
v24@0:8d16
@"UIButton"
@"NSTimer"
@"UIScene"
v80@0:8@16@24@32@40@48@56@64@72
v36@0:8@16B24@?28
@"UIView"
@(#)PROGRAM:ContextKitExtraction  PROJECT:ContextKit-1
title
bundleIdentifier
type
identifier
extractionSourceClassName
onScreen
Title: %@, Type: %@, Identifier: %@, BundleIdentifier: %@, ExtractionClass: %@, On Screen:%@
WKWebView
PDFView
SFSafariView
text
className
superviewClassNames
sceneIdentifier
fontSize
density
frameInWindow
absoluteOriginOnScreen
Class: %@, FontSize: %.f, Origin:(%.f, %.f), AbsoluteOriginOnScreen:(%.f, %.f), Size:(%.f, %.f), SceneIdentifier: %@, On Screen:%@
SuperViews:%@
Content: %@
absoluteOriginX
abosluteOriginY
width
height
let traversed=null;function retrieveNodeInformation(){traversed=new Set;let e,t=document.createNodeIterator(document.body,NodeFilter.SHOW_ELEMENT),n=[];for(;e=t.nextNode();){if(traversed.has(e))continue;let t=elementBoundingBoxInPage(e),o=t.height>10&&t.width>30,i=elementIsVisibleInViewport(e);if(!o||elementIsHidden(e))continue;let r=[].map.call(e.childNodes,(function(e){return nodeText='',3==e.nodeType?nodeText=e.nodeValue.trim():['A', 'B', 'L', 'U', 'LI'].indexOf(e.nodeName)>=0&&(traversed.add(e),nodeText=e.innerText.trim()),nodeText||void 0})).filter((e=>null!=e)).join(', ').trim(),[d,l]=shouldGetAllText(e);d&&(r=getAllText(e).join(', ').trim());let s=elementOriginPagesFromViewport(t),w=/^(.)
+$/.test(r);r.length>=3&&r.length<350&&!w&&(node={text:r,className:l,left:t.left,right:t.right,top:t.top,bottom:t.bottom,onScreen:i?1:0,pagesFromViewport:s},n.push(node),n.length>250&&(n[0].pagesFromViewPort>node.pagesFromViewPort?n.shift():n.pop()))}return traversed=null,JSON.stringify({nodes:n})}function shouldGetAllText(e){const t=e.getAttribute('itemtype');if(t&&t.includes('schema.org/'))return[!0,t];const n=e.nodeName;return n&&['address'].includes(n.toString().toLowerCase())?[!0,n]:[!1,null]}function getAllText(e){return traversed.add(e),[].flatMap.call(e.childNodes,(function(e){if(e.nodeType!=Node.ELEMENT_NODE||!elementIsHidden(e)){if(e.nodeType==Node.TEXT_NODE){let t=e.nodeValue.trim();return t||void 0}return getAllText(e)}})).filter((e=>!['|',',',void 0].includes(e)))}function elementBoundingBoxInPage(e){let t=e.getBoundingClientRect();return{left:t.left+window.scrollX,right:t.right+window.scrollX,top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,width:t.width,height:t.height}}function elementIsVisibleInViewport(e){const t=e.getBoundingClientRect();if(!(t.top<window.innerHeight&&t.left<window.innerWidth&&t.bottom>0&&t.right>0))return!1;const n={x:t.left+t.width/2,y:t.top+t.height/2};let o=e,i=document.elementFromPoint(n.x,n.y);if(null==i)return!1;do{if(i===o)return!0}while(o=o.parentNode);do{if(i===e)return!0}while(i=i.parentNode);return!1}function elementIsHidden(e){const t=window.getComputedStyle(e);return'none'===t.display||'visible'!==t.visibility||'0'===t.opacity}function elementOriginPagesFromViewport(e){let t=0,n=0;return e.top<window.pageYOffset?t=window.pageYOffset-e.top:e.top>window.pageYOffset+window.innerHeight&&(t=e.top-window.pageYOffset-window.innerHeight),e.left<window.pageXOffset?n=window.pageXOffset-e.left:e.left>window.pageXOffset+window.innerWidth&&(n=e.left-window.pageXOffset-window.innerWidth),t=Math.floor(t/window.innerHeight),n=Math.floor(n/window.innerWidth),Math.max(t,n)}retrieveNodeInformation();
%@%@%@
_UIActivityContentCollectionView
v8@?0
UIContentTextExtractionEnabled
com.apple.contextkit.content-request
SafariViewService
com.apple.mobilesafari
com.apple.springboard
v16@?0@"CKContextDonation"8
v12@?0i8
UAUserActivity
CKContextContentProviderManager Activity Reporting Queue
CKContextGlobals
v20@?0@"CKContextExecutor"8B16
v16@?0@"NSNotification"8
v12@?0B8
v24@?0@"NSString"8^B16
com.apple.PaperBoard
com.apple.siri
com.apple.chronod
com.apple.BluetoothUIService
com.apple.BusinessChatViewService
com.apple.CoreAuthUI
com.apple.DragUI.druid
com.apple.InCallService
com.apple.RealityEnvironment
com.apple.RealityChrome
com.apple.RealityControlCenter
com.apple.RealityKeyboard
com.apple.RealityNotifications
com.apple.Sharing.SharingHUDService
com.apple.Spotlight
com.apple.TelephonyUtilities
com.apple.WorkflowKit.ShortcutsViewService
com.wave.wwfe
com.apple.NanoUniverse.AegirPoster
com.apple.WallpaperKit.CollectionsPoster
com.apple.GradientPoster.GradientPosterExtension
com.apple.EmojiPoster.EmojiPosterExtension
com.apple.PhotosUIPrivate.PhotosPosterProvider
com.apple.mobileslideshow.PhotosPosterProvider
com.apple.PridePoster.PridePosterExtension
com.apple.UnityPoster.UnityPosterExtension
com.apple.weather.poster
com.apple.PassbookUIService
com.apple.PosterBoard
com.apple.Home.HomeControlService
com.apple.MediaRemoteUI
Unable to find class %s
com.apple.mobilecal
com.apple.Maps
com.apple.contextkit.ProofOfContext
com.apple.mobilenotes
com.apple.mobileslideshow
orientation
profile
cameraIntrinsics
IOSurface
iosurface
topicId
CKContextContentProviderUIScene WebView PDF Queue
PDFDocument
CKContextAllowAppSwitcherDebuggingControls
HOHomeViewController
HUDashboardViewController
HUQuickControlContainerViewController
HUServiceDetailsViewController
CKContextExtractionContentWorld
nodes
left
right
bottom
UILabel
UIScrollView
UIView
UIDropShadowView
UITransitionView
UIStackView
@UICollectionView
UITableViewCellContentView
NUIContainerStackView
RxTableViewDelegateProxy
RxCollectionViewDelegateProxy
v16@?0@"CKContextExecutor"8
@distinctUnionOfObjects.%@
self
v40@?0@"NSString"8@"NSString"16@"UIImage"24@"NSArray"32
v16@?0@"NSString"8
v24@?0@"NSString"8@"NSError"16
v24@?0@8@"NSError"16
v24@?0@"UIImage"8@"NSError"16
document.documentElement.outerHTML.toString()
v16@?0@"NSTimer"8
clock.fill
square.and.arrow.up.fill
universal-recents://
SBFluidSwitcherContentView
WKContentWorld
WKSnapshotConfiguration
v32@?0@"NSString"8@"UIImage"16@"NSArray"24
Donations not allowed from this process. Setup aborted.
Could not get notification state; error:%i
Ignoring outdated notification; delta=%llu seconds
Donating to ContextService after %i ms.
Could not register for extraction; error:%u
Preparing a donation...
Extraction timed out; donations so far: %lu
The client is not allowed to donate due it being a Safari provider
The client %@ is allowed to donate
Preparing donation of user activity for foreground process: %@
The web view is displaying an encrypted PDF.
CKContextContentProviderUIScene is unexpectedly trying to capture from off of the main thread.
The extracted text (length %lu) is too short. Donation from UIKit hierarchy aborted.
The web view is still loading. There should be no attempt to extract content from it without user gesture.
The webview data store is not persistent. We cannot extract from it for privacy reasons without user gesture.
Failed to extract enough text from main webpage frame. Trying to get content from all frames
Error evaluating JavaScript for node extraction: %@
Error parsing node information to JSON dictionary: %@
Creating the bespoke extraction component.
CKContextContentProviderComponent is unexpectedly trying to capture from off of the main thread.
There is no view to extract from
There are no descendants on the view provided for extraction.
Extracting from a WKWebView
Marking the executor as incomplete
Trying to get bounding boxes by injecting Javascript into WKWebView
Evaluated after %f seconds
softlink:r:path:/System/Library/PrivateFrameworks/ContextKit.framework/ContextKit
softlink:r:path:/System/Library/Frameworks/PDFKit.framework/PDFKit
softlink:r:path:/System/Library/Frameworks/WebKit.framework/WebKit
softlink:r:path:/System/Library/Frameworks/WebKit.framework/WebKit
CKContextExtractionItem
NSSecureCoding
NSCoding
NSCopying
CKContextExtractionUtil
CKContextUIClasses
CKContextUIElement
CKContextSharedExtractionHelper
CKContextContentProviderManager
NSUserActivityObserver
NSObject
CKContextExecutor
CKContextImageSource
CKContextItem
CKContextContentProvider
CKContextContentProviderUIScene
_UISceneComponentProviding
CKContextContentProviderComponent
CGImage
CGPointValue
Tf,N,V_fontSize
T#,R
__scene
T@"NSArray",&,N,V_superviewClassNames
_hasQueuedForReportingActivity:
T@"NSString",&,N,V_className
_visibleWindows
T@"NSString",&,N,V_text
blocksFromText:
T@"NSString",C,N,V_extractionSourceClassName
containsString:
T@"NSString",C,N,V_title
convertPoint:toCoordinateSpace:
T@"NSString",R,C
dealloc
T@"UIScene",W,N,G_scene,S_setScene:,V__scene
isProxy
TAB,R,V_done
isValid
TB,R
profile
TQ,N,V_type
remoteProcesses
Tf,N,V_density
renderLeadImage:toDonationItem:
T{CGPoint=dd},N,V_absoluteOriginOnScreen
service
URLWithString:
textContentType
UUIDString
topicId
_UIElementsForWebViewContentString:withSceneIdentifier:
.cxx_destruct
T@"UIView",W,N,SsetView:,V_view
JSONObjectWithData:options:error:
T@"IOSurface",&,N,V_ioSurface
_allViewControllersFromUIViews:
T@"NSData",&,N,V_cameraIntrinsics
_renderImageToSurfaceWithImage:
T@"NSString",&,N,V_sceneIdentifier
activationState
T@"NSString",C,N,V_bundleIdentifier
containsObject:
T@"NSString",C,N,V_identifier
context
T@"NSString",C,N,V_topicId
coordinateSpace
T@"UIScene",W,N,G_scene,S_setScene:
density
T@,R,W,N,V_context
isSFSafariView:
TB,N,GisOnScreen,V_onScreen
numberWithBool:
TI,N,V_orientation
release
TQ,R
removeProvider:
Tq,N,V_profile
sceneIdentifier
T{CGRect={CGPoint=dd}{CGSize=dd}},N,V_frameInWindow
setOrientation:
UTF8String
timeout
_UIElementsForWebViewContentString:
webPageNodeExtractionJavaScript
_absoluteOriginOnScreen
_actionHandlersForScene:
_actionRespondersForScene:
_activityReportingQueue
_allowAppSwitcherControls
_awaitCompletion
_bestContentStringForWebViewUIElements:andTitle:
_bestVisibleStringForView:usingExecutor:
_bundleIdentifier
_cameraIntrinsics
_className
_completionCondition
_completionHandler
_completionQueue
_containerViewForDebugButtons
_context
_convertPointFromContentsToView:
_dataForDisplayedPDF
_debugButton
_decendantsRelevantForExtractionFromParentView:
_density
_dequeueActivityForReporting:
_descendantsRelevantForContentExtractionFromView:intoArray:
_descendantsRelevantForContentExtractionFromWindow:
_descendantsRelevantForDebugControls:
_determineIfDebuggingControlsShouldBeAllowed
_didSelectDebugControl:
_didSelectRecentsControl:
_donateContentsOfParentView:usingExecutor:withOptions:
_donateContentsOfWindow:usingExecutor:withOptions:
_donateText:withTitle:debugText:debugUrlString:leadImage:snapshot:uiElements:usingContextFromExecutor:
_donateText:withTitle:debugText:debugUrlString:rawHTML:leadImage:snapshot:uiElements:extractionItems:usingContextFromExecutor:
_done
_extractContentFromWebView:includingSnapshot:includingUIBoundingBox:ignoreViewTextLengthRequirements:ignoreViewCountCap:includeRawHTML:withCompletionHandler:
_extractContentFromWebView:includingUIBoundingBox:withCompletionHandler:
_extractItemsFromViewControllers:
_extractionSourceClassName
_firstAvailableUIViewControllerForUIView:
_fontSize
_fontSizeOfView:usingExecutor:
_formContextUserActivityFromUserActivity:
_frameInWindow
_getContentsAsStringWithCompletionHandler:
_getContentsOfAllFramesAsStringWithCompletionHandler:
_getNotableSuperviewClassNamesForView:
_group
_handleWKWebView:withExecutor:
_hasForegroundActiveContentWithReply:
_identifier
_installDebuggingButton
_installDebuggingControlsIfApplicable
_installRecentsButton
_ioSurface
_isActivityReportingAllowedForCurrentBundleIdentifier:
_isDisplayingPDF
_isDonationAllowedWithControlCode:
_isRelevantForExtractionWithView:
_isSensitiveTextContentType:
_loadContextKitIfNecessaryWithExecutor:
_observeApplicationStateNotifications
_onScreen
_orientation
_prepareAndDonateUserActivity:
_prepareAndExtractContentForUserActivity:bundleIdentifier:
_prepareDonationWithNonce:options:isRecentsCapture:andReply:
_prepareDonationWithNonce:options:isRecentsCapture:requiringMainQueue:andReply:
_profile
_providers
_queueActivityForReporting:
_recentsButton
_scene
_scene:didTransitionFromActivationState:withReasonsMask:
_scene:willTransitionToActivationState:withReasonsMask:
_sceneIdentifier
_sceneWillInvalidate:
_setScene:
_setUpDebuggingControlsIfPossibleAfterDelay:
_settingsDiffActionsForScene:
_shouldInstallAppSwitcherControls
_superviewClassNames
_text
_timeoutAfter
_title
_toolInstallationTimer
_topicId
_type
_unassociatedWindowSceneForScreen:create:
_userActivitiesQueuedForReporting
_view
_workItemQueue
absoluteOriginOnScreen
absoluteString
accessibilityLabel
accessory
activateConstraints:
addItem:
addObject:
addObjectsFromArray:
addObserverForName:object:queue:usingBlock:
addProvider:
addSubview:
addUserActivityObserver:
addWorkItem:
addWorkItem:toQueue:
addWorkItem:withContext:
addWorkItemToQueue:withWorkItem:andContext:
allObjects
allocWithZone:
alpha
array
arrayWithObjects:count:
attributedText
autorelease
bestContentStringForWebViewUIElements:andTitle:
bestImageForView:
boolForKey:
boolValue
bounds
bundleIdentifier
cameraIntrinsics
class
className
clipsToBounds
compareByPosition:
component
componentsJoinedByString:
componentsSeparatedByCharactersInSet:
componentsSeparatedByString:
configuration
conformsToProtocol:
constraintEqualToAnchor:
constraintEqualToConstant:
controlCodeForExecutor:
controlCodeForNonce:
convertRect:toView:
copy
copyWithZone:
count
countByEnumeratingWithState:objects:count:
currentPage
currentSelection
dataDetectorElement
dataUsingEncoding:
date
debugDescription
decodeArrayOfObjectsOfClass:forKey:
decodeBoolForKey:
decodeFloatForKey:
decodeIntForKey:
decodeIntegerForKey:
decodeObjectOfClass:forKey:
defaultCenter
delegate
descendantsRelevantForContentExtractionFromView:intoArray:
description
dictionaryWithObjects:forKeys:count:
donate
done
doubleValue
drawViewHierarchyInRect:afterScreenUpdates:
elementIsOnScreenWithView:window:
encodeBool:forKey:
encodeFloat:forKey:
encodeInteger:forKey:
encodeObject:forKey:
encodeWithCoder:
enumerateObjectsUsingBlock:
evaluateJavaScript:completionHandler:
evaluateJavaScript:inFrame:inContentWorld:completionHandler:
extractContentFromWebViewPDFData:withCompletionHandler:
extractFromScene:usingExecutor:withOptions:
extractUsingExecutor:
extractUsingExecutor:withOptions:
extractionSourceClassName
font
fontSize
frame
frameInWindow
handlePDFView:withExecutor:
hasPrefix:
hash
heightAnchor
home
identifier
image
imageSourceForUIImage:
init
initWithActivityItems:applicationActivities:
initWithCapacity:
initWithCoder:
initWithContext:workItemQueue:completionQueue:timeoutAfter:completionHandler:
initWithData:
initWithDonorBundleIdentifier:
initWithIOSurface:
initWithIOSurface:cameraIntrinsics:
initWithProperties:
initWithScene:
initWithText:className:
initWithTitle:type:bundleIdentifier:
initWithUTF8String:
initWithUserActivity:
initialize
invalidate
ioSurface
isEligibleForPrediction
isEqual:
isEqualToString:
isHidden
isKindOfClass:
isLoading
isMainThread
isMemberOfClass:
isOnScreen
isOpaque
isPDFView:
isPersistent
isSafariContentProvider
isSecureTextEntry
isSpringBoard
isWKWebView:
item
items
leadingAnchor
length
lockWithOptions:seed:
lookupClasses
mainBundle
mainScreen
markIncomplete
markReady
markReadyAndAwaitCompletion
name
newlineCharacterSet
nextResponder
nonce
null
numberWithDouble:
numberWithFloat:
numberWithUnsignedInt:
numberWithUnsignedInteger:
objectForInfoDictionaryKey:
objectForKeyedSubscript:
onScreen
openURL:
optionsForControlCode:
orientation
pageAtIndex:
pageCount
performSelector:
performSelector:withObject:
performSelector:withObject:withObject:
pointSize
prepareForDonationWithCompletionHandler:
presentViewController:animated:completion:
providerCount
regularExpressionWithPattern:options:error:
removeAllObjects
removeObject:
renderSnapshot:toDonationItem:
respondsToSelector:
retain
retainCount
reverseObjectEnumerator
room
rootViewController
scale
scannerResult
scheduleUserActivityRecordingWithUserActivity:
scheduledTimerWithTimeInterval:repeats:block:
screen
self
setAbsoluteOriginOnScreen:
setAssociatedUserActivity:
setBundleIdentifier:
setCameraIntrinsics:
setClassName:
setDebugText:
setDebugUrlString:
setDensity:
setExtractionItems:
setExtractionSourceClassName:
setFontSize:
setFrameInWindow:
setIdentifier:
setIoSurface:
setLeadImage:
setNonce:
setObject:forKeyedSubscript:
setOnScreen:
setProfile:
setRawHTML:
setRect:
setRemoteProcesses:
setSceneIdentifier:
setSnapshot:
setSuperviewClassNames:
setText:
setTintColor:
setTitle:
setTopicId:
setTranslatesAutoresizingMaskIntoConstraints:
setType:
setUiElements:
setView:
setWithArray:
sharedManager
signal
size
standardUserDefaults
string
stringByAppendingString:
stringByReplacingMatchesInString:options:range:withTemplate:
stringByTrimmingCharactersInSet:
stringWithFormat:
subarrayWithRange:
substringWithRange:
subviews
superclass
superview
superviewClassNames
supportsSecureCoding
systemButtonWithImage:target:action:
systemImageNamed:
takeSnapshotWithConfiguration:completionHandler:
text
textBlockLooksLikeAListWithText:
timeIntervalSinceDate:
timeIntervalSinceNow
title
toJSONSerializableDictionary
topAnchor
trailingAnchor
type
uniqueIdentifier
unsignedIntValue
userActivityDidBecomeCurrent:current:
userActivityPayloadWasChanged:payloadIdentifier:
userActivityPersistentIdentifierWasChanged:persistentIdentifier:previousValue:
userActivityTargetContentIdentifierWasChanged:targetContentIdentifier:previousValue:
userActivityWasCreated:
userActivityWasInvalidated:
userActivityWasMadeDirty:
userActivityWasSerialized:archived:
userActivityWasSynchronized:
userActivityWebpageURLWasChanged:webpageURL:previousValue:
userActivityWillBeDestroyed:
userActivityWillBecomeCurrent:current:
userActivityWillSynchronize:
value
valueForKeyPath:
valueWithCGPoint:
view
wait
weakObjectsHashTable
websiteDataStore
whiteColor
whitespaceAndNewlineCharacterSet
widthAnchor
window
windowScene
worldWithName:
zone
B16@0:8
v24@0:8@16
@24@0:8@16
v24@0:8@"NSCoder"16
@24@0:8@"NSCoder"16
@24@0:8^{_NSZone=}16
@40@0:8@16Q24@32
B24@0:8@16
Q16@0:8
@16@0:8
v24@0:8Q16
v20@0:8B16
v16@0:8
@"NSString"
v32@0:8@16@24
@32@0:8@16@24
q24@0:8@16
f16@0:8
v20@0:8f16
{CGRect={CGPoint=dd}{CGSize=dd}}16@0:8
v48@0:8{CGRect={CGPoint=dd}{CGSize=dd}}16
{CGPoint=dd}16@0:8
v32@0:8{CGPoint=dd}16
@"NSArray"
{CGPoint="x"d"y"d}
{CGRect="origin"{CGPoint="x"d"y"d}"size"{CGSize="width"d"height"d}}
B32@0:8@16@24
Q20@0:8C16
C24@0:8Q16
#16@0:8
@24@0:8:16
@32@0:8:16@24
@40@0:8:16@24@32
B24@0:8#16
B24@0:8:16
Vv16@0:8
^{_NSZone=}16@0:8
B24@0:8@"Protocol"16
@"NSString"16@0:8
v28@0:8@16B24
v40@0:8@16@24@32
v24@0:8@"NSUserActivity"16
v28@0:8@"NSUserActivity"16B24
v40@0:8@"NSUserActivity"16@"NSString"24@"NSString"32
v40@0:8@"NSUserActivity"16@"NSURL"24@"NSURL"32
v32@0:8@"NSUserActivity"16@"NSString"24
v32@0:8@"NSUserActivity"16@"NSData"24
v48@0:8Q16Q24B32B36@?40
v44@0:8Q16Q24B32@?36
B20@0:8C16
v24@0:8@?16
@"NSHashTable"
@"NSObject<OS_dispatch_queue>"
@"NSMutableArray"
@56@0:8@16@24@32Q40@?48
v32@0:8@?16@24
v40@0:8@16@?24@32
@"NSObject<OS_dispatch_group>"
@"NSCondition"
I16@0:8
v20@0:8I16
q16@0:8
v24@0:8q16
@"IOSurface"
@"NSData"
C24@0:8@16
v32@0:8@16@?24
v32@0:8@16Q24
d16@0:8
v40@0:8@16@24Q32
v96@0:8@16@24@32@40@48@56@64@72@80@88
d32@0:8@16@24
v52@0:8@16B24B28B32B36B40@?44
v40@0:8@16q24Q32
@24@0:8@"UIScene"16
@"UIScene"16@0:8
v24@0:8@"UIScene"16
@"NSArray"24@0:8@"UIScene"16
v40@0:8@"UIScene"16q24Q32
v24@0:8d16
@"UIButton"
@"NSTimer"
@"UIScene"
v80@0:8@16@24@32@40@48@56@64@72
v36@0:8@16B24@?28
@"UIView"
