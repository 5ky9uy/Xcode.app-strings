@(#)PROGRAM:ContextKitExtraction  PROJECT:ContextKit-1
WKWebView
PDFView
SFSafariView
text
className
superviewClassNames
fontSize
density
onScreen
frameInWindow
absoluteOriginOnScreen
Class: %@, FontSize: %.f, Origin:(%.f, %.f), AbsoluteOriginOnScreen:(%.f, %.f), Size:(%.f, %.f), On Screen:%@
SuperViews:%@
Content: %@
absoluteOriginX
abosluteOriginY
width
height
com.apple.siri.context.service
v24@?0@"NSData"8@"NSError"16
No description available
uuid
bundleIdentifier
recordedTimeInterval
numberOfOccurrences
generatedActivity
userActivityData
numberOfOccurrence
v16@?0@"NSError"8
v8@?0
UIContentTextExtractionEnabled
com.apple.contextkit.content-request
SafariViewService
com.apple.mobilesafari
com.apple.springboard
v16@?0@"CKContextDonation"8
v12@?0i8
UAUserActivity
CKContextContentProviderManager Activity Reporting Queue
CKContextGlobals
v20@?0@"CKContextExecutor"8B16
v16@?0@"NSNotification"8
v12@?0B8
com.apple.siri
com.apple.chronod
com.apple.BluetoothUIService
com.apple.CoreAuthUI
com.apple.DragUI.druid
com.apple.InCallService
com.apple.TelephonyUtilities
com.apple.Sharing.SharingHUDService
com.apple.Spotlight
com.wave.wwfe
Unable to find class %s
/System/Library/PrivateFrameworks/ContextKit.framework/ContextKit
/System/Library/PrivateFrameworks/ContextKit.framework/Contents/MacOS/ContextKit
com.apple.mobilecal
com.apple.Maps
com.apple.contextkit.ProofOfContext
orientation
profile
IOSurface
ioSurface
cameraIntrinsics
title
topicId
CKContextAllowAppSwitcherDebuggingControls
CKContextExtractionContentWorld
nodes
left
right
bottom
let traversed=null;function retrieveNodeInformation(){traversed=new Set;let e,t=document.createNodeIterator(document.documentElement,NodeFilter.SHOW_ELEMENT),n=[];for(;e=t.nextNode();){if(traversed.has(e))continue;let t=elementBoundingBoxInPage(e),o=t.height>10&&t.width>70,i=elementIsVisibleInViewport(e);if(!o||elementIsHidden(e))continue;let r=[].map.call(e.childNodes,function(e){return 3==e.nodeType&&e.nodeValue.trim()?e.nodeValue.trim():void 0}).filter(e=>null!=e).join().trim(),[l,d]=shouldGetAllText(e);l&&(r=getAllText(e).join(', ').trim());let s=elementOriginPagesFromViewport(t),w=/^(.)
+$/.test(r);r.length>5&&r.length<250&&!w&&(node={text:r,className:d,left:t.left,right:t.right,top:t.top,bottom:t.bottom,onScreen:i?1:0,pagesFromViewport:s},n.push(node),n.length>250&&(n[0].pagesFromViewPort>node.pagesFromViewPort?n.shift():n.pop()))}return traversed=null,JSON.stringify({nodes:n})}function shouldGetAllText(e){const t=e.getAttribute('itemtype');if(t&&t.includes('schema.org/'))return[!0,t];const n=e.nodeName;return n&&['address'].includes(n.toString().toLowerCase())?[!0,n]:[!1,null]}function getAllText(e){return traversed.add(e),[].flatMap.call(e.childNodes,function(e){if(e.nodeType!=Node.ELEMENT_NODE||!elementIsHidden(e)){if(e.nodeType==Node.TEXT_NODE){let t=e.nodeValue.trim();return t||void 0}return getAllText(e)}}).filter(e=>!['|',',',void 0].includes(e))}function elementBoundingBoxInPage(e){let t=e.getBoundingClientRect();return{left:t.left+window.scrollX,right:t.right+window.scrollX,top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,width:t.width,height:t.height}}function elementIsVisibleInViewport(e){const t=e.getBoundingClientRect();if(!(t.top<window.innerHeight&&t.left<window.innerWidth&&t.bottom>0&&t.right>0))return!1;const n={x:t.left+t.width/2,y:t.top+t.height/2};let o=document.elementFromPoint(n.x,n.y);if(null==o)return!1;do{if(o===e)return!0}while(o=o.parentNode);return!1}function elementIsHidden(e){const t=window.getComputedStyle(e);return'none'===t.display||'visible'!==t.visibility||'0'===t.opacity}function elementOriginPagesFromViewport(e){let t=0,n=0;return e.top<window.pageYOffset?t=window.pageYOffset-e.top:e.top>window.pageYOffset+window.innerHeight&&(t=e.top-window.pageYOffset-window.innerHeight),e.left<window.pageXOffset?n=window.pageXOffset-e.left:e.left>window.pageXOffset+window.innerWidth&&(n=e.left-window.pageXOffset-window.innerWidth),t=Math.floor(t/window.innerHeight),n=Math.floor(n/window.innerWidth),Math.max(t,n)}retrieveNodeInformation();
UILabel
UIScrollView
UIView
UIDropShadowView
UITransitionView
UIStackView
@UICollectionView
UITableViewCellContentView
NUIContainerStackView
v16@?0@"CKContextExecutor"8
_UIActivityContentCollectionView
@distinctUnionOfObjects.%@
self
%@%@%@
v32@?0@"NSString"8@"UIImage"16@"NSArray"24
v16@?0@"NSString"8
v24@?0@"NSString"8@"NSError"16
v24@?0@8@"NSError"16
v24@?0@"UIImage"8@"NSError"16
v16@?0@"NSTimer"8
clock.fill
square.and.arrow.up.fill
universal-recents://
SBFluidSwitcherContentView
PDFDocument
/System/Library/Frameworks/PDFKit.framework/PDFKit
/System/Library/Frameworks/PDFKit.framework/Contents/MacOS/PDFKit
WKContentWorld
/System/Library/Frameworks/WebKit.framework/WebKit
/System/Library/Frameworks/WebKit.framework/Contents/MacOS/WebKit
WKSnapshotConfiguration
CKContextUserActivity donation
XPC Error in donateWithReply: %@
Could not get notification state; error:%i
Ignoring outdated notification; delta=%llu
Could not register for extraction; error:%u
Extraction timed out; donations so far: %lu
Preparing donation of user activity for foreground process: %@
The web view is displaying an encrypted PDF.
Failed to extract enough text from main webpage frame. Trying to get content from all frames
Error evaluating JavaScript for node extraction: %@
Error parsing node information to JSON dictionary: %@
softlink:r:path:/System/Library/PrivateFrameworks/ContextKit.framework/ContextKit
softlink:r:path:/System/Library/Frameworks/PDFKit.framework/PDFKit
softlink:r:path:/System/Library/Frameworks/WebKit.framework/WebKit
CKContextExtractionUtil
CKContextUIClasses
CKContextUIElement
NSSecureCoding
NSCoding
NSCopying
CKContextDonationServiceProtocol
CKContextUserActivity
CKContextContentProviderManager
NSUserActivityObserver
NSObject
CKContextExecutor
CKContextImageSource
CKContextItem
CKContextContentProvider
CKContextContentProviderUIScene
_UISceneComponentProviding
ioSurface
size
scale
numberWithDouble:
numberWithUnsignedInt:
dictionaryWithObjects:forKeys:count:
initWithProperties:
lockWithOptions:seed:
CGImage
setLeadImage:
_renderImageToSurfaceWithImage:
setSnapshot:
renderLeadImage:toDonationItem:
renderSnapshot:toDonationItem:
lookupClasses
isWKWebView:
isPDFView:
isSFSafariView:
init
decodeObjectOfClass:forKey:
decodeArrayOfObjectsOfClass:forKey:
decodeFloatForKey:
decodeBoolForKey:
length
CGPointValue
encodeObject:forKey:
encodeFloat:forKey:
encodeBool:forKey:
valueWithCGPoint:
allocWithZone:
copy
setText:
setClassName:
setSuperviewClassNames:
setFontSize:
setDensity:
setFrameInWindow:
setAbsoluteOriginOnScreen:
setOnScreen:
frameInWindow
componentsJoinedByString:
stringWithFormat:
setObject:forKeyedSubscript:
numberWithFloat:
numberWithBool:
supportsSecureCoding
encodeWithCoder:
initWithCoder:
TB,R
copyWithZone:
initWithText:className:
compareByPosition:
description
toJSONSerializableDictionary
text
className
superviewClassNames
fontSize
density
absoluteOriginOnScreen
isOnScreen
.cxx_destruct
_onScreen
_fontSize
_density
_text
_className
_superviewClassNames
_absoluteOriginOnScreen
_frameInWindow
T@"NSString",&,N,V_text
T@"NSString",&,N,V_className
T@"NSArray",&,N,V_superviewClassNames
Tf,N,V_fontSize
Tf,N,V_density
T{CGRect={CGPoint=dd}{CGSize=dd}},N,V_frameInWindow
T{CGPoint=dd},N,V_absoluteOriginOnScreen
onScreen
TB,N,GisOnScreen,V_onScreen
_createUserActivityDataWithOptions:completionHandler:
timeIntervalSince1970
dateWithTimeIntervalSince1970:
title
hash
activityType
userInfo
webpageURL
referrerURL
decodeDoubleForKey:
_initWithUserActivityData:
encodeDouble:forKey:
_establishServiceConnection
synchronousRemoteObjectProxyWithErrorHandler:
donateUserActivity:
invalidate
initWithServiceName:
donate:
pruneLocalMetadataExcludingUUIDs:
retrieveImageDataForRecentWithUUID:withReply:
interfaceWithProtocol:
setWithObject:
setClasses:forSelector:argumentIndex:ofReply:
setRemoteObjectInterface:
resume
initWithUserActivity:
prepareForDonationWithCompletionHandler:
setEntryDate:
entryDate
donate
userActivity
uuid
numberOfOccurrences
setNumberOfOccurrences:
bundleIdentifier
setBundleIdentifier:
isGeneratedActivity
setGeneratedActivity:
_recordedTimeIntervalSince1970
_userActivity
_userActivityData
_generatedActivity
_uuid
_numberOfOccurrences
_bundleIdentifier
T@"NSUserActivity",R,N,V_userActivity
T@"NSUUID",R,N,V_uuid
T@"NSNumber",C,N,V_numberOfOccurrences
T@"NSString",C,N,V_bundleIdentifier
T@"NSDate",W,N
generatedActivity
TB,N,GisGeneratedActivity,V_generatedActivity
_observeApplicationStateNotifications
mainBundle
isEqualToString:
initWithUTF8String:
containsObject:
objectForInfoDictionaryKey:
boolValue
UTF8String
controlCodeForNonce:
optionsForControlCode:
_prepareDonationWithNonce:options:andReply:
weakObjectsHashTable
addUserActivityObserver:
performSelector:withObject:
count
addObject:
hashTableWithOptions:
removeObject:
markIncomplete
markReady
initWithDonorBundleIdentifier:
setNonce:
_isDonationAllowedWithControlCode:
allObjects
countByEnumeratingWithState:objects:count:
timeout
items
initWithContext:workItemQueue:completionQueue:timeoutAfter:completionHandler:
_loadContextKitIfNecessaryWithExecutor:
_unassociatedWindowSceneForScreen:create:
mainScreen
extractFromScene:usingExecutor:withOptions:
extractUsingExecutor:withOptions:
_shouldAllowContentTextContextExtraction
performSelector:
defaultCenter
addObserverForName:object:queue:usingBlock:
sharedManager
scheduleUserActivityRecordingWithUserActivity:
isEligibleForPrediction
_isActivityReportingAllowedForCurrentBundleIdentifier:
_prepareAndDonateUserActivity:forBundleIdentifier:
_queueActivityForReporting:
_hasForegroundActiveContent
_formContextUserActivityFromUserActivity:
_dequeueActivityForReporting:
initWithActivityType:
_scene
activationState
isSpringBoard
isSafariContentProvider
isEqual:
class
self
performSelector:withObject:withObject:
isProxy
isKindOfClass:
isMemberOfClass:
conformsToProtocol:
respondsToSelector:
retain
release
autorelease
retainCount
zone
superclass
debugDescription
TQ,R
T#,R
T@"NSString",R,C
userActivityWasCreated:
userActivityWillBeDestroyed:
userActivityWasInvalidated:
userActivityWillBecomeCurrent:current:
userActivityDidBecomeCurrent:current:
userActivityWasMadeDirty:
userActivityPersistentIdentifierWasChanged:persistentIdentifier:previousValue:
userActivityTargetContentIdentifierWasChanged:targetContentIdentifier:previousValue:
userActivityWebpageURLWasChanged:webpageURL:previousValue:
userActivityWillSynchronize:
userActivityWasSynchronized:
userActivityPayloadWasChanged:payloadIdentifier:
userActivityWasSerialized:archived:
providerCount
addProvider:
addProviderUnretained:
removeProvider:
_providers
_providersStrong
_activityReportingQueue
_userActivitiesQueuedForReporting
setWithArray:
signal
_awaitCompletion
wait
addWorkItemToQueue:withWorkItem:andContext:
markReadyAndAwaitCompletion
addWorkItem:
addWorkItem:toQueue:
addWorkItem:withContext:
done
context
_workItemQueue
_completionQueue
_group
_timeoutAfter
_completionCondition
_completionHandler
_done
_context
TAB,R,V_done
T@,R,N,V_context
initWithIOSurface:
setIoSurface:
setCameraIntrinsics:
decodeIntegerForKey:
arrayWithObjects:count:
decodeObjectOfClasses:forKey:
encodeInteger:forKey:
orientation
profile
cameraIntrinsics
imageSourceForUIImage:
initWithIOSurface:cameraIntrinsics:
setOrientation:
setProfile:
_orientation
_ioSurface
_cameraIntrinsics
_profile
T@"IOSurface",&,N,V_ioSurface
T@"NSData",&,N,V_cameraIntrinsics
TI,N,V_orientation
Tq,N,V_profile
setTitle:
setTopicId:
topicId
_title
_topicId
T@"NSString",C,N,V_title
T@"NSString",C,N,V_topicId
extractUsingExecutor:
_setScene:
_setUpDebuggingControlsIfPossibleAfterDelay:
isValid
_visibleWindows
_donateContentsOfWindow:usingExecutor:withOptions:
isHidden
alpha
frame
_isRelevantForExtractionWithView:
subviews
reverseObjectEnumerator
clipsToBounds
bounds
_descendantsRelevantForContentExtractionFromView:intoArray:
_descendantsRelevantForContentExtractionFromWindow:
initWithCapacity:
_bestTitleFromWindow:usingExecutor:
_bestVisibleStringForView:usingExecutor:
_getNotableSuperviewClassNamesForView:
_fontSizeOfView:usingExecutor:
substringWithRange:
convertRect:toView:
screen
coordinateSpace
convertPoint:toCoordinateSpace:
_bestImageForView:
subarrayWithRange:
addObjectsFromArray:
isOpaque
drawViewHierarchyInRect:afterScreenUpdates:
newlineCharacterSet
stringByTrimmingCharactersInSet:
_donateText:withTitle:withDebugText:debugUrlString:withLeadImage:withSnapshot:withUIElements:usingContextFromExecutor:
rootViewController
navigationController
topViewController
navigationItem
windowScene
titleView
superview
image
setDebugText:
setDebugUrlString:
setUiElements:
addItem:
nonce
font
pointSize
remoteProcesses
setRemoteProcesses:
_handleWKWebView:withExecutor:
_handlePDFView:withExecutor:
_controlCodeForExecutor:
textContentType
_isSensitiveTextContentType:
isSecureTextEntry
attributedText
string
accessibilityLabel
component
_blocksFromText:
_textBlockLooksLikeAListWithText:
componentsSeparatedByCharactersInSet:
valueForKeyPath:
array
componentsSeparatedByString:
whitespaceAndNewlineCharacterSet
stringByReplacingMatchesInString:options:range:withTemplate:
_UIElementsForWebViewContentString:
_bestContentStringForWebViewUIElements:andTitle:
absoluteString
_extractContentFromWebView:includingSnapshot:includingUIBoundingBox:withCompletionHandler:
window
_isDisplayingPDF
_dataForDisplayedPDF
initWithData:
pageCount
pageAtIndex:
attributedString
stringByAppendingString:
_getContentsOfAllFramesAsStringWithCompletionHandler:
_getContentsAsStringWithCompletionHandler:
worldWithName:
dataUsingEncoding:
JSONObjectWithData:options:error:
objectForKeyedSubscript:
null
doubleValue
_convertPointFromContentsToView:
evaluateJavaScript:inFrame:inContentWorld:completionHandler:
setRect:
takeSnapshotWithConfiguration:completionHandler:
currentSelection
currentPage
standardUserDefaults
boolForKey:
_shouldInstallAppSwitcherControls
_installDebuggingButton
_installRecentsButton
_installDebuggingControlsIfApplicable
_determineIfDebuggingControlsShouldBeAllowed
scheduledTimerWithTimeInterval:repeats:block:
_containerViewForDebugButtons
systemImageNamed:
_didSelectRecentsControl:
systemButtonWithImage:target:action:
whiteColor
setTintColor:
setTranslatesAutoresizingMaskIntoConstraints:
addSubview:
topAnchor
constraintEqualToAnchor:
leadingAnchor
widthAnchor
constraintEqualToConstant:
heightAnchor
activateConstraints:
_didSelectDebugControl:
trailingAnchor
openURL:
URLWithString:
initWithActivityItems:applicationActivities:
presentViewController:animated:completion:
_descendantsRelevantForDebugControls:
containsString:
initialize
initWithScene:
_settingsDiffActionsForScene:
_actionHandlersForScene:
_scene:willTransitionToActivationState:withReasonsMask:
_scene:didTransitionFromActivationState:withReasonsMask:
_sceneWillInvalidate:
T@"UIScene",W,N,G_scene,S_setScene:
_debugButton
_recentsButton
_allowAppSwitcherControls
_toolInstallationTimer
__scene
T@"UIScene",W,N,G_scene,S_setScene:,V__scene
regularExpressionWithPattern:options:error:
@24@0:8@16
v32@0:8@16@24
v16@0:8
B24@0:8@16
B16@0:8
v24@0:8@16
v24@0:8@"NSCoder"16
@24@0:8@"NSCoder"16
@24@0:8^{_NSZone=}16
@32@0:8@16@24
q24@0:8@16
@16@0:8
f16@0:8
v20@0:8f16
{CGRect={CGPoint=dd}{CGSize=dd}}16@0:8
v48@0:8{CGRect={CGPoint=dd}{CGSize=dd}}16
{CGPoint=dd}16@0:8
v32@0:8{CGPoint=dd}16
v20@0:8B16
@"NSString"
@"NSArray"
{CGPoint="x"d"y"d}
{CGRect="origin"{CGPoint="x"d"y"d}"size"{CGSize="width"d"height"d}}
Vv24@0:8@16
v32@0:8@16@?24
Vv24@0:8@"CKContextDonation"16
Vv24@0:8@"CKContextUserActivity"16
v24@0:8@"NSArray"16
v32@0:8@"NSUUID"16@?<v@?@"UIImage"@"UIImage">24
v24@0:8@?16
Q16@0:8
@"NSUserActivity"
@"NSData"
@"NSUUID"
@"NSNumber"
Q20@0:8C16
C24@0:8Q16
#16@0:8
@24@0:8:16
@32@0:8:16@24
@40@0:8:16@24@32
B24@0:8#16
B24@0:8:16
Vv16@0:8
^{_NSZone=}16@0:8
B24@0:8@"Protocol"16
@"NSString"16@0:8
v28@0:8@16B24
v40@0:8@16@24@32
v24@0:8@"NSUserActivity"16
v28@0:8@"NSUserActivity"16B24
v40@0:8@"NSUserActivity"16@"NSString"24@"NSString"32
v40@0:8@"NSUserActivity"16@"NSURL"24@"NSURL"32
v32@0:8@"NSUserActivity"16@"NSString"24
v32@0:8@"NSUserActivity"16@"NSData"24
v40@0:8Q16Q24@?32
B20@0:8C16
@"NSHashTable"
@"NSObject<OS_dispatch_queue>"
@"NSMutableArray"
@56@0:8@16@24@32Q40@?48
v32@0:8@?16@24
v40@0:8@16@?24@32
@"NSObject<OS_dispatch_group>"
@"NSCondition"
I16@0:8
v20@0:8I16
q16@0:8
v24@0:8q16
@"IOSurface"
v32@0:8@16Q24
d16@0:8
v40@0:8@16@24Q32
v80@0:8@16@24@32@40@48@56@64@72
C24@0:8@16
d32@0:8@16@24
v40@0:8@16B24B28@?32
v40@0:8@16q24Q32
@24@0:8@"UIScene"16
@"UIScene"16@0:8
v24@0:8@"UIScene"16
@"NSArray"24@0:8@"UIScene"16
v40@0:8@"UIScene"16q24Q32
v24@0:8d16
@"UIButton"
@"NSTimer"
@"UIScene"
