6A_p
@(#)PROGRAM:IMAutomaticHistoryDeletionAgent  PROJECT:IMAutomaticHistoryDeletionAgent-1000
HealthCheckLastStartTime
HealthCheckDeltaOverride
HealthCheckLeewayOverride
madrid-healthcheck-fuzz-delta-maximum
madrid-healthcheck-fuzz-delta-leeway
madrid-healthcheck-enabled
madrid-healthcheck-per-chat-message-count
madrid-healthcheck-messages-load
madrid-healthcheck-chats-count
IMAutomaticHistoryDeletionAgent
Feature enabled %@. { isInternalInstall: %@ }
Responding with %@
@"IMHealthCheckResponse"32@?0@"IMHealthCheck"8@"NSObject<NSSecureCoding>"16@"NSDictionary"24
Device is not a phone (%@), can't initiate
There are no other known devices, not initiating
Time since last %@
This device initiated too recently
phone
B16@?0@8
There are no other phones
There is another phone, but this one sorted first (%@ VS %@)
There is another phone that should initiate (%@ VS %@)
Health check will begin in %@ seconds (leeway of %@ seconds) {startTime: %@}
Health check beginning %@
Loaded chats. { numberOfChats: %@, loadCount: %@ }
Health check finished with results: %@
v16@?0@"NSArray"8
v8@?0
iMessage
v16@?0^{_IMDChatRecordStruct=}8
q24@?0@8@16
@"NSString"24@?0@"NSString"8@"NSString"16
Submitting metrics. { destinationCount: %ld, results : %@, loadedMessages: %@ }
Finished submitting
items
guid
cmpc
IMHealthCheckTranscript <%@> [Items: %@]
supportsSecureCoding
TB,R
context
T@"NSData",&,N,V_context
T@"NSDictionary",&,N,V_items
T@"NSString",&,N,V_guid
compareCount
TQ,N,V_compareCount
first
last
IMHealthCheck
Running retrieveTranscriptForContext in IMHealthCheck client
/BuildRoot/Library/Caches/com.apple.xbs/Sources/IMCore_Sim/IMCore-1815.1.1/IMAutomaticHistoryDeletionAgent/Healthcheck/IMHealthCheck.m
<Unknown File>
Items can't be nil
v16@?0@"IMHealthCheckResponse"8
Starting deltasFromTranscript in IMHealthCheck client. { compareCount: %@ }
hash
TQ,R
superclass
T#,R
description
T@"NSString",R,C
debugDescription
daemon
T@"<IMHDaemon>",&,N,V_daemon
responseBlock
T@?,C,N,V_responseBlock
completion
T@?,C,N,V_completion
delegate
T@"<IMHealthCheckDelegate>",W,N,V_delegate
idsInterface
T@"<IMHIDSInterface>",&,N,V_idsInterface
operation
Tq,R,N,V_operation
cost
Tq,R,N,V_cost
info
deltas: %@ info: %@
deltaMap
T@"NSDictionary",&,N,V_deltaMap
userInfo
T@"NSDictionary",&,N,V_userInfo
T@"<IMHServiceWrapperDelegate>",&,N
devices
T@"NSArray",R,C,N
accounts
T@"NSSet",R,C,N
service
T@"IDSService",&,N,V_service
completionMap
T@"NSMutableDictionary",&,N,V_completionMap
T@"<IMHServiceWrapperDelegate>",&,N,V_delegate
madrid-healthcheck-message-timeout
Recieved incoming transcript: %@
Recieved reply transcript from client: %@ info: %@
B24@?0@8@16
Replying for transcript: %@ with deltas: %@
v24@?0@"NSDictionary"8@"NSDictionary"16
Received incoming response: %@ for transcript: %@
Beginning health check for transcript: %@
Successfully sent transcript: %@
Failed to send transcript: %@
v12@?0B8
T@"<IMHealthCheckDaemonDelegate>",W,N
requestStore
T@"<IMHRequestStore>",&,N,V_requestStore
T@"<IMHIDSInterface>",W,N,V_idsInterface
T@"<IMHealthCheckDaemonDelegate>",W,N,V_delegate
com.apple.MobileSMS
automatic-deletion-disabled
IMAutomaticHistoryDeletionAgent launched!
%@/Library/Preferences/%@
IPHONE_SHARED_RESOURCES_DIRECTORY
CFFIXED_USER_HOME
com.apple.notifyd.matching
Received iOS keep messages pref change notif,.
v16@?0@"NSObject<OS_xpc_object>"8
Reached iOS automatic deletion setup method
Device under first data protection lock, returning early.
Server returned that deletion was diabled, not deleting anything.
Should we cleans orphaned attachments? (date=%@) (weekdayComponents:%@) (Day:%ld)
Target date: %ld
TargetAttachmentCleanupDate
Changing target date based on defaults
Reached iOS deletion method
KeepMessageForDays
Notifying agent so that it can reload the chats.
com.apple.automatichistorydeletion.deleted
not deleting messages older than %ld days
Could not find sms domain
deleting stale ChatKit previews
deleting stale ChatKit bubble plugin previews
Not the target date, bailing
CKAnimatedImageMediaObjectPreview
ChatKit preview (%@) is too old (created %@), deleting.
/var/mobile/Library/Caches/com.apple.MobileSMS/Plugins/Snapshots
Cleaning database
Notifying to kick off daily periodic sync from automatic deletion agent
Completed health check
Not initiating. { shouldInitiate: %@, isTargetDate: %@ }
Feature has been disabled
mssd
IMHealthCheckDelta: [out of order: %@ missed: %@ hashMatched: %@]
matchedCoarseHash
TB,N,V_matchedCoarseHash
numOutOfOrder
Tq,R,N,V_numOutOfOrder
numMissed
Tq,R,N,V_numMissed
T@"<IMHRequestStoreDelegate>",W,N
timeout
Td,N,V_timeout
storedTranscripts
T@"NSMutableDictionary",&,N,V_storedTranscripts
T@"<IMHRequestStoreDelegate>",W,N,V_delegate
Must provide IMDeltaDelete and IMDeltaInsert to IMHDistanceCalculator init
T@"NSArray",R,C,N,V_ops
delta
transcript
type
IMHealthCheckMessageTypeUnknown
IMHealthCheckMessageTypeRequest
IMHealthCheckMessageTypeRespond
com.apple.private.alloy.madrid.healthcheck
Transcript is nil, not sending message.
v28@?0@"NSString"8@"NSError"16B24
Unable to reply to health check, message failed to send with error: %@
Successfully replied to transcript
Recieved incoming message of type: %@(%@)
destinations
T@"NSSet",R,N
T@"NSArray",R,N
aliases
idsService
T@"<IMHService>",&,N,V_idsService
T@"<IMHDaemon>",W,N,V_daemon
data
T@"NSDictionary",&,N,V_data
sharedInstanceForBagType:
objectForKey:
sharedInstance
isInternalInstall
boolValue
alloc
dictionary
class
isKindOfClass:
idsInterface
aliases
setWithArray:
objectForKeyedSubscript:
isEqualToSet:
numberWithBool:
setObject:forKeyedSubscript:
copy
initWithData:userInfo:
initWithResponseBlock:
devices
deviceType
numberWithInteger:
count
unsignedLongLongValue
numberWithDouble:
modelIdentifier
lowercaseString
containsString:
__imArrayByFilteringWithBlock:
uniqueID
sortedArrayUsingSelector:
firstObject
compare:
numberWithUnsignedLongLong:
numberWithLongLong:
numberWithUnsignedInteger:
destinations
dictionaryWithObjects:forKeys:count:
deltasFromDictionary:context:compareCount:withCompletion:
array
serviceName
isEqualToIgnoringCase:
addObject:
lastMessage
messageID
sortUsingComparator:
countByEnumeratingWithState:objects:count:
chatIdentifier
groupID
longLongValue
arrayWithObjects:count:
guid
unsignedIntegerValue
stringByReplacingOccurrencesOfString:withString:
length
substringToIndex:
intValue
userInfo
deltaMap
matchedCoarseHash
numOutOfOrder
numMissed
initWithItems:context:
init
appendString:
description
stringWithFormat:
encodeObject:forKey:
setWithObjects:
decodeObjectOfClasses:forKey:
decodeObjectOfClass:forKey:
transcriptWithItems:context:
supportsSecureCoding
encodeWithCoder:
initWithCoder:
.cxx_destruct
items
setItems:
context
setContext:
setGuid:
compareCount
setCompareCount:
_items
_context
_guid
_compareCount
subarrayWithRange:
data
objectAtIndexedSubscript:
dataUsingEncoding:
appendData:
isEqualToString:
setIdsInterface:
setDaemon:
initWithIDSInterface:daemon:
setDelegate:
lastObject
unarchiveObjectWithData:
stringWithUTF8String:
currentHandler
handleFailureInMethod:object:file:lineNumber:description:
processItemDictionary:withCompareCount:bookends:
delegate
provideItemsForContext:bookends:finishedBlock:
archivedDataWithRootObject:
stringGUID
beginCheckWithTranscript:
isEqual:
self
performSelector:
performSelector:withObject:
performSelector:withObject:withObject:
isProxy
isMemberOfClass:
conformsToProtocol:
respondsToSelector:
retain
release
autorelease
retainCount
zone
hash
superclass
debugDescription
retrieveTranscriptForTranscript:reply:
finishedCheckForTranscript:withResult:
deltasFromDictionary:context:withCompletion:
daemon
responseBlock
setResponseBlock:
completion
setCompletion:
_delegate
_idsInterface
_daemon
_responseBlock
_completion
initWithOperation:cost:
operation
cost
_operation
_cost
setDeltaMap:
setUserInfo:
_deltaMap
_userInfo
initWithService:
addDelegate:queue:
removeDelegate:
dealloc
accounts
service
sendMessage:toDestinations:priority:options:identifier:error:
service:account:incomingMessage:fromID:context:
service:account:incomingData:fromID:context:
service:account:incomingUnhandledProtobuf:fromID:context:
service:account:incomingResourceAtURL:fromID:context:
service:account:incomingResourceAtURL:metadata:fromID:context:
service:activeAccountsChanged:
service:devicesChanged:
service:nearbyDevicesChanged:
service:connectedDevicesChanged:
service:account:identifier:didSendWithSuccess:error:
service:account:identifier:didSendWithSuccess:error:context:
service:account:identifier:hasBeenDeliveredWithContext:
service:account:inviteReceivedForSession:fromID:
service:account:inviteReceivedForSession:fromID:withOptions:
service:account:inviteReceivedForSession:fromID:withContext:
serviceSpaceDidBecomeAvailable:
serviceAllowedTrafficClassifiersDidReset:
service:didSwitchActivePairedDevice:acknowledgementBlock:
sendMessage:toDestinations:priority:options:withCompletion:
setService:
completionMap
setCompletionMap:
_service
_completionMap
doubleValue
initWithTimeout:
deltaFromReference:toTruth:usingEqualityFunction:
setMatchedCoarseHash:
replyToTranscript:withProcessedResponse:context:
requestStore
saveResponse:forTranscript:
storeTranscript:forExpectedCount:
sendTranscript:withCompletion:
requestStore:finishedCheckForTranscript:withResponses:
processRecievedTranscript:withContext:
processResponse:forTranscript:
setRequestStore:
_requestStore
trackEvent:
cStringUsingEncoding:
currentRunLoop
setWatchesDataProtectionLockState:
isUnderFirstDataProtectionLock
date
calendarWithIdentifier:
components:fromDate:
weekday
deleteMessagesAndAttachmentsAfterDays:
cleanUpOrphanAttachments
fileURLWithPathComponents:
defaultManager
enumeratorAtURL:includingPropertiesForKeys:options:errorHandler:
nextObject
path
attributesOfItemAtPath:error:
timeIntervalSinceNow
removeItemAtPath:error:
fileURLWithPath:
cleanDatabase
initWithNumOutOfOrder:numMissed:
decodeIntegerForKey:
decodeBoolForKey:
encodeInteger:forKey:
encodeBool:forKey:
_matchedCoarseHash
_numMissed
_numOutOfOrder
_timeoutTimerFired:
scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:
integerValue
_handleTimeoutForTranscriptWithkey:
invalidate
timeout
setTimeout:
storedTranscripts
setStoredTranscripts:
_timeout
_storedTranscripts
isValidOperation:
exceptionWithName:reason:userInfo:
initWithOperationsAndCosts:
initWithCapacity:
setObject:atIndexedSubscript:
costForOperation:
numberWithLong:
minimumIn:
editDistanceFromReference:toTruth:usingEqualityFunction:
orderedSetWithArray:
mutableCopy
intersectOrderedSet:
minusOrderedSet:
unionOrderedSet:
editDistanceFromReference:toTruth:
deltaFromReference:toTruth:
_ops
initWithIMHService:
idsService
allSelfDeviceIDs
vettedAliases
allObjects
fromID
setWithObject:
initForReadingWithData:
setRequiresSecureCoding:
setIdsService:
_idsService
setData:
_data
IMHealthCheckTranscript
NSSecureCoding
NSCoding
IMHealthCheck
IMHealthCheckDaemonDelegate
NSObject
IMHealthCheckOperationAndCost
IMHProcessedResponse
IMHServiceWrapper
IDSServiceDelegate
IMHService
IMHealthCheckDaemon
IMHRequestStoreDelegate
IMHDaemon
IMHealthCheckDelta
IMHRequestStore
IMHDistanceCalculator
IMHealthCheckIDSInterface
IMHServiceWrapperDelegate
IMHIDSInterface
IMHealthCheckResponse
@32@0:8@16@24
B16@0:8
v24@0:8@16
@24@0:8@16
v24@0:8@"NSCoder"16
@24@0:8@"NSCoder"16
@16@0:8
v16@0:8
Q16@0:8
v24@0:8Q16
@"NSDictionary"
@"NSData"
@"NSString"
@40@0:8@16Q24@32
B24@0:8@16
#16@0:8
@24@0:8:16
@32@0:8:16@24
@40@0:8:16@24@32
B24@0:8#16
B24@0:8:16
Vv16@0:8
^{_NSZone=}16@0:8
B24@0:8@"Protocol"16
@"NSString"16@0:8
v32@0:8@16@?24
v32@0:8@16@24
v32@0:8@"IMHealthCheckTranscript"16@?<v@?@"NSDictionary"@"NSDictionary">24
v32@0:8@"IMHealthCheckTranscript"16@"NSArray"24
@24@0:8@?16
B40@0:8@16@24@?32
B48@0:8@16@24Q32@?40
@?16@0:8
v24@0:8@?16
@"<IMHealthCheckDelegate>"
@"<IMHIDSInterface>"
@"<IMHDaemon>"
@32@0:8q16q24
q16@0:8
v56@0:8@16@24@32@40@48
v64@0:8@16@24@32@40@48@56
v52@0:8@16@24@32B40@44
v60@0:8@16@24@32B40@44@52
v48@0:8@16@24@32@40
v40@0:8@16@24@?32
v56@0:8@"IDSService"16@"IDSAccount"24@"NSDictionary"32@"NSString"40@"IDSMessageContext"48
v56@0:8@"IDSService"16@"IDSAccount"24@"NSData"32@"NSString"40@"IDSMessageContext"48
v56@0:8@"IDSService"16@"IDSAccount"24@"IDSProtobuf"32@"NSString"40@"IDSMessageContext"48
v56@0:8@"IDSService"16@"IDSAccount"24@"NSURL"32@"NSString"40@"IDSMessageContext"48
v64@0:8@"IDSService"16@"IDSAccount"24@"NSURL"32@"NSDictionary"40@"NSString"48@"IDSMessageContext"56
v32@0:8@"IDSService"16@"NSSet"24
v32@0:8@"IDSService"16@"NSArray"24
v52@0:8@"IDSService"16@"IDSAccount"24@"NSString"32B40@"NSError"44
v60@0:8@"IDSService"16@"IDSAccount"24@"NSString"32B40@"NSError"44@"IDSMessageContext"52
v48@0:8@"IDSService"16@"IDSAccount"24@"NSString"32@40
v48@0:8@"IDSService"16@"IDSAccount"24@"IDSSession"32@"NSString"40
v56@0:8@"IDSService"16@"IDSAccount"24@"IDSSession"32@"NSString"40@"NSDictionary"48
v56@0:8@"IDSService"16@"IDSAccount"24@"IDSSession"32@"NSString"40@"NSData"48
v24@0:8@"IDSService"16
v40@0:8@"IDSService"16@"IDSDevice"24@?<v@?>32
v56@0:8@16@24q32@40@?48
v56@0:8@"NSDictionary"16@"NSSet"24q32@"NSDictionary"40@?<v@?@"NSString"@"NSError"B>48
@"<IMHServiceWrapperDelegate>"16@0:8
v24@0:8@"<IMHServiceWrapperDelegate>"16
@"NSArray"16@0:8
@"NSSet"16@0:8
@"<IMHServiceWrapperDelegate>"
@"IDSService"
@"NSMutableDictionary"
v40@0:8@16@24@32
v40@0:8@"IMHRequestStore"16@"IMHealthCheckTranscript"24@"NSArray"32
v32@0:8@"IMHealthCheckTranscript"16@24
v32@0:8@"IMHProcessedResponse"16@"IMHealthCheckTranscript"24
v24@0:8@"IMHealthCheckTranscript"16
@"<IMHealthCheckDaemonDelegate>"16@0:8
v24@0:8@"<IMHealthCheckDaemonDelegate>"16
@"<IMHealthCheckDaemonDelegate>"
@"<IMHRequestStore>"
v20@0:8B16
v32@0:8@16q24
v32@0:8@"IMHealthCheckTranscript"16q24
@"<IMHRequestStoreDelegate>"16@0:8
v24@0:8@"<IMHRequestStoreDelegate>"16
@24@0:8d16
d16@0:8
v24@0:8d16
@"<IMHRequestStoreDelegate>"
q24@0:8@16
B24@0:8q16
q24@0:8q16
q40@0:8@16@24@?32
q32@0:8@16@24
@40@0:8@16@24@?32
@"NSArray"
v32@0:8@"IMHealthCheckTranscript"16@?<v@?B>24
v40@0:8@"IMHealthCheckTranscript"16@"IMHProcessedResponse"24@32
@"<IMHService>"
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>application-identifier</key>
<string>com.apple.imautomatichistorydeletionagent</string>
<key>com.apple.CommCenter.fine-grained</key>
<array>
<string>spi</string>
</array>
<key>com.apple.private.ids.messaging</key>
<array>
<string>com.apple.private.alloy.madrid.healthcheck</string>
</array>
<key>com.apple.private.ids.messaging.high-priority</key>
<array>
<string>com.apple.private.alloy.madrid.healthcheck</string>
</array>
<key>com.apple.private.imcore.imdpersistence.database-access</key>
<true/>
</dict>
</plist>
