#! /bin/sh
# AskUserForApplicationDialog - Asks the user to choose an application using a modal
#                               dialog and prints out the selected path
#     Optional first argument is title string for dialog
#     Optional second argument is prompt string for dialog
if [ $# -gt 0 ] ; then
    TITLE_STRING="with title \"$1\""
else
    TITLE_STRING=""
if [ $# -gt 1 ] ; then
    PROMPT_STRING="with prompt \"$2\""
else
    PROMPT_STRING=""
osascript << ENDOFSCRIPT
to getNameOfFrontProcess()
    tell application "System Events"
        set pairs to {name, frontmost} of every process
    end tell
    repeat with p from 1 to count item 1 of pairs
        if item p of item 2 of pairs then return (item p of item 1 of pairs) as string
    end repeat
end getNameOfFrontProcess
tell application (my getNameOfFrontProcess())
    choose application ${TITLE_STRING} ${PROMPT_STRING} as alias
end tell
POSIX path of the result
ENDOFSCRIPT
